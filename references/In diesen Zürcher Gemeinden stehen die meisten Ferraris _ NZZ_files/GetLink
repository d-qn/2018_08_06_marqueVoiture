!function(e,t,n){var o=e.invibes=e.invibes||{};e.location.href.match(/\bbvci|\bbvid/i)&&(o.testMode=!0),o.isTablet=!1,o.deviceType=o.isTablet?4:1;var r={videoAdDomain:"//content.videostep.com",bidAdDomain:"//bid.videostep.com",videoAdCss:"//static.r66net.com/Content/dvideoad11.css",uwebDomain:"//u.videostep.com/User",ewebUrl:"//paid.invibes.com",sewebUrl:"//event.invibes.com",statwebUrl:"https://s.videostep.com",kwebstatUrl:"https://kwebstat.videostep.com",getlink:"//static.r66net.com/scripts_eu/gl18.14.3.js",krpanojs:"//static.r66net.com/Scripts/krpano/krpano.js",gyrojs:"//static.r66net.com/Scripts/krpano/gyro2.js",videoplayerjs:"//static.r66net.com/Scripts/krpano/videoplayer.js",followmousejs:"//static.r66net.com/Scripts/krpano/followmouse.js"},a={0:"https://bk.madamebuzz.fr/beacon.html",1:"https://bk.futura-sciences.com/beacon.html"};if(frameElement)!function(t){var i=function(e){t.parentElement.insertBefore(e,t)},a=function(e){var t=n.querySelectorAll(e);Array.prototype.forEach.call(t,function(e){e.parentElement.removeChild(e),i(e)})};a("[id^=divVideoStep]"),a("[id^=_videoStep]"),a("[id^=ivbs]");var s=n.createElement("script");if(s.type="text/javascript",s.async=!0,null!=o.getlinkUrl&&""!==o.getlinkUrl?s.src=o.getlinkUrl:s.src=r.getlink,i(s),o){var d=e.parent.invibes=e.parent.invibes||{};Object.keys(o).forEach(function(e){o.hasOwnProperty(e)&&(d[e]=o[e])})}}(frameElement);else if(o.alreadyRun)console.warn("IVBS Script run twice!");else{o.alreadyRun=!0,function(e){function t(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function n(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void i._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var n;try{n=i(e._value)}catch(e){return void r(t.promise,e)}o(t.promise,n)}else(1===e._state?o:r)(t.promise,e._value)}))}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void a(e);if("function"==typeof n)return void s(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,a(e)}catch(t){r(e,t)}}function r(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,o=e._deferreds.length;t<o;t++)n(e,e._deferreds[t]);e._deferreds=null}function s(e,t){var i=!1;try{e(function(e){i||(i=!0,o(t,e))},function(e){i||(i=!0,r(t,e))})}catch(e){if(i)return;i=!0,r(t,e)}}var d=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,i){var o=new this.constructor(t);return n(this,new function(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}(e,i,o)),o},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,i){function n(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){n(r,e)},i)}t[r]=a,0==--o&&e(t)}catch(e){i(e)}}if(0===t.length)return e([]);for(var o=t.length,r=0;r<t.length;r++)n(r,t[r])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,i){i(e)})},i.race=function(e){return new i(function(t,i){for(var n=0,o=e.length;n<o;n++)e[n].then(t,i)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){d(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=i:e.Promise||(e.Promise=i)}(this);var s=function(){return t.window.location.href.substring(0,300).split(/[?#]/)[0]},d=function(e,t,i){return e+(e.indexOf("?")<0?"?":"&")+t+"="+i},c=function(e,t){var i=e;if(t)for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];null==o&&(o=""),i=d(i,encodeURIComponent(n),encodeURIComponent(o))}return i},l=function(){return Math.round(1e12*Math.random()).toString(36).substring(0,10)};o.jsonp=function(e,t){var i="cb_"+l(),r=n.createElement("script");r.src=d(e,"callback","invibes."+i),o[i]=t||f,n.head.appendChild(r)},o.jsonpWithParams=function(e,t,i){o.jsonp(c(e,t),i)},o.pixel=function(e,t){var i=new Image;return new Promise(function(n,o){i.addEventListener("load",n),i.addEventListener("error",o),i.src=c(e,t)})};var u=function(e){return Object.keys(e).map(function(t){var i=e[t];return[t,i=null!=i?i.toString():""].map(encodeURIComponent).join("=")}).join("&")},v=function(e,t){var i=function(e){var t=(e=e||"").match(/\/\/[^\/]+/);return t?t[0]:""};return i(e.origin||e.originalEvent.origin||"").toLowerCase()===i(t).toLowerCase()};o.Uid={generate:function(){var e=parseInt("zzzzzz",36),t=function(){return Math.floor(Math.random()*e).toString(36)};return t()+t()}};var f=function(){},p=!1;try{p=localStorage&&localStorage.InvibesDEBUG}catch(e){}var g,m=p?e.console:{info:f,error:f,log:f,warn:f,debug:f};p&&m.info("IV DEBUG ON."),o.getCookie=function(e){var t,i,o,r=n.cookie.split(";");for(t=0;t<r.length;t++)if(i=r[t].substr(0,r[t].indexOf("=")),o=r[t].substr(r[t].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))===e)return unescape(o)},o.setCookie=function(e,t,i,r){var a="ivNoCookie"==e||"IvbsCampIdsLocal"==e;if(!(o.noCookies&&!a&&(i||0)>=0)){i>365&&(i=365),r=r||g;var s=new Date,d=24*i*60*60*1e3;s.setTime(s.getTime()+d);var c=t+(i?"; expires="+s.toUTCString():"");c+=";domain="+r+";path=/",n.cookie=e+"="+c}},o.deleteLocalCookies=function(){"IvbsCampIdsLocal|VSVASuspended|ivNotCD|VsLLocal|ivbss|ivbsdid|ivBlk|ivOptIn|ivvbks".split("|").forEach(function(e){o.setCookie(e,"",-1)})};var h,y=function(e){if(!o.dom){var t,i,n={cname:"ivbsdid",load:function(){var e=o.getCookie(this.cname)||"";try{return JSON.parse(e)}catch(e){}},save:function(e){o.setCookie(this.cname,JSON.stringify(e),365)}},r=(e=e||{}).persistence||n;(t=r.load()||{id:o.Uid.generate(),cr:(new Date).getTime(),hc:1}).id.match(/\./)&&(t.id=o.Uid.generate());var a=function(){o.dom={id:!t.cr&&o.optIn>0?t.id:void 0,tempId:o.optIn>0?t.id:void 0,graduate:i}};i=function(){t.cr&&(delete t.cr,delete t.hc,r.save(t),a())},t.cr&&!e.noVisit&&(t.hc<7&&t.hc++,t.hc>=7&&function(e){if(!e.cr)return!1;if(e.cr<151e10)return!1;return(new Date).getTime()-e.cr>864e5}(t)&&i()),r.save(t),a(),m.info("Did="+o.dom.id)}};g=function(){var e=o.Uid.generate(),t=location.hostname.split(".");if(1===t.length)return location.hostname;for(var i=t.length-1;i>=0;i--){var n="."+t.slice(i).join(".");if(o.setCookie(e,e,1,n),o.getCookie(e)===e)return o.setCookie(e,e,-1,n),n}}(),m.info("cd:"+g),o.noCookies=o.getCookie("ivNoCookie"),o.optIn=parseInt(o.getCookie("ivOptIn"))||0,null!=e.__cmp&&e.__cmp("getVendorConsents",[436],function(e){null!=e&&(!e.gdprApplies||e.hasGlobalConsent||function(e){if(null==e.vendorConsents||1!=e.vendorConsents[436])return 0===o.optIn&&(o.optIn=-2),!1;for(var t=0;t<5&&t<e.purposeConsents.length;t++)if(1!=e.purposeConsents[t])return!1;return!0}(e))&&(o.noCookies=0,o.setCookie("ivNoCookie",0,-1),1!==o.optIn&&(o.optIn=2,o.setCookie("ivOptIn",3,.007)),y())});var b=0,k=function(t){if(!t.length)return m.log("Blocker NOT detected."),void o.setCookie("ivBlk","n",1);var i=o.getCookie("ivBlk");if(i)return m.log("Blocker test: "+i),void(h="y"===i);var n=t.shift();m.log("Testing... "+n),o.pixel(n,{xyzNoCache:Math.floor(1e12*Math.random()).toString(36)}).then(function(){e.setTimeout(function(){k(t)},1e3)},function(){m.log("Blocker detected! "+n),++b>=3?(h=!0,o.setCookie("ivBlk","y",1)):e.setTimeout(function(){k(t)},2e3)})};k(["https://stats.g.doubleclick.net/r/collect","https://www.google-analytics.com/collect","https://pixel.adsafeprotected.com/","https://cisco.sc.omtrdc.net/b/ss/cisco-complete/1/JS-2.6.0/s22097838216706","https://bvt.r66net.com/1x1.gif","https://box.r66net.com/1x1.gif","https://video.r66net.com/1x1.gif","https://kwebstat.videostep.com/stat/pixel","https://paid.invibes.com/Redir/Pixel"]);var E=Event;navigator.userAgent.match(/MSIE |Trident/i)&&((E=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=n.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}).prototype=e.Event.prototype),o.setAttr=function(e,t){if(e)if(e instanceof Array)e.forEach(function(e){e instanceof Array&&o.setAttr.apply(o,e)});else{if(m.info("%cOPT: "+e+" = %c"+t,"color:#44f;","color:#494"),"noCookies"===e)return o.setCookie("ivNoCookie",1,365),void(o.noCookies=1);if("forget"===e)return o.deleteLocalCookies(),D.clear(f),void(o.dom.id&&o.sendStatwebStats(11003,o.dom.id));if("opt-in"===e)return o.setCookie("ivOptIn",1,365),o.setCookie("ivNoCookie",0,-1),o.optIn=1,void(o.noCookies=0);if("opt-out"===e)return o.setCookie("ivOptIn",0,-1),void(o.optIn=0);if("login"===e){if(o.optIn<=0)return;if(!(t&&t.id&&t.pid))return;var i={i:t.id,p:t.pid};return void o.sendStatwebStats(11002,JSON.stringify(i))}}},e.dispatchEvent(new E("ivbsinit"));var C=o.testConfiguration||{};Object.keys(r).forEach(function(e){r.hasOwnProperty(e)&&C[e]&&(r[e]=C[e])}),o.uwebDomain=r.uwebDomain;var w="VSVASuspended";o.headerHeight=o.headerHeight||0,o.footerHeight=o.footerHeight||0,Array.prototype.findIndex||(Array.prototype.findIndex=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return t}),ge(o),y(),o.visitId=o.visitId||l();o.setCookie("ivbss",o.getCookie("ivbss")||l());var A,I;if(null==o.bidResponse)(new function(){var t=Math.floor((new Date).getTime()/864e5),i=function(){var e,i,n=(e=o.getCookie("ivvbks")||"",i={},e.split("|").forEach(function(e){var n=e.split("."),o=parseInt(n[0],10);!isNaN(o)&&o+3>t&&(n[1]||"").split(",").forEach(function(e){i[e]=o})}),i),r=[];if(Object.keys(a).forEach(function(e){!a.hasOwnProperty(e)||n[e]||a[e].indexOf(g)>=0||r.push({idx:e,url:a[e]})}),r.length){var s,d=(s=r)[Math.floor(Math.random()*s.length)];return n[d.idx]=t,function(e){var t={};Object.keys(e).forEach(function(i){if(e.hasOwnProperty(i)){var n=e[i];t[n]=t[n]||[],t[n].push(i)}});var i=Object.keys(t).filter(function(e){return t.hasOwnProperty(e)}).map(function(e){return e+"."+t[e].join(",")}).join("|");o.setCookie("ivvbks",i,3)}(n),d.url}m.warn("No BK available")},r=function(t){var i,o;m.log("BK start:"+t);var r=function(e){var t=n.createElement("iframe");return t.src=e,t.style.width=0,t.style.height=0,t.frameBorder=0,n.body.appendChild(t),t}(t),a=function(){r&&(e.removeEventListener("message",o),r.parentElement.removeChild(r),r=null)},s=new Promise(function(n){e.setTimeout(function(){i||m.warn("BK timeout: "+t),a(),n()},3e3)}),d=new Promise(function(n){o=function(e){e.data.ivbxx&&(i=1,a(),n(e.data.id),m.info("BK OK: "+t))},e.addEventListener("message",o)});return Promise.race([s,d])},s=function(t,n){if(g&&!o.noCookies&&!(o.optIn<=0)){var a=i();a&&r(a).then(function(i){i&&(o.dom.graduate(),o.sendStatwebStats(11001,o.dom.id+"."+i)),t>1&&e.setTimeout(function(){s(t-1,n)},n)})}};this.run=s}).run(3,1e3);o.visibilityAPI=(I="",void 0!==n.hidden?(A="hidden",I="visibilitychange"):void 0!==n.mozHidden?(A="mozHidden",I="mozvisibilitychange"):void 0!==n.msHidden?(A="msHidden",I="msvisibilitychange"):void 0!==n.webkitHidden&&(A="webkitHidden",I="webkitvisibilitychange"),{eventName:I,isVisible:function(){return!n[A]}}),function(){o.handlers=o.handlers||[],o.trySetStatus=function(e){var t=!0;if(this.statusCode!==e.code){switch(e.code){case 0:1===this.statusCode&&(t=!1);break;case-1:void 0!==this.statusCode&&(t=!1);break;case 1:0!==this.statusCode&&1!==this.statusCode||(t=!1)}t?(m.info("IvStatus changed from ["+this.statusCode+"] to ["+e.code+"]."),this.statusCode=e.code,this.handlers.forEach(function(t){"function"==typeof t&&t.call(e)})):m.log("Warning: Trying to change status from ["+this.statusCode+"] to ["+e.code+"].")}};var e=o.localize=function(e){return this.localize.currentDict[e]||e};e.dictionaries={en:{close:"Close",loading:"Loading... Please wait",suspend:"Hide this Ad",about:"About Invibes advertising",aboutCookies:"About cookies",cookieDescription:"We may transmit one or more cookies, small text files containing alphanumeric characters that uniquely identify the web browser. This is used to track your usage patterns on our affiliate websites in a non-personally identifiable manner.",clearCookies:"Click here to delete all your cookie history",cookiesDeleted:"Your cookie history will be deleted.",cookiePolicy:"Read more about our Terms"},fr:{close:"Fermer",loading:"Chargement en cours, merci de patienter...",suspend:"Masquer cette publicité",about:"À propos de Invibes advertising",aboutCookies:"À propos des cookies",cookieDescription:"Nous pouvons transmettre un ou plusieurs cookies sous forme de petits fichiers texte contenant des caractères alphanumériques qui identifient votre navigateur Internet.  Ils sont utilisés pour suivre des habitudes d’utilisation sur nos sites partenaires, de manière non personnellement identifiable.",clearCookies:"Cliquer ici pour supprimer vos cookies",cookiesDeleted:"Votre historique de cookies sera supprimé.",cookiePolicy:"Lire notre politique sur les cookies"},de:{close:"Schliessen",loading:"Laden... Bitte warten",suspend:"Diese Werbung ausblenden",about:"Über Invibes advertising",aboutCookies:"Über Cookies",cookieDescription:"Wir können ein oder mehrere Cookies, kleine Textdateien mit alphanumerischen Zeichen übertragen, die einmalig den Web-Browser identifizieren. Dies wird verwendet, um Ihr Internetnutzungsverhalten auf unserer Partner-Websites in einer nicht-personenbezogene Weise zu verfolgen.",clearCookies:"Hier klicken, um alle Cookies zu löschen",cookiesDeleted:"Die Cookies werden gelöscht werden.",cookiePolicy:"Mehr lesen über die AGB"},es:{close:"Cerrar",loading:"Cargando... por favor, espere",suspend:"Oculta este anuncio",about:"Sobre Invibes advertising",aboutCookies:"Sobre las cookies",cookieDescription:"Podemos transmitir una o más cookies, pequeños archivos de texto que contienen caracteres alfanuméricos que identifican el navegador web. Esto se utiliza para realizar un seguimiento de los patrones de uso de los sitios de afiliados de forma no personal.",clearCookies:"Haga click aquí para borrar todo su historial de cookies",cookiesDeleted:"Su historial de cookies se va a borrar.",cookiePolicy:"Más información sobre nuestros términos"},ru:{close:"Закрыть",loading:"Загрузка... Пожалуйста, ожидайте",suspend:"Скрыть это объявление",about:"Об Invibes",aboutCookies:"О Cookies",cookieDescription:"Мы можем передавать один и более cookies, небольшие текстовые файлы, содержащие наборы символов для уникальной идентификации веб браузером. Это используется для того, чтобы отслеживать посещение сайтов наших партнеров, без использования персональных данных.",clearCookies:"Нажмите здесь, чтобы очистить историю cookie",cookiesDeleted:"Ваша история cookie очищена.",cookiePolicy:"Узнать больше о нашей Политике Безопасности"},it:{close:"Chiudi",loading:"Attendere... Caricamento in corso",suspend:"Nascondi questo annuncio",about:"A proposito di Invibes advertising",aboutCookies:"A proposito di cookies",cookieDescription:"Questo sito utilizza i cookie per migliorare servizi ed esperienza dei lettori ed inviare pubblicità. Se decidi di continuare la navigazione consideriamo che accetti il loro uso.",clearCookies:"Clicca qui per cancellare tutta la cronologia dei cookie",cookiesDeleted:"La vostra storia cookie viene cancellata.",cookiePolicy:"Leggere di più sui nostri Termini"},nl:{close:"Sluiten",loading:"Laden... Ogenblik aub",suspend:"Verberg deze reklame",about:"Over Invibes advertising",aboutCookies:"Cookies beleid",cookieDescription:"We kunnen mogelijks één of meerdere cookies doorsturen. Dit zijn kleine text files met alpha numerieke waarden die uw browser uniek identificeren. Deze worden gebruikt om de gewoonten van gebruikers op te volgen op onze partner websites, op een niet-identificeerbare en onpersoonlijke wijze.",clearCookies:"Verwijder mijn cookie geschiedenis",cookiesDeleted:"Uw cookie geschiedenis zal worden verwijderd.",cookiePolicy:"Lees onze gebruikersvoorwaarden"},pt:{close:"Fechar",loading:"Carregando... Favor aguardar",suspend:"Esconder este anuncio",about:"Sobre Invibes Advertising",aboutCookies:"Sobre cookies",cookieDescription:"Poderemos transferir um ou mais cookies, pequenos arquivos de texto contendo caracteres alfa-numéricos que identificam o web browser de forma única. Isto é usado para registrar seu padrão de uso em websites afiliados, de maneira anônima e não identificável.",clearCookies:"Clique aqui para apagar todo seu histórico de cookies",cookiesDeleted:"Seu histórico de cookies será apagado.",cookiePolicy:"Leia mais sobre nossos Termos"}},e.defaultDict=e.dictionaries.en,e.usingLanguage=function(e){e&&(this.currentLanguage=e.toLowerCase(),this.currentDict=this.dictionaries[this.currentLanguage]||this.defaultDict)},e.usingLanguage("en"),o.localizeDom=function(e){"string"==typeof e&&(e=n.getElementById(e)),e=e||n.body;var t=e.querySelectorAll("[data-res-id]");Array.prototype.forEach.call(t,function(e){var t=e.getAttribute("data-res-id");e.textContent=o.localize(t)})}}(),e.addEventListener("scroll",function(){o.dispatchEvent("scroll"),o.dispatchEvent("scrollresize")}),e.addEventListener("resize",function(){o.dispatchEvent("scrollresize")}),o.getClientVerticalVisibilityPercent=function(t){if(t.forcedVisibilityPercent)return t.forcedVisibilityPercent;var i=t.getBoundingClientRect(),n=Math.max(o.headerHeight,i.top),r=Math.min(e.innerHeight-o.footerHeight,i.bottom);return i.height<1?0:Math.max(0,Math.round(100*(r-n)/i.height))};var L,T,S,P,V,D=(L=[o.uwebDomain],T=!o.getCookie("ivNotCD"),S=L.map(function(e){var t,i={};return i.get=function(i,n){if(!T)return m.info("Not CD..."),void i({});var r=e+"/GetIvId";o.dom.id&&(r=d(r,"k",1)),n&&(r=d(r,"idToSet",n)),o.jsonp(r,function(e){e.mustRetry?(m.log("retrying..."),r=d(r,"retry",1),o.jsonp(r,function(e){e.notCD&&(m.warn("Set as not CD!"),T=!1,o.setCookie("ivNotCD","y",365)),t=e.id,i(e)})):(t=e.id,i(e))})},i.set=function(e,n){n&&t===n?e({}):i.get(e,n)},i.clear=function(t){o.jsonp(e+"/NoIvId",t)},i}),{detectUserId:function(t){if(o.noCookies||o.optIn<=0)t&&t();else if(e.ivbsIdLess)t();else{var i=!1;e.setTimeout(function(){i||(m.warn("Cookie mechanism timeout/error."),t())},1e3),P.getId(function(e){i=!0,o.id=e.id,e.k&&o.dom.graduate(),m.info("CDid="+o.id),t()})}},clear:(P={getId:function(e){var t=0,i=function(){var n=S[t];n?n.get(function(n){n.id?(e(n),S.forEach(function(e){e.set(f,n.id)})):(t++,i())}):e({})};i()},clear:function(e){delete o.id;var t=S.length,i=function(){0==--t&&e()};S.forEach(function(e){e.clear(i)})}}).clear}),x=new function(e){(e=e||{}).getTime=e.getTime||function(){return(new Date).getTime()};var t=function(){try{return JSON.parse(localStorage.getItem("ivvcap"))||{}}catch(e){return{}}},i=function(e){try{localStorage.setItem("ivvcap",JSON.stringify(e))}catch(e){}};this.registerView=function(n,o){var r,a=t(),s=a[n]||[0,e.getTime()+(r=o,3600*r*1e3)];a[n]=[s[0]+1,s[1]],i(a)},this.getCappedCampaigns=function(){!function(){var n=e.getTime(),o=t(),r=!1;Object.keys(o).forEach(function(e){o[e][1]<=n&&(delete o[e],r=!0)}),r&&i(o)}();var n=t();return Object.keys(n).filter(function(e){return n.hasOwnProperty(e)}).sort().map(function(e){return[e,n[e][0]]})},this.getCappedCampaignsAsString=function(){return this.getCappedCampaigns().map(function(e){return e.join("=")}).join(",")}},R=function(e){var t=e.ViewCapping;t&&x.registerView(t.C,t.T)},B=function(e){var t=e.shift();t&&(t.parent.appendChild(t.script),t.script.src?t.script.onload=function(){B(e)}:B(e))},z=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},O=function(e,t){e.classList?e.classList.toggle(t):function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}(e,t)?z(e,t):function(e,t){e.classList?e.classList.add(t):e.className+=" "+t}(e,t)},U=function(e){e.style.display="block"},M=!1,H=function(i,a,s){var d,c='<div id="ivPopupContainer"> <div id="ivPopup">  <div class="fermer"> <div id="resize-btn"> <img class="max-btn" src="//static.r66net.com/Content/Images/maximizev8.png" /> <img class="min-btn" src="//static.r66net.com/Content/Images/minimizev8.png" /> </div> <div id="fermer-btn"> <img src="//static.r66net.com/Content/Images/closev8.png" /> </div> <div id="fermer-msg"> <p>'+o.localize("loading")+'</p> </div> </div> <div id="sewebContainer" class="nonInbound"> <iframe id="ivFrame" frameborder="0"></iframe> </div> </div> </div>',l='<div id="ivPopupContainer"> <div id="ivPopup"> <div class="fermer"> <div id="fermer-btn"> <img src="//static.r66net.com/Content/Images/closev8.png" /> </div> <div id="fermer-msg"> <p>'+o.localize("loading")+'</p> </div> </div> <div id="sewebContainer" class="nonInbound"> <iframe id="ivFrame" frameborder="0"></iframe> </div> </div> </div>',f=function(e){v(e,r.sewebUrl)&&("close"===e.data.command&&o.popup.close(),"toggleMax"===e.data.command&&o.popup.toggleMaximized())};d=a?'<div id="ivPopupContainer"> <div id="ivPopup"> <div id="sewebContainer"> <iframe id="ivFrame" frameborder="0"></iframe> </div> </div> </div>':i?c:l;var p=n.createElement("div");p.innerHTML=d,p.style.display="none",n.querySelector("body").appendChild(p);var g=n.getElementById("ivPopup");i&&!a&&n.getElementById("resize-btn").addEventListener("click",function(e){e.preventDefault(),o.popup.toggleMaximized()});a&&e.addEventListener("message",f,!1);var m={};return m.show=function(){var i=o.currentAd;if(n.querySelector("html").setAttribute("style","overflow: hidden !important"),n.querySelector("body").setAttribute("style","overflow: hidden !important"),o.vsSewebStartTime=(new Date).toISOString(),e.onbeforeunload=e.onpagehide=function(){return""},e.addEventListener("beforeunload",ye),e.addEventListener("pagehide",ye),U(p),!a){var s=n.getElementById("fermer-btn");s&&s.addEventListener("click",function(){o.popup.close()}),U(n.getElementById("fermer-msg")),t.window.setTimeout(function(){var e=n.getElementById("fermer-msg");e&&(e.style.display="none")},5e3)}var d=r.sewebUrl+"/V8/Overlay/?bvExposedId="+i.VideoExposedId+"&t="+i.Token+"&lid="+o.dom.id+"&lang="+o.localize.currentLanguage;i.CustomInfo&&(d+="&addinf="+i.CustomInfo),i.InvoiceOnBoxOpen&&(d+="&ib=1"),void 0!==o.slideIndex&&(d+="&si="+o.slideIndex),o.extraSewebParams&&(d+="&"+u(o.extraSewebParams));var c=function(){if(o.currentAd.CampaignGeoTag&&o.currentAd.CampaignGeoTag.TagReplacements){var e={},t=o.currentAd.CampaignGeoTag.TagsNotSentToSeweb||[],i=o.currentAd.CampaignGeoTag.TagReplacements;for(var n in i)i.hasOwnProperty(n)&&-1===t.indexOf(n)&&(e[n]=i[n]);return JSON.stringify(e)}}();c&&(d+="&GeoTagContent="+encodeURIComponent(c)),n.getElementById("ivFrame").setAttribute("src",d)},m.close=function(){a&&e.removeEventListener("message",f);var t=n.getElementById("ivPopupContainer").parentElement;n.getElementById("ivFrame").src="about:blank",setTimeout(function(){t.parentElement.removeChild(t)},0),setTimeout(function(){ye(!0)},0),n.querySelector("html").setAttribute("style",""),n.querySelector("body").setAttribute("style",""),o.dispatchEvent("afterEngagement",o.videoAdContentResult)},m.toggleMaximized=i?function(){O(g,"maximize")}:function(){},i&&s&&m.toggleMaximized(),m},j=o.sendStatwebStats=function(e,t,i){var a=r.statwebUrl+"/statPixel?location="+encodeURIComponent(s());n.referrer&&(a+="&referrer="+encodeURIComponent(n.referrer.substring(0,300).split(/[?#]/)[0])),o.dom.id&&(a+="&lId="+o.dom.id),a+="&optIn="+o.optIn,a+="&actionType="+e,t=t||o.visitId+"|"+o.optIn,a+="&additionalInfo="+encodeURIComponent(t),o.id&&(a+="&cookie="+encodeURIComponent(o.id)),i&&(a+="&rfc="+i),a+="&ts="+(new Date).getTime()+l(),o.pixel(a)},N=null,F=!1;o.clickSentPromise=new Promise(function(e){V=e});var q,_=o.sendClickStats=function(e,t){if(!o.adClickSent){o.adClickSent=1;var i=o.currentAd,n=i.CampaignGeoTag?i.CampaignGeoTag.ApiKeyInfo:null;t&&(n+="|"+t);var a=u({bvToken:i.Token,ivbsCampIdsLocal:o.getCookie("IvbsCampIdsLocal"),exposedId:"VideoExposedId="+i.VideoExposedId,location:s(),additionalInfo:n,optIn:o.optIn}),d=r.kwebstatUrl+"/Stat/RegisterAdClickStat?"+a;o.jsonp(d,function(t){t.campIds&&o.setCookie("IvbsCampIdsLocal",t.campIds,365),V(),e&&e()})}},W=[],G=o.sendUserVideoEventId=function(e,t,i){var n;if(o.videoAdContentResult){var a=i||o.currentAd;(n=a&&a.Token?{bvToken:a.Token,additionalInfo:t}:{pageId:o.videoAdContentResult.PageId,publisherUrlId:o.videoAdContentResult.PublisherUrlId,userCookieId:o.id,zone:o.videoAdContentResult.Zone,vId:o.visitId,additionalInfo:t}).eventType=e,1050!==e&&1052!==e||(n.location=s()),o.jsonp(r.kwebstatUrl+"/Stat/RegisterUserVideoEvent?"+u(n))}else W.push([e,t])};o.createOutgoingLink=function(e){var t=o.currentAd,i=t.Token,n=e.replace(/\[[^\]]*(timestamp|cache)[^\]]*\]/gi,(new Date).getTime());o.utm&&(n+=o.utm);var a=r.ewebUrl+"/redir/?t="+i+"&to="+encodeURIComponent(n);return t.CampaignGeoTag&&t.CampaignGeoTag.ApiKeyInfo&&(a+="&c="+t.CampaignGeoTag.ApiKeyInfo),a};var X=function(e){o.outgoingClicked=1,o.handleAdClick&&o.handleAdClick(),o.sendClickStats&&o.sendClickStats(),1===o.vpaidClickedThrough&&e.preventDefault()},Q=function(e,t){if(e){var i=t||e.getAttribute("outgoing-href");if(i){var n=o.createOutgoingLink(i);e.setAttribute("href",i),e.setAttribute("onmousedown",'this.href="'+n+'"'),e.setAttribute("ontouchstart",'this.href="'+n+'"'),e.removeEventListener("click",X),e.addEventListener("click",X)}}};o.initializeAllOutgoingLinks=function(){var e=o.adDiv.querySelectorAll("a[outgoing-href]");(e=Array.prototype.slice.call(e)).forEach(function(e){Q(e)})};e.addEventListener("message",function(e){v(e,r.sewebUrl)&&o.dispatchEvent("messageFromPopup",e)},!1);var Y=function(t){var i,n={},r=[],a=function(e){Object.keys(n).filter(function(t){return t<=e}).forEach(function(e){n[e].disable(),delete n[e]})},s=function(){if(r.length){var e=r[r.length-1];t.onCheckpointReached.call(null,e),r=[]}},d=function(){var d,c=o.getClientVerticalVisibilityPercent(t.target);if(Object.keys(n).forEach(function(e){var t=n[e];t.update(c),t.done&&(d=e)}),d>-1){var l=parseInt(d,10);i&&e.clearTimeout(i),a(d),t.debounceRate>0&&Object.keys(n).length>0?(r.push(l),i=e.setTimeout(s,t.debounceRate)):t.onCheckpointReached.call(null,l)}};return t.checkpoints.sort().forEach(function(i){n[i]=new function(t,i,n){var o,r=0,a=0,s=(new Date).getTime(),d=function(){o&&e.clearTimeout(o)};return{update:function(c){if(d(),!this.done){var l=(new Date).getTime();if(a>=t){if((r+=l-s)>=i.duration)return void(this.done=1)}else i.continuous&&(r=0);if(c>=t){var u=i.duration-r;o=e.setTimeout(n,u)}s=l,a=c}},disable:function(){d()}}}(i,t,d)}),o.addEventListener("scrollresize",d),d(),{stop:function(){o.removeEventListener("scrollresize",d),a(101)}}},K=function(e){var t=function(){m.info("view"),o.viewed=!0,o.dispatchEvent("view"),function(e){if(R(o.currentAd),!o.adViewSent){o.adViewSent=1,e.querySelector("div.ivbsGeneral");var t=u({bvToken:o.currentAd.Token,exposedId:"VideoExposedId="+o.currentAd.VideoExposedId,location:s(),additionalInfo:o.currentAd.CampaignGeoTag?o.currentAd.CampaignGeoTag.ApiKeyInfo:null,optIn:o.optIn}),i=r.kwebstatUrl+"/Stat/RegisterAdViewStat?"+t;o.jsonp(i)}}(e)},i=N.MinPercentageForAdview||0,n=o.currentAd.MinPercentageForAdview||0,a=i>n?i:n;if(a){var d=function(){o.getClientVerticalVisibilityPercent(e)>=a&&(t(),o.removeEventListener("scrollresize",d))};o.addEventListener("scrollresize",d),d()}else t()},J=function(){o.hasScrolled=!0;var e=o.adDiv=o.adDiv||me();if(!e)return q(),j(-40,"NoVideoAdDivFound"),void ke();if(Ae(e))if(0!==o.statusCode){q(),o.adDisplayed=!0;var t,i=o.currentAd;e.getAttribute("id");i.HtmlString?(t=i.HtmlString,function(e,t){e.innerHTML=t;var i=e.querySelectorAll("script"),o=[];Array.prototype.forEach.call(i,function(e){var t=e.parentElement;t.removeChild(e);var i=n.createElement("script");"id|type|src|textContent".split("|").forEach(function(t){e[t]&&(i[t]=e[t])}),o.push({script:i,parent:t})}),B(o)}(e,t=Ce(t=o.currentAd.HasInspiredBy?function(e){var t='<link href="https://fonts.googleapis.com/css?family=Roboto:400,100,300,500|Open+Sans|Oswald:100,300,400,500" rel="stylesheet" type="text/css"><div style="font-size:10px;color:black; margin: 0 auto; line-height: normal; position: relative;"><div class="ivTrigger">'+o.videoAdContentResult.LocalizedAdvertiserTitle+'</div><span class="ivDropDown"><span onclick="invibes.hideAndSuspend();">'+o.localize("suspend")+'</span><span class="ivCookies">'+o.localize("aboutCookies")+'<div class="ivCookieInfo"><div><img src="//bvt.r66net.com/vi/options-arrow.png" /><p>'+o.localize("cookieDescription")+'</p><p class="ivClearCookiesConfirmation" style="display: none;">'+o.localize("cookiesDeleted")+'</p><a href="javascript:void(0);" class="ivClearCookiesLink">'+o.localize("clearCookies")+'</a><a target="_blank" href="http://www.invibes.com/terms.html">'+o.localize("cookiePolicy")+'</a></div></div></span><a target="_blank" href="http://www.invibes.com/">'+o.localize("about")+"</a></span></div>",i=e.indexOf(">")+1;return e=[e.slice(0,i),t,e.slice(i)].join("")}(t):function(e){var t={videoAdSuspend:"suspend",videoAdAbout:"about",aboutCookies:"aboutCookies",cookieDescription:"cookieDescription",clearCookies:"clearCookies",cookiePolicy:"cookiePolicy",cookiesDeleted:"cookiesDeleted"};return Object.keys(t).forEach(function(i){if(t.hasOwnProperty(i)){var n=new RegExp("\\["+i+"\\]","g"),r=o.localize(t[i]);e=e.replace(n,r)}}),e}(t)))):j(-40,"NoHtmlString|VideoExposedId="+i.VideoExposedId);var a,s=e.querySelector("div[id^='divMosaic+']");s&&(Y({target:o.adDiv,duration:1e3,debounceRate:700,checkpoints:[35,50,75],onCheckpointReached:function(e){var t;o.maxv1s=e,o.dispatchEvent("visiCheckpoint",e),t={cookieId:o.id,pageId:o.vsPageId,bvToken:i.Token,userDeviceType:N.UserDeviceType,visibilityPercentCheckpoint:e},o.jsonp(r.kwebstatUrl+"/Stat/RegisterAdVisibility?"+u(t))}}),function(e){var t=!1,i=e.querySelector(".ivTrigger"),n=e.querySelector(".ivDropDown"),r=e.querySelector(".ivCookies"),a=e.querySelector(".ivCookieInfo"),s=e.querySelector(".ivClearCookiesLink"),d=e.querySelector(".ivClearCookiesConfirmation");i&&n&&(i.addEventListener("click",function(){O(i,"active"),a&&z(a,"active"),t=!t,n.style.display=t?"block":"none"}),r&&(r.addEventListener("click",function(){O(a,"active")}),s.addEventListener("click",function(e){e.cancelBubble=!0,s.parentNode.removeChild(s),o.noCookies=1,o.optIn=0,o.setCookie("ivNoCookie",1,365),o.deleteLocalCookies(),D.clear(function(){d.style.display=""}),o.dom.id&&o.sendStatwebStats(11003,o.dom.id)})))}(s),o.currentAd.HasInspiredBy&&function(e){var t=n.createElement("div");t.innerHTML='<div id="ivbsFooter" class="ivbsIdentity" style=" margin: 0 auto;text-align: right;color: #555;font-size: 11px;letter-spacing: 0.8px;line-height: 14px;padding: 5px 0;font-family: \'Oswald\',san-serif;font-weight: 400;" >Inspired by<a title="Invibes advertising" target="_blank" href="http://www.invibes.com"><img style="height: 16px;margin-right: 0;margin-top: 0;float:right;margin-left: 4px;" src="//bvt.r66net.com/Images/logo-invibes-grey.svg"></a></div>',e.appendChild(t)}(s)),o.trySetStatus({code:1}),o.initializeAllOutgoingLinks(),a=o.adDiv.querySelectorAll('[data-role="clickTarget"]'),(a=Array.prototype.slice.call(a)).forEach(function(e){e.addEventListener("click",o.handleAdClick)}),function(){var e=o.currentAd.TrackingScript;if(e){e=Ce(e);var t=n.createElement("script");t.type="text/javascript",t.text=e,o.adDiv.appendChild(t)}}(),!o.vsSentVideoAdStats&&e.innerHTML.length&&(o.vsSentVideoAdStats=!0,K(e)),function(e){if(e.VisiDuration&&e.VisiPercent){var t={target:{percentage:e.VisiPercent,duration:e.VisiDuration}};e.VisiElementId&&(t.target.element=n.getElementById(e.VisiElementId)),m.info(["Starting Visi: ",t]),new o.Visi(t).start()}}(i),o.dispatchEvent("adRendered",o.videoAdContentResult)}else o.scrollTimeoutStatSent||(o.scrollTimeoutStatSent=!0,j(-45,Date.now()-o.videoAdResponseReceived))};q=function(){o.removeEventListener("scrollresize",J)};var Z=function(){var e=(o.currentAd.OverlayType||"").split("_"),t=e.indexOf("fixed")<0,i=e.indexOf("inbound")>=0,n=e.indexOf("maximized")>=0;return H(t,i,n)},$=function(e,i){var n=this;n.bidModel=e,n.ad=i,$.adDisplayed=!1,n.handleAdDisplay=function(e){switch(n.bidModel.BidVersion){case 0:o.continueAdDisplay=function(t){if(!$.adDisplayed){if($.adDisplayed=!0,null!=t)for(var i=t.ownerDocument.defaultView.frameElement;null!==i;)i.parentNode.insertBefore(t,i.nextSibling),i=i.ownerDocument.defaultView.frameElement;o.dispatchEvent("afterBidWin"),o.sendUserVideoEventId(4002,n.ad.BidPrice,n.ad),e(t)}},t.dispatchEvent(new E("ivbsReadyToDisplay"));break;case 1:if($.adDisplayed)return;$.adDisplayed=!0,o.dispatchEvent("afterBidWin"),o.sendUserVideoEventId(4002,n.ad.BidPrice,n.ad),e();break;default:m.logError("Bid Version "+n.bidModel.BidVersion+" is not known. Cannot display.")}}},ee=function(t,i,n){var r=e.location.href.match(/testcotargeting/i),a=function(s){s=s||0;var d=t.Ads[s];if(!d)return o.trySetStatus({code:0}),void n();var c=d.VideoExposedId,l=function(){null!=t.BidModel?new $(t.BidModel,d).handleAdDisplay(function(e){d.displayed=!0,m.log("Displaying: "+c),i(t,d,e)}):(d.displayed=!0,m.log("Displaying: "+c),i(t,d))},u=function(){return!!t.Ads[s+1]},v=function(){a(s+1)};if(d.CotargetingScript){if(o.testMode&&!r)return m.info("COT skipped (considered true): "+c+" (add &testCotargeting parameter in url to test cotargeting)"),void l();var f=function(e){try{return new Function(e)()}catch(e){}}(d.CotargetingScript);if(!f)return m.error("INVALID COT: "+c),o.sendUserVideoEventId(1112),void v();if(o.scrolledToAd&&u())return m.warn("Scrolled! No time for COT: "+c),o.sendUserVideoEventId(1113),void v();m.log("COT request: "+c),e.setTimeout(function(){d.displayed||d.refused||(m.warn("COT timeout "+c),d.refused="timeout",o.sendUserVideoEventId(1111),v())},25e3),o.addEventListener("scrollToAd",function e(){d.displayed||d.refused||u&&(d.refused="scroll",o.sendUserVideoEventId(1110),v(),m.warn("COT cancelled because of early scroll: "+c),o.removeEventListener("scrollToAd",e()))}),d.cotargetingStarted=(new Date).getTime(),f(function(e,t){var i=(new Date).getTime();d.elapsed=i-d.cotargetingStarted;var n={elapsed:d.elapsed,response:t,refuseReason:d.refused};if((d.elapsed<0||d.elapsed>6e5)&&(n.started=d.cotargetingStarted,n.ended=i),n=JSON.stringify(n),d.refused){var r=e?1102:1103;o.sendUserVideoEventId(r,n)}else m.info("COT response for "+c+": "+!!e),e?(o.sendUserVideoEventId(1100,n),l()):(o.sendUserVideoEventId(1101,n),d.refused="cot.no",v())})}else l()};this.displayAnAd=function(){t.Ads=t.Ads||[],a(0)}},te=function(){var e,t,i=function(){return e=function(){if(null==o.bidContainerId)return null;var e=null,t=!1;return t||(e=n.getElementById(o.bidContainerId)||n.getElementsByClassName(o.bidContainerId)[0],t=!0),e}()||e||me()},r=o.isTablet?1052:1050;t=function(){var e=i();e&&we(e)&&(o.removeEventListener("scrollresize",t),m.info("scrolled!"),o.scrolledToAd=!0,o.dispatchEvent("scrollToAd"),o.scrollToAdStatSent||(o.scrollToAdStatSent=!0,G(r)))},o.addEventListener("scrollresize",t),t()},ie=!1,ne=!1,oe=o.hide=function(){n.getElementById("divMosaic+"+o.videoAdContentResult.HtmlId).style.display="none"};o.hideAndSuspend=function(){oe(),o.jsonp(o.uwebDomain+"/SuspendVideoAdForADay"),o.setCookie(w,"1",1),j(49)},o.getGAParams=function(){var e=this.currentAd.GA;return void 0!==this.slideIndex&&(e+="_"+this.slideIndex),e};o.handleAdClick=function(){m.info("click"),o.clicked=!0,o.dispatchEvent("click"),_(),o.dispatchEvent("beforeEngagement",o.videoAdContentResult),o.customEngagement||o.outgoingClicked||o.popup.show(),oe()};var re,ae,se,de,ce,le=o.isTablet?901:900,ue=o.isTablet?904:903,ve=!1;if(o.handleAdSwipe=function(){G(ve?ue:le),o.dispatchEvent(ve?"firstSwipe":"swipe"),ve=!0},null==o.bidResponse){var fe=Promise.race([function(){var e=(new Date).getTime(),t=new Image;return t.src="//static.r66net.com/Content/Images/loading-black.gif",new Promise(function(i){t.addEventListener("load",function(){var t=(new Date).getTime();o.latency=t-e,m.log("Latency: "+o.latency),i()})})}(),(re=500,new Promise(function(t){e.setTimeout(function(){o.latency||(m.warn("Latency timed out after "+re+" ms."),t())},re)}))]),pe=new Promise(function(e){D.detectUserId(e)});Promise.all([fe,pe]).then(function(){Se()})}else ne||(ne=!0,Te(),Ie());(e.invibes=e.invibes||{}).InlinePlayer=function(){function e(e,t,i,n){function o(t){Boolean(e[i])===Boolean(n)&&t.stopImmediatePropagation(),delete e[i]}return e.addEventListener(t,o,!1),o}function t(e,t,i,n){function o(e){i[t]=e}n&&o(e[t]),Object.defineProperty(e,t,{get:function(){return i[t]},set:o})}var i="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,n=/iPhone|iPod|iPad/i.test(navigator.userAgent),o=i(),r=i(),a=i("nativeplay"),s=i("nativepause"),d=[];function c(e,t,i){(d.tue||0)+200<Date.now()&&(e[r]=!0,d.tue=Date.now()),i||(e.currentTime=t),d[++d.i%3]=100*t|0}function l(e){return e.driver.currentTime>=e.video.duration}function u(){var e=this[o];this.webkitDisplayingFullscreen?this[a]():("data:"!==e.driver.src&&e.driver.src!==this.src&&(c(this,0,!0),e.driver.src=this.src),this.paused&&(e.paused=!1,this.buffered.length||this.load(),e.driver.play(),e.updater.start(),this.dispatchEvent(new Event("play")),this.dispatchEvent(new Event("playing"))))}function v(e){var t=this[o];t.driver.pause(),t.updater.stop(),this.webkitDisplayingFullscreen&&this[s](),t.paused&&!e||(t.paused=!0,this.dispatchEvent(new Event("pause")),this.ended&&(this[r]=!0,this.dispatchEvent(new Event("ended"))))}function f(e,t){var i=e[o]={};i.paused=!0,i.hasAudio=!0,i.video=e,i.updater=new function(e){var t=void 0,i=void 0;function n(o){t=requestAnimationFrame(n),e(o-(i||o)),i=o}this.start=function(){t||n(0)},this.stop=function(){cancelAnimationFrame(t),t=null,i=0}}(function(e){this.video.readyState>=this.video.HAVE_FUTURE_DATA?(this.hasAudio||(this.driver.currentTime=this.video.currentTime+e*this.video.playbackRate/1e3,this.video.loop&&l(this)&&(this.driver.currentTime=0)),c(this.video,this.driver.currentTime)):this.video.networkState===this.video.NETWORK_IDLE&&this.video.load(),this.video.ended&&this.video.pause(!0)}.bind(i)),i.driver=function(e){var t=new Audio;return t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}(e),e.addEventListener("emptied",function(){var t=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==e.src&&(c(e,0,!0),i.driver.src=e.src,t?i.driver.play():i.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?i.driver.buffered.length||i.driver.load():(e.pause(),e[a]())}),e.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){d.indexOf(100*e.currentTime|0)<0&&(i.driver.currentTime=e.currentTime)})}function p(i,d,c){d=void 0===d||d,(c=void 0===c||c)&&!n||i[o]||(f(i),function(i){var n=i[o];i[a]=i.play,i[s]=i.pause,i.play=u,i.pause=v,t(i,"paused",n.driver),t(i,"muted",n.driver,!0),t(i,"playbackRate",n.driver,!0),t(i,"ended",n.driver),t(i,"loop",n.driver,!0),e(i,"seeking"),e(i,"seeked"),e(i,"timeupdate",r,!1),e(i,"ended",r,!1)}(i),i.classList.add("IIV"),!d&&i.autoplay&&i.play())}return d.i=0,p.isWhitelisted=n,function(e,t){t&&e.setAttribute("src",t);var i=null===e.getAttribute("muted");return n&&p(e,i),{videoElement:e,play:function(){return this.videoElement.play()},pause:function(){return this.videoElement.pause()},isPaused:function(){return this.videoElement.paused},isMuted:function(){return this.videoElement.muted},mute:function(){this.videoElement.muted=!0,this.videoElement.volume=0},unmute:function(){this.videoElement.muted=!1,this.videoElement.volume=1},toggleSound:function(){this.isMuted()?this.unmute():this.mute()}}}}(),(o.VideoQuartileReporter=function(e){(e=e||{}).tolerance=e.tolerance||3;var t=this,i=0;this.videoElement=e.videoElement,this.checkpoints=e.checkpoints||[0,25,50,75,99],e.report=e.report||function(t){o.sendUserVideoEventId(1300+t,e.videoElement.src)},this.handleTimerEvents=function(){var n=t.videoElement.currentTime,o=e.duration||parseInt(t.videoElement.getAttribute("data-qduration"))||t.videoElement.duration;if(!isNaN(o)){for(var r=Math.floor(100*n/o),a=-1,s=0;s<t.checkpoints.length;s++){var d=t.checkpoints[s];if(!(d<i)){if(d>=r+e.tolerance)break;a=s}}if(a>=0){var c=t.checkpoints[a];t.checkpoints.splice(a,1),e.report(c)}i=r}},this.videoElement.addEventListener("timeupdate",this.handleTimerEvents)}).prototype.destroy=function(){this.videoElement.removeEventListener("timeupdate",this.handleTimerEvents)},function(){var e=o.VastParser=function(e,t){this.url=e,this.config=t=t||{},t.mediaType=t.mediaType||"video/mp4",this.quartiles={},this.configErrors=[],this.vpaidConfig=vpaidConfig={},Object.keys(t).forEach(function(e){t.hasOwnProperty(e)&&(vpaidConfig[e]=t[e])}),this.vpaidConfig.mediaType="application/javascript"};e.prototype.initialize=function(e){var t=this,i=new XMLHttpRequest;i.addEventListener("load",function(i){t.__parseXmlConfig(i),e&&e()}),i.open("GET",this.url),i.send()};var t=function(e,t){var i={};["bitrate","width","height","type","apiFramework"].forEach(function(t){i[t]=e.getAttribute(t)}),i.src=e.textContent;var n=i.type===t.mediaType&&(!t.minBitrate||i.bitrate>=t.minBitrate)&&(!t.maxBitrate||i.bitrate<=t.maxBitrate);if("application/javascript"!==i.type||i.apiFramework&&"VPAID"===i.apiFramework.toUpperCase()||(n=!1),n)return i};e.prototype.__parseXmlConfig=function(e){var i=this,n=e.target.responseXML,r=n.querySelector("Impression");r&&(this.impressionUrl=r.textContent);var a=n.querySelector("ClickThrough");a&&(this.clickThroughUrl=a.textContent);var s=n.querySelectorAll("Creative Linear");if(0!==s.lenght){s.lenght>1&&o.logger.warn("VAST url="+this.url+": More than one creative found. Will only play the first!");var d=s[0],c=d.querySelectorAll("MediaFile");if(this.mediaFile=Array.prototype.reduce.call(c,function(e,n){return e||t(n,i.config)},null),this.vpaidFile=Array.prototype.reduce.call(c,function(e,n){return e||t(n,i.vpaidConfig)},null),this.mediaFile||this.vpaidFile||this.errors.push("No suitable Media Files or VPAID files found!"),this.vpaidFile){var l=d.querySelectorAll("AdParameters");l[0]&&(this.adParams=l[0].textContent)}var u={start:0,firstQuartile:25,midpoint:50,thirdQuartile:75,complete:99},v=d.querySelectorAll("Tracking");if(Array.prototype.forEach.call(v,function(e){var t=e.getAttribute("event"),n=u[t];void 0!==n&&(i.quartiles[n]=e.textContent)}),this.configErrors.length){var f="Error(s) parsing VAST url: "+this.url+"\n";f+=this.configErrors.join("\n"),o.logger.error(f)}}else this.configErrors.push("No Linear Creatives found!")}}(),o.Play=function(t){var i=this,r=t.video,a=r,s=o.currentAd.VideoCompletionTime;t.topMargin=t.topMargin||0,t.bottomMargin=t.bottomMargin||0,t.visiPercent=o.currentAd.MinVideoVisiPercentToPlay||0;var d=r.parentElement,c=!0,l=!1;r.volume=0;var u=[],v=function(e,t,i){e.addEventListener(t,i),u.push(function(){e.removeEventListener(t,i)})},f=function(){i.createVastQuartileReporter&&i.createVastQuartileReporter()};i.startRecordingQuartiles=function(){i.quartileReporter=new o.VideoQuartileReporter({videoElement:a,report:function(e){var i=t.id||a.getAttribute("data-ivVidId")||a.getAttribute("src");m.log(["QUARTILE",i,e]),o.sendUserVideoEventId(1300+e,"bv_"+i)}}),f(),i.quartilesStarted=!0};var p,g=function(e){e&&(new Image(1,1).src=e)};if(t.toggleMuteBtn){var h,y=t.toggleMuteBtn;this.unmute=function(){o.videoZoomed=!0,o.sendUserVideoEventId(h?3501:3500),h=!0,p.unmute(),y.classList.remove("ivbsToggleMute"),y.classList.add("ivbsToggleUnmute"),d.classList.add("ivFlashyMaxi"),"function"==typeof p.resize&&p.resize()},this.mute=function(){delete o.videoZoomed,p.mute(),y.classList.add("ivbsToggleMute"),y.classList.remove("ivbsToggleUnmute"),d.classList.remove("ivFlashyMaxi"),"function"==typeof p.resize&&p.resize()},y.classList.add("ivbsToggleMute"),v(y,"click",function(e){e.stopPropagation(),e.preventDefault(),p&&(o.videoZoomed?i.mute():i.unmute())}),o.visibilityAPI&&v(n,o.visibilityAPI.eventName,function(){o.visibilityAPI.isVisible()||i.mute()})}var b=t.vastUrl||t.vpaidUrl,k=!1,E=function(e){v(e,"timeupdate",function(){c&&(c=!1,m.debug("IPlay heated"),i.scrollResizeHandler()),e.currentTime>s&&!k&&(k=!0,o.sendUserVideoEventId(1e3))})};if(b){var C=this.vast=new o.VastParser(b);i.pending=!0,C.initialize(function(){if(i.pending=!1,t.vpaidUrl){r.volume=0,r.muted=!0,r.setAttribute("playsinline",""),c=!1;var e={video:r,fileSettings:C.vpaidFile,params:C.adParams,eventHandler:o.sendUserVideoEventId,vpaidHasRedirect:void 0!==t.vpaidHasRedirect&&t.vpaidHasRedirect,noLoop:t.noLoop,indexVideoOnFinish:t.indexVideoOnFinish};p=o.VPAIDPlayer(e),a=p.timedVideo,E(a)}else r.setAttribute("src",C.mediaFile.src),p=new o.InlinePlayer(r),t.noLoop||v(r,"ended",function(){r.currentTime=0,r.play()}),E(r);if(C.clickThroughUrl){if(t.vastRedirectLinkId){var s=n.getElementById(t.vastRedirectLinkId);s&&"A"===s.nodeName&&Q(s,C.clickThroughUrl)}if(t.vastRedirectLinkClass){var d=n.getElementsByClassName(t.vastRedirectLinkClass);if(null!=d&&d.length>0)for(var l=0;l<d.length;l++)d[l]&&"A"===d[l].nodeName&&Q(d[l],C.clickThroughUrl)}}var u=C.quartiles,m=Object.getOwnPropertyNames(u);i.createVastQuartileReporter=function(){i.vastQuartileReporter=new o.VideoQuartileReporter({videoElement:a,report:function(e){var t=u[e];t&&g(t)},checkpoints:m})},i.quartilesStarted&&(i.sendVastImpressionIfNecessary(),f()),w(),i.scrollResizeHandler()})}else p=new o.InlinePlayer(r),t.noLoop||v(r,"ended",function(){r.currentTime=0,r.play()}),E(r);this.sendVastImpressionIfNecessary=function(){this.vast&&this.vast.impressionUrl&&!this.vast.impressionSent&&(g(this.vast.impressionUrl),this.vast.impressionSent=!0)};var w=function(){var e=function(){var e=p.play();e&&e.then(function(){i.scrollResizeHandler()}).catch(function(e){m.error(e)})},n=t.vpaidUrl||r.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA;/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(n=!0),n?e():r.addEventListener("loadeddata",function t(){n=!0,i.scrollResizeHandler(),r.removeEventListener("loadeddata",t),e()})};i.pending||w();var A=function(){null!=p&&(i.quartilesStarted||i.startRecordingQuartiles(),i.sendVastImpressionIfNecessary(),p.isPaused()&&(m.debug("IPlay started"),p.play()))},I=function(){if(!i.pending&&!c){var n=function(){var i=r.getBoundingClientRect();if(i.height<1||i.width<1)return!1;if(r.forcedVisibilityPercent>=t.visiPercent)return!0;var n=Math.ceil((100-t.visiPercent)*i.height/100),a=o.headerHeight+t.topMargin-n,s=e.innerHeight-o.footerHeight-t.bottomMargin+n;return i.top>=a&&i.bottom<=s}();if(n&&(l=!0,A()),!p.isPaused()&&!n){if((t.forever||t.playOnView)&&l)return;p.isPaused()||(m.debug("IPlay paused"),p.pause())}}};if(this.scrollResizeHandler=function(){setTimeout(function(){I()},150),I()},o.addEventListener("scrollresize",this.scrollResizeHandler),e.addEventListener("touchend",this.scrollResizeHandler),this.scrollResizeHandler(),t.playOnView){var L=function(){l=!0,A()};o.viewed?L():o.addEventListener("view",L)}var T=function(){i.quartileReporter&&i.quartileReporter.destroy(),i.vastQuartileReporter&&i.vastQuartileReporter.destroy(),p.isPaused()||p.pause(),u.forEach(function(e){e()})};this.destroy=T,o.addEventListener("beforeEngagement",T)},o.PlayC=function(e){this.options=e;var t,i=e.buttonContainer.querySelectorAll("[data-ivvid-src]");i=Array.prototype.slice.call(i);var n=function(i,n){var r=i.getAttribute("data-ivvid-src"),a=i.getAttribute("data-ivvid-type"),s=i.getAttribute("data-ivvid-id");t&&t.destroy();var d,c,l=(d=e.playOptions,c={},Object.keys(d).filter(function(e){return d.hasOwnProperty(e)}).forEach(function(e){c[e]=d[e]}),c);l.video=e.videoEl,l.id=s,"vast"===a?l.vastUrl=r:e.videoEl.src=r,t=new o.Play(l),n&&"vast"!==a&&t.unmute()};this.start=function(){i.forEach(function(t){t.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation(),n(t,e.unmuteOnClick)})}),n(i[0])}},o.Visi=function(t){(t=t||{}).target=t.target||{},t.target.percentage=t.target.percentage||50,t.forcePercentage=t.forcePercentage||t.target.percentage,t.target.duration=t.target.duration||1e3,t.safetyMargin=t.safetyMargin||0;var i,r=0,a=!1,s=0,d=(new Date).getTime(),c=o.adDiv,l=t.target.element||c;c.style.transition="transform 0.01s ease-in-out";var u=function(){if(i=null,!t.target.met){var e=2===r||o.getClientVerticalVisibilityPercent(l)>=t.target.percentage,n=(new Date).getTime(),c=a&&e;if(c?s+=n-d:t.target.continuous&&(s=0),t.debug&&m.info({name:"Visi info",now:n,rollingDuration:s,wasVisible:a,isCurrentlyVisible:e}),c&&s>=t.target.duration)return m.info("Visibility target reached!"),t.target.met=!0,void b();e&&(i=setTimeout(u,t.target.duration)),a=e,d=n}},v=n.createElement("div");c.parentElement.insertBefore(v,c),v.style.display="none";var f=function(){var t=c.getBoundingClientRect();t.height<1?e.setTimeout(f,30):(v.style.width=t.width+"px",v.style.height=t.height+"px")};f();var p,g={},h=function(){if(!t.target.met&&(i||(i=setTimeout(u,100)),0===r)){var n=o.headerHeight,a=e.innerHeight-o.footerHeight,s=l.getBoundingClientRect(),d=s.height*t.forcePercentage/100+1,v=s.height-d,f=s.top+v,g=s.bottom-v,m=n-f>0,h=a-g<0;self.topWasVisible=self.topWasVisible||f>=n&&f<=a,self.bottomWasVisible=self.bottomWasVisible||g>=n&&g<=a,m&&self.topWasVisible?(p=!0,y()):h&&self.bottomWasVisible?(p=!1,y()):(r=0,c.style.transform="translateY(0px)")}},y=function(){r=2,v.style.display="block",c.classList.remove("ivVisiInTransition"),c.classList.add("ivVisiActive");var e,i=l.getBoundingClientRect(),n=i.height*(t.forcePercentage/100)+1,a=i.height-n,s=c.getBoundingClientRect(),d=i.top-s.top,u=s.bottom-i.bottom,f=d+a-o.headerHeight,m=u+a-o.footerHeight;g.transition=c.style.transition,g.position=c.style.position,g.width=c.style.width,g.height=c.style.height,g.left=c.style.left,g.top=c.style.top,g.bottom=c.style.bottom,c.style.transition="none",c.style.transform="translateY(0)",c.style.position="fixed",c.style.setProperty("width",s.width+"px","important"),c.style.height=s.height+"px",c.style.left=s.left+"px",p?(e=n+u,c.style.top=-f+"px"):(e=n+d,c.style.bottom=-m+"px"),c.forcedVisibilityPercent=100*e/s.height,c.forcedVisibilityPixels=e,l.forcedVisibilityPercent=t.forcePercentage,l.forcedVisibilityPixels=n,o.dispatchEvent("scrollresize")};c.addEventListener("transitionend",function(){t.target.met&&b()});var b=function(){if(2===r){delete c.forcedVisibilityPercent,delete c.forcedVisibilityPixels,delete l.forcedVisibilityPercent,delete l.forcedVisibilityPixels,r=3,c.classList.remove("ivVisiActive"),c.classList.add("ivVisiInTransition");var t=v.getBoundingClientRect().top,i=c.getBoundingClientRect().top-t;c.style.transition=g.transition,c.style.position=g.position,c.style.width=g.width,c.style.height=g.height,c.style.left=g.left,c.style.top=g.top,c.style.bottom=g.bottom,v.style.display="none",c.style.transition="none",c.style.transform="translateY("+i+"px)",e.setTimeout(function(){c.style.transition="transform 2s ease-in-out",c.style.transform="translateY(0px)",o.removeEventListener("scrollresize",h),c.addEventListener("transitionend",function e(t){r=0,c.classList.remove("ivVisiInTransition"),t.currentTarget.removeEventListener(t.type,e)})},30)}};return{start:function(){navigator.userAgent.match(/CriOS/i)?m.warn("Disabling Visi (Chrome on iOS)"):(o.addEventListener("scrollresize",h),u())}}},o.PanoramicPlay=function(t){var i,r=!0;null!=t.isAutoPlay&&(r=t.isAutoPlay);var a=o.currentAd.VideoCompletionTime,s=n.getElementById(t.video),d=new o.PanoramicPlayer(t,function(n){var c=this;n.volume=0,/iPhone|iPod|iPad/i.test(navigator.userAgent)||(i=new o.VideoQuartileReporter({videoElement:n,report:function(e){var i=t.id||n.getAttribute("data-ivVidId")||n.getAttribute("src");i="bv_"+i,o.sendUserVideoEventId(1300+e,i)}}));if(r){t.marginPercentage=t.marginPercentage||20;var l=n.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA;/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(l=!0),l||n.addEventListener("loadeddata",function e(){l=!0,c.scrollResizeHandler(),n.removeEventListener("loadeddata",e)});this.scrollResizeHandler=function(){if(!c.pending){var i,n,r,a,l,u,v=(i=e.innerHeight-o.headerHeight-o.footerHeight,n=i*t.marginPercentage/100,r=n,a=i-n,l=s.getBoundingClientRect(),u=(l.top+l.bottom)/2,r<=u&&a>=u);d.isPaused()&&v&&d.play(),d.isPaused()||v||d.pause()}},o.addEventListener("scrollresize",this.scrollResizeHandler),e.addEventListener("touchend",this.scrollResizeHandler),this.scrollResizeHandler()}else d.addEventListener("panoclick",function(){o.sendUserVideoEventId(943),d.isPaused()?d.play():d.pause()});var u=!1;n.addEventListener("timeupdate",function(){n.currentTime>a&&!u&&(u=!0,o.sendUserVideoEventId(1e3))}),o.addEventListener("beforeEngagement",function(){i&&i.destroy(),d.isPaused()||d.pause()})});d.addEventListener("panodrag",function(){l(),o.sendUserVideoEventId(941)}),d.addEventListener("panozoom",function(){o.sendUserVideoEventId(942)});var c=!1,l=function(){c||(o.sendUserVideoEventId(940),c=!0)};return{player:d}},o.PanoramicPlayer=function(e,t){e.krpanojs=e.krpanojs||r.krpanojs,e.gyrojs=e.gyrojs||r.gyrojs,e.videoplayerjs=e.videoplayerjs||r.videoplayerjs,e.followmousejs=e.followmousejs||r.followmousejs,e.viewH=e.viewH||0,e.viewV=e.viewV||0,e.zoom=e.zoom||130;var i,o,a=function(){var i,o,r='loadxml(\'<krpano> <action name="startup" autorun="onstart"> if(device.panovideosupport == true, loadscene(videopano);); </action> <scene name="videopano"> <control mouse="drag" touch="drag" zoomtocursor="false" zoomoutcursor="false" draginertia="0.1" dragfriction="0.9" movetoaccelerate="1.0" movetospeed="10.0" movetofriction="0.8" keybaccelerate="0.09" keybfriction="0.94" keybfovchange="0.25" mousefovchange="1.0" fovspeed="3.0" fovfriction="0.9" bouncinglimits="true" /> <cursors standard="default" dragging="move" moving="move" /> <krpano stagescale="calc:stagescale * 2" if="stagescale LT 1.0" devices="mobile" /><plugin name="followmouse" url="'+e.followmousejs+'" enabled="false" devices="desktop" videoelement="'+e.video+'" /> <plugin name="gyro" keep="true" url="'+e.gyrojs+'" devices="html5.and.touch" enabled="true" />',a='<view hlookat="'+e.viewH+'" vlookat="'+e.viewV+'" fovtype="DFOV" fov="'+e.zoom+'" fovmin="75" fovmax="150" distortion="0.0" />  </scene> </krpano>\')',s='<image> <sphere url="'+e.posterUrl+'" /> </image>',d='<plugin name="video" url.html5="'+e.videoplayerjs+'" pausedonstart="true" loop="true" volume="0" /> <image> <sphere url="plugin:video" /> </image>';(ae=n.getElementById("krpanoSWFObject")).style.display="none",e.audioUrl||e.videoUrl||e.webmUrl||!e.posterUrl?(i=r+d+a,o=function(){ae.set("events.onxmlcomplete",null);var i=ae.get("plugin[video]");i.onloaded=function(){var t=function(){var t="";return/iPhone|iPod|iPad/i.test(navigator.userAgent)?t=e.audioUrl:(e.videoUrl&&(t+=e.videoUrl),e.webmUrl&&(t.length>0&&(t+="|"),t+=e.webmUrl),t.length>0&&e.audioUrl&&(t+="|"+e.audioUrl)),t}();i.playvideo(t,e.posterUrl,!0,0)},i.onvideoready=function(){t(i.videoDOM),ae.style.display="block"},i.onvideoplay=function(){null!=e.playHandler&&e.playHandler()},i.onvideopaused=function(){null!=e.pausedHandler&&e.pausedHandler()}}):(i=r+s+a,o=function(){ae.set("events.onxmlcomplete",null),ae.style.display="block"}),ae.set("events.onxmlcomplete",o),ae.call(i)},s={play:function(){ae&&ae.call("plugin[video].play()")},pause:function(){ae&&ae.call("plugin[video].pause()")},isPaused:function(){var e=null;return ae&&(e=ae.get("plugin[video]").ispaused),e},setViewPos:function(e,t,i){ae&&(ae.call("lookat("+e+", "+t+")"),ae.call("zoomto("+i+")"))},getViewPos:function(){return ae?{viewH:ae.get("view.hlookat"),viewV:ae.get("view.vlookat"),zoom:ae.get("view.fov")}:null}};return ge(s),function(e,t){var i,n=[],o=[],r=!1,a=function(e){null!=e.pageX?o=[e.pageX,e.pageY]:e.touches&&e.touches.length>0&&(o=[e.touches[0].pageX,e.touches[0].pageY]),e.touches&&e.touches.length>1&&(r=!0),t.removeEventListener("mousemove",a),t.removeEventListener("touchmove",a)},s=function(i){null!=i.pageX?o=[i.pageX,i.pageY]:i.changedTouches&&i.changedTouches.length>0&&(o=[i.changedTouches[0].pageX,i.changedTouches[0].pageY]),0===o.length||n[0]===o[0]&&n[1]===o[1]?1==i.which&&e.dispatchEvent("panoclick"):r?e.dispatchEvent("panozoom"):e.dispatchEvent("panodrag"),t.removeEventListener("mouseup",s),t.removeEventListener("touchend",s)},d=function(e){n=[],o=[],r=!1,null!=e.pageX?n=[e.pageX,e.pageY]:e.touches&&e.touches.length>0&&(n=[e.touches[0].pageX,e.touches[0].pageY]),t.addEventListener("mousemove",a,!1),t.addEventListener("touchmove",a,!1),t.addEventListener("mouseup",s,!1),t.addEventListener("touchend",s,!1)};t.addEventListener("mousedown",d,!1),t.addEventListener("touchstart",d,!1);var c=function(){i&&clearTimeout(i),i=setTimeout(function(){e.dispatchEvent("panozoom")},500)};t.addEventListener("mousewheel",c,!1),t.addEventListener("DOMMouseScroll",c,!1)}(s,(i=n.getElementById(e.video),(o=n.createElement("script")).src=e.krpanojs,o.onload=function(){embedpano({xml:null,target:e.video,html5:"only",mobilescale:1,passQueryParameters:!0,onready:a})},i.parentNode.insertBefore(o,i),i)),s},o.Reveal=function(t){var i="string"==typeof t.container?n.getElementById(t.container):t.container,r=!1,a=!1;v();var s=function(){a||(a=!0,e.requestAnimationFrame?requestAnimationFrame(function(){v()}):setTimeout(function(){v()},100))};e.addEventListener("scroll",s),e.addEventListener("resize",s);var d=i.querySelector(".cd-handle"),c=i.querySelector(".cd-resize-img"),l=i.querySelector('.cd-image-label[data-type="original"]'),u=i.querySelector('.cd-image-label[data-type="modified"]');function v(){i.getBoundingClientRect().top>0&&i.classList.add("is-visible"),a=!1}function f(e,t,i,n,o,a,s,d,c,l,u){var v=(e.pageX||e.touches[0].pageX)+i-n;v<o?v=o:v>a&&(v=a);var f=100*(v+n/2-s)/d;m();var p=f+"%";if(t&&t.classList.contains("draggable")){t.style.left=p;var g=function(){t.classList.remove("draggable"),c.classList.remove("resizable")};t.addEventListener("mouseup",g),t.addEventListener("touchend",g)}c&&c.classList.contains("resizable")&&(c.style.width=p),h(u,c,"left"),h(l,c,"right"),r=!1}!function(t,i,n,a,s){var d,c=function(){t.classList.remove("draggable"),i.classList.remove("resizable"),n.removeEventListener("mousemove",d),n.removeEventListener("touchmove",d)},l=function(l){t.classList.add("draggable"),i.classList.add("resizable");var u=t.getBoundingClientRect(),v=n.getBoundingClientRect(),p=l.pageX||l.touches[0].pageX,g=u.width,m=u.left+g-p,h=v.left,y=v.width,b=h-22,k=h+y-g+22;d=function(n){r||(r=!0,o.dispatchEvent("ivSliderDrag",this),e.requestAnimationFrame?requestAnimationFrame(function(){f(n,t,m,g,b,k,h,y,i,a,s)}):setTimeout(function(){f(n,t,m,g,b,k,h,y,i,a,s)},100))},n.addEventListener("mousemove",d),n.addEventListener("touchmove",d),n.addEventListener("mouseup",c),n.addEventListener("touchend",c),l.preventDefault()};t.addEventListener("mousedown",l),t.addEventListener("touchstart",l),t.addEventListener("mouseover",l),t.addEventListener("mouseup",c),t.addEventListener("touchend",c)}(d,c,i,l,u);var p,g=function(){o.dispatchEvent("ivSliderDragGesture",this)},m=function(){p&&e.clearTimeout(p),p=e.setTimeout(g,400)};function h(e,t,i){var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();("left"===i?n.right>=o.right:n.left<=o.right)?e.classList.add("is-hidden"):e.classList.remove("is-hidden")}},o.SwipeNSurf=function(t){var i=function(t){var i=o.createOutgoingLink(t);o.sendClickStats(f,"swipe");var n=o.clickSentPromise,r=new Promise(function(t){e.setTimeout(t,1e3)});Promise.race([n,r]).then(function(){e.location.assign(i)})};t.outgoingSlides&&t.swiper.on("slideChangeEnd",function(){o.handleAdSwipe();var e=t.outgoingSlides[t.swiper.realIndex];e&&(o.doNotHideAdOnClick=1,i(e),o.hide())}),t.lastSlideRedirect&&t.swiper.on("reachEnd",function(){t.swiper.on("touchMove",function(e){e.isEnd&&"next"==e.swipeDirection&&(o.doNotHideAdOnClick=1,i(t.lastSlideRedirect),o.hide())})})},o.videoCompletion=function(e){var t="string"==typeof e.el?n.getElementById(e.el):e.el;return new Promise(function(i){var n=function(){isNaN(t.duration)||(t.currentTime>=e.time||100*t.currentTime/t.duration>=e.percent)&&(m.log("Video target completed."),i(),t.removeEventListener("timeupdate",n))};t.addEventListener("timeupdate",n),t.addEventListener("videotargetchanged",function e(i){t.removeEventListener("timeupdate",n),t.removeEventListener("videotargetchanged",e),(t=i.newVideoTarget).addEventListener("timeupdate",n)})})},o.Sticky=function(t){var i=this,a=t.el;t.bottomMargin=t.bottomMargin||0,t.topMargin=t.topMargin||0;var s,d,c,l,u,v=function(){var t=n.createElement("div");t.style.display="none",t.classList.add("ivStickyPlaceholder");var i=function(){var n=a.getBoundingClientRect();n.height<1?e.setTimeout(i,50):(t.style.width=n.width+"px",t.style.height=n.height+"px")};return i(),a.parentElement.insertBefore(t,a),{hide:function(){t.style.display="none"},show:function(){t.style.display="block"},el:t}}(),f=new Promise(function(e){t.closeBtn&&t.closeBtn.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),i.dispatchEvent("clickClose"),e()})}),p=new Promise(function(e){i.close=e}),g=new Promise(function(){}),h=new Promise(function(e){o.addEventListener("beforeEngagement",e)}),y=Promise.race([t.endStickyPromise||g,f,h,p]),b=0,k={},E=a.querySelector("#ivbsVid"),C=function(){a.style.width=k.width,a.style.height=k.height,a.style.top=k.topheight,a.style.bottom=k.bottom,a.style.left=k.left,a.classList.remove("ivStuckTop"),a.classList.remove("ivStuckBottom"),t.noParentDetach||(a.parentElement.removeChild(a),v.el.parentElement.insertBefore(a,v.el)),E&&(delete E.forcedVisibilityPercent,delete E.forcedVisibilityPixels),delete a.forcedVisibilityPercent,delete a.forcedVisibilityPixels,d=c=!1},w=function(){a.classList.remove("ivStuckTop"),a.classList.remove("ivStuckBottom"),d=c=!1,k.width=a.style.width,k.height=a.style.height,k.top=a.style.top,k.bottom=a.style.bottom,k.left=a.style.left;var e=a.getBoundingClientRect();if(a.style.width=e.width+"px",a.style.height=e.height+"px",a.style.left=e.left+"px",E){var i=E.getBoundingClientRect();E.forcedVisibilityPercent=100,E.forcedVisibilityPixels=i.height}a.forcedVisibilityPercent=100,a.forcedVisibilityPixels=e.height,t.noParentDetach||(a.parentElement.removeChild(a),n.body.appendChild(a)),v.show()},A=function(){if(!(o.adDiv.getBoundingClientRect().height<1)){var n=(d||c?v.el:a).getBoundingClientRect(),r=n.top<=(t.topMargin||0)+o.headerHeight,u=n.top+n.height>=e.innerHeight-(t.bottomMargin||0)-o.footerHeight;s||r||u||(s=!0),(!r&&d||!u&&c)&&(v.hide(),C(),i.dispatchEvent("unstuck")),!s||!r||d||o.Sticky.noTop||o.videoZoomed&&t.noStickyOnZoom||(w(),a.style.top=t.topMargin+o.headerHeight+"px",a.classList.add("ivStuckTop"),d=!0,i.dispatchEvent("stuck",i,["top"])),!s||!u||c||o.Sticky.noBottom||o.videoZoomed&&t.noStickyOnZoom||(w(),a.style.bottom=t.bottomMargin+o.footerHeight+"px",a.style.top="",a.classList.add("ivStuckBottom"),c=!0,i.dispatchEvent("stuck",i,["bottom"])),!d&&!c||l||(l=!0,e.setTimeout(function(){a.classList.add("ivCanClose")},t.closeDelay))}};y.then(function(){o.removeEventListener("scrollresize",A),i.dispatchEvent("complete"),function(){if(d||c){i.dispatchEvent("unstuck"),v.hide();var t=a.getBoundingClientRect();C();var n=a.getBoundingClientRect(),r=t.left-n.left,s=t.top-n.top;a.style.transform="translateX("+r+"px)translateY("+s+"px)",e.setTimeout(function(){a.classList.add("ivAnimTrans"),e.setTimeout(function(){a.style.transform="",a.addEventListener("transitionend",function e(){o.dispatchEvent("scrollresize"),a.classList.remove("ivAnimTrans"),a.removeEventListener("transitionend",e)})},10)},10)}}()});this.start=function(){var n,a,s,d,c;o.currentAd.Sticky?(m.info("Sticky!"),o.addEventListener("scrollresize",A),A(),a=o.videoAdContentResult.StickyCFIDelay||t.cfiDuration||4e3,s=function(){i.removeEventListener("stuck",d),i.removeEventListener("unstuck",c),o.removeEventListener("click",c),o.jsonpWithParams(r.kwebstatUrl+"/bvr/cfi",{token:o.currentAd.Token}),i.dispatchEvent("cfi")},d=function(){if(!o.clicked){u=(new Date).getTime();var i=a-(t.cfiContinuous?0:b);n=e.setTimeout(s,i)}},c=function(){var t=(new Date).getTime();b+=t-u,n&&e.clearTimeout(n)},i.addEventListener("stuck",d),i.addEventListener("unstuck",c),o.addEventListener("click",c)):m.warn("No Sticky")},ge(this)},o.VPAIDPlayer=(se="2.0.0",de="normal",ce={INIT:1,LOADED:2,PLAYING:3,PAUSED:4,STOPPED:5,FAILED:6},function(e,t){var i,r=e.fileSettings,a=e.params,s=e.video,d=e.eventHandler,c=e.vpaidHasRedirect,l=!e.noLoop,u=e.indexVideoOnFinish;if(!r)throw"Invalid VPAID file";d=d||o.sendUserVideoEventId;var v,f,p=ce.INIT,g=r.id||s.getAttribute("data-ivVidId")||s.getAttribute("src");g="bv_"+g,v=function(e){var n=(i=e).handshakeVersion(se);if(n===se||0==se.indexOf(n)){i.subscribe(function(e){y("VPAID failure: "+e)},"AdError",this),i.subscribe(function(){m.log("VPAID AdLoaded"),p=ce.LOADED,null!=t&&t()},"AdLoaded",this),i.subscribe(function(){m.log("VPAID AdStarted"),p=ce.PLAYING,function(){if("function"==typeof i.getAdRemainingTime&&"function"==typeof i.getAdDuration){var e=new E("videotargetchanged");e.newVideoTarget=h,s.dispatchEvent(e);var t=function(e){setTimeout(function(){i.getAdRemainingTime;var n=i.getAdDuration(),o=i.getAdRemainingTime(),r=n-o;r=r>=0?r:0,h.currentTime=r,h.duration=n,e!==r&&h.dispatchEvent("timeupdate"),p!==ce.STOPPED&&p!==ce.FAILED&&t(r)},500)};t(i.getAdRemainingTime())}}()},"AdStarted",this),i.subscribe(function(){m.log("VPAID AdStopped"),p=ce.STOPPED,null!=u&&""!=u&&(s.style.zIndex=u,s.style.position="relative"),l&&(s.currentTime=0,s.play(),s.addEventListener("ended",function(){s.currentTime=0,s.play()}))},"AdStopped",this),i.subscribe(function(){m.log("VPAID AdPaused"),p=ce.PAUSED},"AdPaused",this),i.subscribe(function(){m.log("VPAID AdPlaying"),p=ce.PLAYING},"AdPlaying",this),i.subscribe(function(){d(3100,g)},"AdImpression",this),i.subscribe(function(){d(3101,g),c&&(o.vpaidClickedThrough=1)},"AdClickThru",this),i.subscribe(function(){d(3e3,g)},"AdVideoStart",this),i.subscribe(function(){d(3025,g)},"AdVideoFirstQuartile",this),i.subscribe(function(){d(3050,g)},"AdVideoMidpoint",this),i.subscribe(function(){d(3075,g)},"AdVideoThirdQuartile",this),i.subscribe(function(){d(3099,g)},"AdVideoComplete",this);var v={AdParameters:a},f={slot:s.parentElement,videoSlot:s};i.initAd(s.parentElement.offsetWidth,s.parentElement.offsetHeight,de,r.bitrate,v,f)}else y("VPAID version not supported: "+n)},(f=n.createElement("iframe")).name="ivbs-loading-frame",f.style.display="none",f.onload=function(){var e=f.contentDocument;!e&&f.contentWindow&&(e=f.contentWindow.document);var t=e.createElement("script");t.type="text/javascript",t.src=r.src,t.onload=function(){var t=e.createElement("script");t.type="text/javascript",t.text="var vpaid = getVPAIDAd();",e.body.appendChild(t),v(f.contentWindow.vpaid)},e.body.appendChild(t)},n.body.appendChild(f);var h={src:s.src,currentTime:s.currentTime,duration:s.duration,getAttribute:function(e){return s.getAttribute(e)}};return ge(h),{play:function(){switch(p){case ce.INIT:var e=new Promise(function(e){!function e(t){setTimeout(function(){p===ce.INIT?e(t):t()},100)}(e)});return e;case ce.LOADED:return void i.startAd();case ce.PLAYING:return;case ce.PAUSED:return i.pauseAd(),void i.resumeAd();case ce.STOPPED:return void s.play();case ce.FAILED:return}},pause:function(){p===ce.STOPPED&&s.pause(),p===ce.PLAYING&&i.pauseAd()},stop:function(){p>=ce.LOADED&&i.stopAd()},isPaused:function(){return p===ce.STOPPED?s.paused:p!==ce.PLAYING},mute:function(){s.muted=!0,p===ce.STOPPED?s.volume=0:(s.volume=0,i.setAdVolume(0))},unmute:function(){s.muted=!1,p===ce.STOPPED?s.volume=1:(s.volume=1,i.setAdVolume(1))},resize:function(){if(p===ce.STOPPED)s.style.width="100%",s.style.height="100%";else{var e=s.parentElement;i.resizeAd;var t=2,n=function(o,r){setTimeout(function(){var a=e.offsetWidth,s=e.offsetHeight;o!==a||r!==s?(t=2,i.resizeAd(a,s,de),n(a,s)):--t>=0&&n(a,s)},25)};n(e.offsetWidth,e.offsetHeight)}},timedVideo:h};function y(e){p=ce.FAILED,d(3999,JSON.stringify({videoId:g,error:e}))}}),o.Configurator=function(e){e.useDefaultSelections=null==e.useDefaultSelections||e.useDefaultSelections;var t=n.getElementsByClassName(e.parseFrom)[0]||n.getElementsByClassName("ivbsGeneral")[0]||n,i=n.getElementById(e.img),r=[],a=[],s=function(e){for(var t=0;t<5;){if("a"==e.nodeName.toLowerCase()&&e.getAttribute("outgoing-href"))return e;e=e.parentNode,t++}},d=function(t,n,o){var d,l=function(t,i){for(var n=[],o=0;o<e.dependencies.length;o++){for(var r=e.dependencies[o].depArray,s=!0,d=0;d<t-1;d++)if(e.dependencies[o].depArray[d]!=a[d]){s=!1;break}s&&r[t-1]==i&&null!=r[t]&&n.push(r[t].toString())}return n}(t,n),u=a[t],v=null!=o?o[t]:null,f=!1;if(0!==l.length&&null!=r[t])for(var p=0;p<r[t].length;p++){var g=r[t][p];null!=v&&v==g.ivcfgIndexValue?(g.style.display="inline-block",d=g,v!=u&&(f=!0)):l.indexOf(g.ivcfgIndexValue)>-1?(g.style.display="inline-block",d=d||g):(g.style.display="none",null!=u&&g.ivcfgIndexValue!=u||(f=!0))}f?c(d,o,!1):function(){for(var t=0;t<e.dependencies.length;t++){for(var n=e.dependencies[t].depArray,o=!0,r=0;r<n.length;r++)if(n[r]!=a[r]&&void 0!==a[r]){o=!1;break}if(o){if(i.src=e.dependencies[t].img,e.dependencies[t].link){var d=s(i);Q(d,e.dependencies[t].link)}break}}}()},c=function(t,i,n){var s=t.ivcfgIndex,c=t.ivcfgIndexValue;a[s-1]!=c&&(a[s-1]=c,function(t,i){for(var n=0;n<r[t-1].length;n++){var o=r[t-1][n];o.ivcfgIndexValue==i?o.classList.add(e.activeClass):o.classList.remove(e.activeClass)}}(s,c),n&&o.sendUserVideoEventId(7e3,c),d(s,c,i))},l=function(t){for(var i=0;i<e.dependencies.length;i++)if(e.dependencies[i].depArray[0]==t.ivcfgIndexValue)return e.dependencies[i].depArray;return null};return{init:function(){for(var i=!0,n=0,a=!1;i;){n++;var s="data-ivcfg-"+(e.mapping[n]||n),d=t.querySelectorAll("["+s+"]");if(0===d.length)i=!1;else{r.push(d);for(var u=0;u<d.length;u++){var v=d[u];v.ivcfgIndex=n,v.ivcfgIndexValue=v.getAttribute(s),v.onclick=function(t){var i=null;1==this.ivcfgIndex&&e.useDefaultSelections&&(i=l(this)),a||(o.sendUserVideoEventId(930,e.mapping[this.ivcfgIndex]||this.ivcfgIndex),a=!0),c(this,i,!0)}}}}var f=function(){for(var t=0;t<r[0].length;t++)if(r[0][t].ivcfgIndexValue==e.dependencies[0].depArray[0])return r[0][t];return null}();c(f,l(f),!1)}}},o.LoopWriter=function(e){var t=new Array(e.text),o=e.speed||100,r=e.maxRows||2,a=0,s=0,d=t[s].length,c=n.getElementById(e.textContainer),l=c.cloneNode(!0);c.parentNode.insertBefore(l,c),c.style.marginTop=0,c.style.paddingTop=0,l.style.marginBottom=0,l.style.paddingBottom=0,l.style.opacity=1,l.style.maxHeight="1500px",l.style.transition="opacity 0.5s, max-height 1s";var u=function(){var e,v=null;(e=c).offsetHeight/parseInt(e.style.lineHeight||n.defaultView.getComputedStyle(e,null).getPropertyValue("lineHeight")||n.defaultView.getComputedStyle(e,null).getPropertyValue("line-height"))>r&&(v=function(e){var t;for(i=e.innerHTML.length-1;i>=0;i--)if(" "==e.innerHTML[i]){t=i;break}return t}(c)),v>0&&(l.innerHTML=c.innerHTML.substring(0,v-1),c.innerHTML=c.innerHTML.substring(v,c.innerHTML.length),l.style.opacity=0,l.style.maxHeight=0,setTimeout(function(){l.innerHTML="",l.style.opacity=1,l.style.maxHeight="1500px"},1500)),c.innerHTML=c.innerHTML+t[s][a],a++==d?(a=0,c.innerHTML="",++s!=t.length?(d=t[s].length,setTimeout(u,500)):(s=0,d=t[0].length,setTimeout(u,500))):setTimeout(u,o)};return{start:function(){u()}}},o.initVideoSwiper=function(t){for(var i={},n={},r=1,a=function(t,a){var s=new o.InlinePlayer(t),d=t.getAttribute("data-ivvidid")||t.src;new o.VideoQuartileReporter({videoElement:t,report:function(e){!function(e,t){var n=e+t;i[n]||(console.log("QUARTILE: ",[e,t]),o.sendUserVideoEventId(1300+t,e),i[n]=1)}(d,e)}}),t.addEventListener("ended",function(e){t.currentTime=0,t.play()});var c={play:function(){t.paused&&(t.readyState>0?(t.currentTime=n[d]||0,s.play()):e.setTimeout(function(){c.play()},50))},pause:function(){t.paused||(n[d]=t.currentTime,s.pause())},isMuted:function(){return t.muted},mute:function(){this.isMuted()||(t.volume=0,t.muted=!0,a&&(a.classList.add("ivMute"),a.classList.remove("ivUnmute")))},unmute:function(){this.isMuted()&&(t.volume=1,t.muted=!1,a&&(a.classList.remove("ivMute"),a.classList.add("ivUnmute")))},toggleMute:function(){this.isMuted()?(this.unmute(),o.sendUserVideoEventId(r?3500:3501),r=!1):this.mute()}};return function(e,t){t&&t.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.toggleMute()})}(c,a),c},s=[],d=0;d<t.slides.length;d++){var c=t.slides[d],l=c.querySelector("[data-ivvidid]"),u=c.querySelector('[data-role="unmute"]');l&&(video=a(l,u),video.mute(),s[d]=video)}var v=!1,f=function(){return s[t.activeIndex]},p=f();t.on("onSlideChangeEnd",function(){o.handleAdSwipe(),p=f(),v&&p&&p.play()}),t.on("onSlideChangeStart",function(){v&&p&&(p.pause(),p.mute())});var g=function(){v=!0,p&&p.play()};o.viewed?g():o.addEventListener("view",function e(){g(),o.removeEventListener("view",e)}),o.addEventListener("scrollresize",function(){o.getClientVerticalVisibilityPercent(o.adDiv)<80&&p&&p.mute()}),o.addEventListener("click",function(){p&&(p.pause(),p.mute())})},o.Locator=function(e){var t=["mousedown","mouseup","mousemove","pointerdown","pointerup","pointermove","MSPointerDown","MSPointerUp","MSPointerMove","touchstart","touchend","touchmove"],i=function(){var t=[];if(null!=e.id)t.push(n.getElementById(e.id));else for(var i=n.getElementsByClassName(e.class),o=0;o<i.length;o++)t.push(i[o]);return t},r=function(i){i.name="ivbs-locator-frame",i.style.width="100%",i.style.height="100%",i.style.margin="0 !important",i.style.border="none",i.border=0,i.frameBorder=0;var n,r="<style>body {margin: 0px;} .scrolloff { pointer-events: none; } </style><div style='height:100%' id='map'></div><script async defer src='https://maps.googleapis.com/maps/api/js?key="+e.apiKey+"&callback=initMap'><\/script>";!(n=i.contentDocument)&&i.contentWindow&&(n=i.contentWindow.document),n.open("text/html"),n.write(r),n.close(),"cooperative"==e.gesture&&function(e){for(var i=null,n=0,r=1,a=0;a<t.length;a++)e.addEventListener(t[a],function(t){if("touchend"!=t.type&&"mouseup"!=t.type||(r=1,n=0,i=null),"touchmove"==t.type||"mousemove"==t.type){if(null==t.changedTouches||0==t.changedTouches.length)return;var a=t.changedTouches[0].clientX;if(null==i)i=a;else if(a>=i){if(1==n)return r=1,void(n=0);if(0==n){if(r<3)return r++,void(i=a);n=-1,r=0,i=a}else r=0,i=a}else if(a<i){if(-1==n)return r=1,void(n=0);if(0==n){if(r<3)return r++,void(i=a);n=1,r=0,i=a}else r=0,i=a}}var s=1===o.deviceType?new MouseEvent(t.type,t):new TouchEvent(t.type,t);e.frameElement.parentNode.dispatchEvent(s)})}(i.contentWindow),i.contentWindow.config=e,i.contentWindow.eval("var initMap = "+function(){var e=this.document.getElementById("map"),t={lat:this.config.latitude,lng:this.config.longitude},i=new google.maps.Map(e,{zoom:this.config.zoom,center:t,disableDefaultUI:!0,zoomControl:!0,gestureHandling:this.config.gesture});new google.maps.Marker({position:t,map:i})}.toString()),i.style.display="inline-block"};return{initAllMaps:function(){if(function(e){if(!o.currentAd.CampaignGeoTag||!o.currentAd.CampaignGeoTag.Locator){if(!e.apiKey)return m.error("Locator configs not found in BV. Will not generate a Locator"),!1;m.warn("Geo Tag and/or Javascript_V2 locator is not configured for this campaign. Will try to only use configs from BV")}return e.apiKey=e.apiKey||o.currentAd.CampaignGeoTag.Locator.ApiKey,e.latitude=e.latitude||parseFloat(o.currentAd.CampaignGeoTag.Locator.Latitude),e.longitude=e.longitude||parseFloat(o.currentAd.CampaignGeoTag.Locator.Longitude),e.zoom=e.zoom||parseInt(o.currentAd.CampaignGeoTag.Locator.Zoom),e.gesture=e.gesture||"greedy",!0}(e))for(var t=i(),n=0;n<t.length;n++)r(t[n])}}},o.PhotoChannel=function(e){var t=new IvSwiper(e.swiperConfig.container,e.swiperConfig.params);new o.Slider(t,{clickHandler:function(e){}}).start(),setTimeout(function(){t.update(),o.initializeAllOutgoingLinks()},500);for(var i=null!=e.channelConfig.img?n.getElementById(e.channelConfig.img):null,r=null!=e.channelConfig.title?n.getElementById(e.channelConfig.title):null,a=null!=e.channelConfig.desc?n.getElementById(e.channelConfig.desc):null,s=n.getElementsByClassName(e.channelConfig.slide),d=e.channelConfig.activeTarget?n.getElementsByClassName(e.channelConfig.activeTarget):s,c=function(e){for(var t=0;t<d.length;t++)d[t]!=e?d[t].classList.remove("activeSlider"):d[t].classList.add("activeSlider")},l=0;l<d.length;l++)d[l].addEventListener("click",function(){c(this)});for(l=0;l<s.length;l++)s[l].addEventListener("click",function(){i&&(i.src=this.getAttribute("data-img")),r&&(r.innerHTML=this.getAttribute("data-title")),r&&this.getAttribute("data-titleBg")&&(r.style.backgroundColor=this.getAttribute("data-titleBg")),a&&(a.innerHTML=this.getAttribute("data-desc")),o.sendStatwebStats(950,this.getAttribute("data-id"))})},o.Reveal2=function(e){var t,i,r,a,s=n.getElementById(e.container),d=n.getElementById("ivbsMasker"),c=n.getElementById("ivbsRing"),l=n.getElementById("ivbsDot"),u=n.getElementById("ivbsProgressRing"),v=n.getElementById("ivbsProgressCounter"),f=e.minRadius||50,p=e.maxRadius||300,g=e.maxFirstPassRadius||150,m=e.zoomSpeed||10,h=function(){return(100*(i-f)/(p-f)).toFixed()},y=function(e){null!=u&&(e<=0?(e=0,u.setAttribute("stroke-dashoffset","252.363"),u.setAttribute("stroke-dasharray","none")):e>=100?(e=100,u.setAttribute("stroke-dashoffset","0"),u.setAttribute("stroke-dasharray","0px, 999999px")):(u.setAttribute("stroke-dashoffset",252*e/100),u.setAttribute("stroke-dasharray","252.363px, 262.363px"))),null!=v&&(v.textContent=e)},b=function(e,t){d.setAttribute("cx",e),d.setAttribute("cy",t),c.setAttribute("cx",e),c.setAttribute("cy",t),l.setAttribute("cx",e),l.setAttribute("cy",t)},k=function(){c.style.opacity=0,l.style.opacity=0},E=function(){c.style.opacity=1,l.style.opacity=1},C=function(){0!=t&&(-1==t&&i<=f?i=f:1==t&&i>=p?i=p:(i+=m*t,d.setAttribute("r",i),y(h()),setTimeout(C,50)))},w=function(e){if(0==t){if(-1==e&&i<=f)return i=f,void(a=!1);1==e&&i>=g&&(e=-1),i+=.8*m*e,d.setAttribute("r",i),y(h()),setTimeout(function(){w(e)},50)}else a=!1},A=function(e){if(!a&&null!=e.changedTouches&&e.changedTouches.length>0){var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,n=s.getBoundingClientRect(),o=n.x||n.left,r=n.y||n.top;t>o&&t<o+n.width&&i>r&&i<r+n.height?E():k()}},I=function(e){var t,i;null!=e.clientX?(t=e.clientX,i=e.clientY):null!=e.changedTouches&&e.changedTouches.length>0&&(t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY);var n=s.getBoundingClientRect(),o=t-n.left,r=i-n.top;b(o,r)},L=function(){n.removeEventListener("mouseup",L),n.removeEventListener("touchend",L),t=-1,o.sendStatwebStats(915,(Date.now()-r)/1e3),C()},T=function(){n.addEventListener("mouseup",L),n.addEventListener("touchend",L),r=Date.now(),t=1,C()},S=function(){o.getClientVerticalVisibilityPercent(o.adDiv)>75&&(o.removeEventListener("scrollresize",S),a=!0,b(s.offsetWidth/2,s.offsetHeight/2),E(),w(1),s.addEventListener("mousemove",I),s.addEventListener("touchmove",I),e.zoom&&(s.addEventListener("mousedown",T),s.addEventListener("touchstart",T)),s.addEventListener("mouseleave",k),s.addEventListener("mouseenter",E),n.addEventListener("touchmove",A))};return{init:function(){k(),i=f,d.setAttribute("r",i),t=0,o.addEventListener("scrollresize",S),S()}}};o.addEventListener("adRendered",function(){var e=function(e,t,i,n){e&&Y({target:e,duration:i,checkpoints:[n],onCheckpointReached:function(){o.sendUserVideoEventId(t)}})};e(o.adDiv,3400,2e3,50);var t=o.currentAd;t.InfeedIABDuration&&t.InfeedIABPercent&&e(o.adDiv,3300,1e3*t.InfeedIABDuration,t.InfeedIABPercent);var i=o.adDiv.querySelector("#ivbsVid");i&&t.VideoIABDuration&&t.VideoIABPercent&&e(i,3200,1e3*t.VideoIABDuration,t.VideoIABPercent)})}function ge(e){var t={};e.addEventListener=function(e,i){i.constructor===Function&&(t[e]=t[e]||[],t[e].push(i))},e.removeEventListener=function(e,i){var n=t[e]||[],o=n.indexOf(i);o>-1&&n.splice(o,1)},e.dispatchEvent=function(e,i,n){var o=(t[e]||[]).slice(0);for(var r in o)try{o[r].apply(i,n||[])}catch(e){m.error(e)}}}function me(){return n.getElementById("divVideoStepAdTop2")||n.getElementById("divVideoStepAdTop")||n.getElementById("divVideoStepAdBottom")}function he(e){var i={userCookieId:o.id,vId:o.visitId,width:t.window.innerWidth,height:t.window.innerHeight,minifiedScriptList:o.prod||function(){var e=n.querySelector('[id^="_videoStepMinifiedScript+"]');if(e)return e.value}()};for(var r in o.getCookie(w)&&(i[w]=1),i)i.hasOwnProperty(r)&&(e[r]=i[r])}function ye(t){return!0===t&&(e.onbeforeunload=e.onpagehide=null),M||(M=!0,e.removeEventListener("beforeunload",ye),e.removeEventListener("pagehide",ye),G(101),function(){if(e.VsSentOnBeforeUnloadStats)return;e.VsSentOnBeforeUnloadStats=!0;var t=(new Date).toISOString(),i=r.kwebstatUrl+"/Stat/RegisterSewebDuration";i+="?pageId="+o.videoAdContentResult.PageId,i+="&startDate="+o.vsSewebStartTime,i+="&endDate="+t,i+="&lId="+encodeURIComponent(o.dom.id),i+="&vId="+encodeURIComponent(o.visitId),i+="&videoExposedId="+o.currentAd.VideoExposedId,o.jsonp(i)}()),""}function be(){var t=function(){var t={};try{t=JSON.parse(localStorage.ivbs)}catch(e){}for(var i,n=/[\\?&]([^=]+)=([^\\?&#]+)/g;null!=(i=n.exec(e.location.href));)i.index===n.lastIndex&&n.lastIndex++,t[i[1].toLowerCase()]=i[2];return t}(),i={location:s(),lId:o.dom.id,videoAdHtmlId:l(),showFallback:"0"===t.advs,ivbsCampIdsLocal:o.getCookie("IvbsCampIdsLocal"),blk:h,noc:!g,oi:o.optIn},n=x.getCappedCampaignsAsString();n&&(i.capCounts=n),o.latency&&(i.l=o.latency),o.adDiv=me(),o.adDiv&&(i.aci=o.adDiv.getAttribute("id"));var a="videoAdDebug,ADVS,BVCI,BVID,istop,trybvid,trybvci".toLowerCase().split(",");for(var d in t)if(t.hasOwnProperty(d)){var c=t[d];(a.indexOf(d)>-1||/^vs|^invib/i.test(d))&&(i[d]=c)}return g||(i.advs=0),he(i),r.videoAdDomain+"/VideoAd/VideoAdContent?"+u(i)}function ke(){if(Ee(),!F&&null==N.BidModel){F=!0;var e=N.FallbackScript;if(e){var t=n.createElement("script");t.type="text/javascript",t.text=e,n.head.appendChild(t),j(-41)}}}function Ee(){W.forEach(function(e){G.apply(null,e)}),W=[]}function Ce(e){var t=o.currentAd.CampaignGeoTag;if(t&&t.TagReplacements){var i=t.TagReplacements;for(var n in i)if(i.hasOwnProperty(n)){var r=new RegExp("\\["+n+"\\]","g"),a=i[n];e=e.replace(r,a)}}return e}function we(e){if(o.testMode&&o.doNotWaitForScroll)return!0;var i=e.getBoundingClientRect().top;return t.window.innerHeight>i&&i>=0}function Ae(e){return!!e&&(!o.adDisplayed&&we(e))}function Ie(t){var i=function(t,i,r){o.currentAd=i;try{if(o.adBlocked)ke();else{if(null==r){var a=n.getElementById("tt-container");"ShowOnlyBottomIfTeadsPresent"===t.VideoAdDisplayOption&&a&&(t.DivIdToFill="#divVideoStepAdBottom")}Ee(),t.SecondsToWaitForVideoAdScroll&&e.setTimeout(function(){1!==o.statusCode&&(o.trySetStatus({code:0}),ke(),j(-48,o.hasScrolled?"1":"0"))},1e3*t.SecondsToWaitForVideoAdScroll),o.localize.usingLanguage(t.Language),null!=t.PageId&&0!==t.PageId&&(o.vsPageId=t.PageId),o.currentAd.HtmlString?"DoNotShowIfTeadsPresent"===t.VideoAdDisplayOption&&a?(j(-40,"CompetitionFound=tt-container"),ke()):(o.popup=Z(),o.trySetStatus({code:-1}),Ae(me())?J():o.addEventListener("scrollresize",J)):ke()}}catch(e){m.error(e.stack)}},r=function(e){if(0!==o.statusCode&&(o.videoAdResponseReceived=Date.now(),null!=e&&e.Data&&e.Data.videoAdContentResult)){o.videoAdContentResult=N=e.Data.videoAdContentResult,m.info(">>> Got "+o.videoAdContentResult.Ads.length+" ad(s).");var t=new Function(N.BlockingScript);try{t.call()}catch(e){m.error("PBS error",e)}N.AdReason&&m.info("* AdReason = "+N.AdReason),o.log=N.Log,te(),new ee(N,i,ke).displayAnAd()}};e.setTimeout(function(){o.videoAdResponseReceived||o.trySetStatus({code:0})},3e4),o.bidResponse?r({Data:{videoAdContentResult:o.bidResponse}}):C.adResponse?r(C.adResponse):o.jsonp(t,r)}function Le(){var e,t=n.querySelector("div[id^='divVideoStepAdTop']"),i=n.querySelector("#divVideoStepAdBottom");(o.vsSentCallToAdWeb||(o.vsSentCallToAdWeb=!0,Ie(be())),t||i||ie)||(ie=!0,e=function(){Le()},"loading"!==n.readyState?e():n.addEventListener("DOMContentLoaded",e))}function Te(){var e=n.createElement("link");e.async=!0,e.rel="stylesheet",e.type="text/css",e.href=r.videoAdCss,n.head.appendChild(e)}function Se(){ne||(ne=!0,Te(),function(){if(!o.VsSentLoadPageStat){o.VsSentLoadPageStat=!0;var e=null;o.rfc1&&(e=encodeURIComponent(n.cookie).substring(0,4e3)),j(o.isTablet?3:1,null,e)}Le()}())}}(window,top,document);