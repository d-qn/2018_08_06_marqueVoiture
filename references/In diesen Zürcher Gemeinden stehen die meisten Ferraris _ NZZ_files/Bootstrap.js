(function ensightenInit(){var ensightenOptions = {client: "nzz", clientId: 942, publishPath: "prod-nzz", isPublic:0, serverComponentLocation: "ens.nzz.ch/nzz/prod-nzz/serverComponent.php", staticJavascriptPath: "ens.nzz.ch/nzz/prod-nzz/code/", ns: 'Bootstrapper', nexus:"ens.nzz.ch", scUseCacheBuster: "true", enableTagAuditBeacon : "false", enablePagePerfBeacon : "false", registryNs : "ensBootstraps", generatedOn : "Mon Aug 06 13:05:29 GMT 2018", beaconSamplingSeedValue: 11};
if ( !window[ensightenOptions.ns] ) {
window[ensightenOptions.registryNs]||(window[ensightenOptions.registryNs]={});
window[ensightenOptions.registryNs][ensightenOptions.ns]=window[ensightenOptions.ns]=function(f){function l(a){this.name="DependencyNotAvailableException";this.message="Dependency with id "+a+"is missing"}function m(a){this.name="BeaconException";this.message="There was an error durring beacon initialization";a=a||{};this.lineNumber=a.lineNumber||a.line;this.fileName=a.fileName}function n(){for(var a=b.dataDefinitionIds.length,c=!0,d=0;d<a;d++){var e=b.dataDefinitions[b.dataDefinitionIds[d]];if(!e||
null==e.endRegistration){c=!1;break}}c&&b.callOnDataDefintionComplete()}var e={},b={};b.ensightenOptions=ensightenOptions;b.scDataObj={};e.version="1.26.0";e.nexus=f.nexus||"nexus.ensighten.com";e.rand=-1;e.currSec=(new Date).getSeconds();e.options={interval:f.interval||100,erLoc:f.errorLocation||e.nexus+"/error/e.gif",scLoc:f.serverComponentLocation||e.nexus+"/"+f.client+"/serverComponent.php",sjPath:f.staticJavascriptPath||e.nexus+"/"+f.client+"/code/",alLoc:f.alertLocation||e.nexus+"/alerts/a.gif",
publishPath:f.publishPath,isPublic:f.isPublic,client:f.client,clientId:f.clientId,enableTagAuditBeacon:f.enableTagAuditBeacon,scUseCacheBuster:f.scUseCacheBuster,beaconSamplingSeedValue:f.beaconSamplingSeedValue||-1};e.ruleList=[];e.allDeploymentIds=[];e.runDeploymentIds=[];e.runRuleIds=[];e.exceptionList=[];e.ensightenVariables={};e.test=function(a){if(!(a.executionData.hasRun||a.executionData.runTime&&0<a.executionData.runTime.length)){for(var c=0;c<a.dependencies.length;c++)if(!1===a.dependencies[c]())return;
a.execute()}};l.prototype=Error();l.prototype||(l.prototype={});l.prototype.constructor=l;e.DependencyNotAvailableException=l;m.prototype=Error();m.prototype||(m.prototype={});m.prototype.constructor=m;e.BeaconException=m;e.checkForInvalidDependencies=function(a,c,d,h){for(a=0;a<d.length;a++)if("DEPENDENCYNEVERAVAILABLE"===d[a])return b.currentRuleId=this.id,b.currentDeploymentId=this.deploymentId,b.reportException(new e.DependencyNotAvailableException(h[a])),c&&-1!==c&&e.allDeploymentIds.push(c),
!0;return!1};b.currentRuleId=-1;b.currentDeploymentId=-1;b.reportedErrors=[];b.reportedAlerts=[];b.AF=[];b._serverTime="";b._clientIP="";b.sampleBeacon=function(){var a=!1;try{var c=(e.currSec||0)%20,b=e.options.beaconSamplingSeedValue;-1===b?a=!0:0!==c&&0===b%c&&(a=!0)}catch(h){}return a};b.getServerComponent=function(a){b.callOnGetServerComponent();b.insertScript(window.location.protocol+"//"+e.options.scLoc,!1,a||!0,e.options.scUseCacheBuster)};b.setVariable=function(a,c){e.ensightenVariables[a]=
c};b.getVariable=function(a){return a in e.ensightenVariables?e.ensightenVariables[a]:null};b.testAll=function(){for(var a=0;a<e.ruleList.length;a++)e.test(e.ruleList[a])};b.executionState={DOMParsed:!1,DOMLoaded:!1,dataDefinitionComplete:!1,conditionalRules:!1,readyForServerComponent:!1};b.reportException=function(a){a.timestamp=(new Date).getTime();e.exceptionList.push(a);a=window.location.protocol+"//"+e.options.erLoc+"?msg="+encodeURIComponent(a.message||"")+"&lnn="+encodeURIComponent(a.lineNumber||
a.line||-1)+"&fn="+encodeURIComponent(a.fileName||"")+"&cid="+encodeURIComponent(e.options.clientId||-1)+"&client="+encodeURIComponent(e.options.client||"")+"&publishPath="+encodeURIComponent(e.options.publishPath||"")+"&rid="+encodeURIComponent(b.currentRuleId||-1)+"&did="+encodeURIComponent(b.currentDeploymentId||-1)+"&errorName="+encodeURIComponent(a.name||"");a=b.imageRequest(a);a.timestamp=(new Date).getTime();this.reportedErrors.push(a)};b.Rule=function(a){this.execute=function(){this.executionData.runTime.push(new Date);
b.currentRuleId=this.id;b.currentDeploymentId=this.deploymentId;try{this.code()}catch(c){window[ensightenOptions.ns].reportException(c)}finally{this.executionData.hasRun=!0,-1!==this.deploymentId&&(e.runDeploymentIds.push(this.deploymentId),e.runRuleIds.push(this.id)),b.testAll()}};this.id=a.id;this.deploymentId=a.deploymentId;this.dependencies=a.dependencies||[];this.code=a.code;this.executionData={hasRun:!1,runTime:[]}};b.registerRule=function(a){if(b.getRule(a.id)&&-1!==a.id)return!1;e.ruleList.push(a);
-1!==a.deploymentId&&e.allDeploymentIds.push(a.deploymentId);b.testAll();return!0};b.getRule=function(a){for(var c=0;c<e.ruleList.length;c++)if(e.ruleList[c].id===a)return e.ruleList[c];return!1};b.getRuleList=function(){return e.ruleList};b.clearRuleList=function(){e.ruleList=[]};b.getAllDeploymentIds=function(){return e.allDeploymentIds};b.getRunRuleIds=function(){return e.runRuleIds};b.getRunDeploymentIds=function(){return e.runDeploymentIds};b.hasRuleRun=function(a){return(a=b.getRule(a))?a.executionData.hasRun:
!1};e.toTwoChar=function(a){return(2===a.toString().length?"":"0")+a};b.Alert=function(a){var c=new Date;c=c.getFullYear()+"-"+e.toTwoChar(c.getMonth())+"-"+e.toTwoChar(c.getDate())+" "+e.toTwoChar(c.getHours())+":"+e.toTwoChar(c.getMinutes())+":"+e.toTwoChar(c.getSeconds());this.severity=a.severity||1;this.subject=a.subject||"";this.type=a.type||1;this.ruleId=a.ruleId||-1;this.severity=encodeURIComponent(this.severity);this.date=encodeURIComponent(c);this.subject=encodeURIComponent(this.subject);
this.type=encodeURIComponent(this.type)};b.generateAlert=function(a){a=b.imageRequest(window.location.protocol+"//"+e.options.alLoc+"?d="+a.date+"&su="+a.subject+"&se="+a.severity+"&t="+a.type+"&cid="+e.options.clientId+"&client="+e.options.client+"&publishPath="+e.options.publishPath+"&rid="+b.currentRuleId+"&did="+b.currentDeploymentId);a.timestamp=(new Date).getTime();this.reportedAlerts.push(a)};b.imageRequest=function(a){var c=new Image(0,0);c.src=a;return c};b.insertScript=function(a,c,d,h){var p=
document.getElementsByTagName("script"),g;h=void 0!==h?h:!0;if(void 0!==c?c:1)for(g=0;g<p.length;g++)if(p[g].src===a&&p[g].readyState&&/loaded|complete/.test(p[g].readyState))return;if(d){d=1==d&&"object"==typeof b.scDataObj?b.scDataObj:d;e.rand=Math.random()*("1E"+(10*Math.random()).toFixed(0));c=window.location.href;"object"===typeof d&&d.PageID&&(c=d.PageID,delete d.PageID);if("object"===typeof d)for(g in d){g=~c.indexOf("#")?c.slice(c.indexOf("#"),c.length):"";c=c.slice(0,g.length?c.length-g.length:
c.length);c+=~c.indexOf("?")?"&":"?";for(k in d)c+=k+"="+d[k]+"&";c=c.slice(0,-1)+g;break}a+="?";h&&(a+="r="+e.rand+"&");a+="ClientID="+encodeURIComponent(e.options.clientId)+"&PageID="+encodeURIComponent(c)}(function(a,c,b){var d=c.head||c.getElementsByTagName("head");setTimeout(function(){if("item"in d){if(!d[0]){setTimeout(arguments.callee,25);return}d=d[0]}var a=c.createElement("script");a.src=b;a.onload=a.onerror=function(){this.addEventListener&&(this.readyState="loaded")};d.insertBefore(a,
d.firstChild)},0)})(window,document,a)};b.loadScriptCallback=function(a,c,b){var d=document.getElementsByTagName("script"),e;b=d[0];for(e=0;e<d.length;e++)if(d[e].src===a&&d[e].readyState&&/loaded|complete/.test(d[e].readyState))try{c()}catch(g){window[ensightenOptions.ns].reportException(g)}finally{return}d=document.createElement("script");d.type="text/javascript";d.async=!0;d.src=a;d.onerror=function(){this.addEventListener&&(this.readyState="loaded")};d.onload=d.onreadystatechange=function(){if(!this.readyState||
"complete"===this.readyState||"loaded"===this.readyState){this.onload=this.onreadystatechange=null;this.addEventListener&&(this.readyState="loaded");try{c.call(this)}catch(g){window[ensightenOptions.ns].reportException(g)}}};b.parentNode.insertBefore(d,b)};b.insertPageFiles=function(a){var b=0,d=0,e=function(){d==a.length-1&&window[ensightenOptions.ns].callOnPageSpecificCompletion();d++};for(b=0;b<a.length;++b)window[ensightenOptions.ns].loadScriptCallback(a[b],e)};b.unobtrusiveAddEvent=function(a,
b,d){try{var c=a[b]?a[b]:function(){};a[b]=function(){d.apply(this,arguments);return c.apply(this,arguments)}}catch(p){window[ensightenOptions.ns].reportException(p)}};b.anonymous=function(a,c){return function(){try{b.currentRuleId=c?c:"anonymous",a()}catch(d){window[ensightenOptions.ns].reportException(d)}}};b.setCurrentRuleId=function(a){b.currentRuleId=a};b.setCurrentDeploymentId=function(a){b.currentDeploymentId=a};b.bindImmediate=function(a,c,d){if("function"===typeof a)a=new b.Rule({id:c||-1,
deploymentId:d||-1,dependencies:[],code:a});else if("object"!==typeof a)return!1;b.registerRule(a)};b.bindDOMParsed=function(a,c,d){if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:d||-1,dependencies:[function(){return window[ensightenOptions.ns].executionState.DOMParsed}],code:a});else if("object"!==typeof a)return!1;b.registerRule(a)};b.bindDOMLoaded=function(a,c,d){if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:d||-1,dependencies:[function(){return window[ensightenOptions.ns].executionState.DOMLoaded}],
code:a});else if("object"!==typeof a)return!1;b.registerRule(a)};b.bindPageSpecificCompletion=function(a,c,d){if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:d||-1,dependencies:[function(){return window[ensightenOptions.ns].executionState.conditionalRules}],code:a});else if("object"!==typeof a)return!1;b.registerRule(a)};b.bindOnGetServerComponent=function(a,c,d){if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:d||-1,dependencies:[function(){return window[ensightenOptions.ns].executionState.readyForServerComponent}],
code:a});else if("object"!==typeof a)return!1;b.registerRule(a)};b.bindDataDefinitionComplete=function(a,c,d){if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:d||-1,dependencies:[function(){return window[ensightenOptions.ns].executionState.dataDefinitionComplete}],code:a});else if("object"!==typeof a)return!1;b.registerRule(a)};b.checkHasRun=function(a){if(0===a.length)return!0;for(var c,d=0;d<a.length;++d)if(c=b.getRule(parseInt(a[d],10)),!c||!c.executionData.hasRun)return!1;return!0};
b.bindDependencyImmediate=function(a,c,d,h,f){var g=[];if(!e.checkForInvalidDependencies(c,h,d,f)){g.push(function(){return window[ensightenOptions.ns].checkHasRun(d)});if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:h||-1,dependencies:g,code:a});else if("object"!==typeof a)return!1;b.registerRule(a)}};b.bindDependencyDOMLoaded=function(a,c,d,h,f){var g=[];if(!e.checkForInvalidDependencies(c,h,d,f)){g.push(function(){return window[ensightenOptions.ns].executionState.DOMLoaded});g.push(function(){return window[ensightenOptions.ns].checkHasRun(d)});
if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:h||-1,dependencies:g,code:a});else if("object"!==typeof a)return!1;b.registerRule(a)}};b.bindDependencyDOMParsed=function(a,c,d,h,f){var g=[];if(!e.checkForInvalidDependencies(c,h,d,f)){g.push(function(){return window[ensightenOptions.ns].executionState.DOMParsed});g.push(function(){return window[ensightenOptions.ns].checkHasRun(d)});if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:h||-1,dependencies:g,code:a});else if("object"!==
typeof a)return!1;b.registerRule(a)}};b.bindDependencyPageSpecificCompletion=function(a,c,d,h,f){var g=[];if(!e.checkForInvalidDependencies(c,h,d,f)){g.push(function(){return window[ensightenOptions.ns].executionState.conditionalRules});g.push(function(){return window[ensightenOptions.ns].checkHasRun(d)});if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:h||-1,dependencies:g,code:a});else if("object"!==typeof a)return!1;b.registerRule(a)}};b.bindDependencyOnGetServerComponent=function(a,
c,d,h,f){var g=[];if(!e.checkForInvalidDependencies(c,h,d,f)){g.push(function(){return window[ensightenOptions.ns].executionState.readyForServerComponent});g.push(function(){return window[ensightenOptions.ns].checkHasRun(d)});if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:h||-1,dependencies:g,code:a});else if("object"!==typeof a)return!1;b.registerRule(a)}};b.bindDependencyPageSpecificCompletion=function(a,c,d,f,p){var g=[];if(!e.checkForInvalidDependencies(c,f,d,p)){g.push(function(){return window[ensightenOptions.ns].executionState.dataDefinitionComplete});
g.push(function(){return window[ensightenOptions.ns].checkHasRun(d)});if("function"===typeof a)a=new b.Rule({id:c||-1,deploymentId:f||-1,dependencies:g,code:a});else if("object"!==typeof a)return!1;b.registerRule(a)}};b.dataDefintionIds=[];b.dataDefinitions=[];b.pageSpecificDataDefinitionsSet=!1;b.setPageSpecificDataDefinitionIds=function(a){for(var c=a?a.length:0,d=0;d<c;d++){var e=a[d];if(Array.prototype.indexOf)-1==b.dataDefinitionIds.indexOf(e)&&b.dataDefinitionIds.push(e);else{for(var f=!1,g=
b.dataDefinitionIds.length,l=0;l<g;l++)if(b.dataDefinitionIds[l]===e){f=!0;break}f||b.dataDefinitionIds.push(e)}}b.pageSpecificDataDefinitionsSet=!0;n()};b.DataDefinition=function(a,b){this.id=a;this.registrationFn=b;this.endRegistrationTime=this.startRegistrationTime=null;this.startRegistration=function(){this.startRegistrationTime=new Date};this.endRegistration=function(){this.endRegistrationTime=new Date}};b.registerDataDefinition=function(a,c){var d=b.dataDefinitions[c];d||(d=new b.DataDefinition(c,
a),b.dataDefinitions[c]=d);d.startRegistrationTime||(d.startRegistration(),d.registrationFn(),d.endRegistration());b.pageSpecificDataDefinitionsSet&&n()};b.callOnDataDefintionComplete=function(){b.executionState.dataDefinitionComplete=!0;b.testAll()};b.callOnDOMParsed=function(){window[ensightenOptions.ns].executionState.DOMParsed=!0;window[ensightenOptions.ns].testAll()};b.callOnDOMLoaded=function(){window[ensightenOptions.ns].executionState.DOMParsed=!0;window[ensightenOptions.ns].executionState.DOMLoaded=
!0;window[ensightenOptions.ns].testAll()};b.callOnPageSpecificCompletion=function(){for(var a=document.getElementsByTagName("script"),b=0,d=a.length;b<d;b++)if(a[b].src&&a[b].src.match(/\.ensighten\.com\/(.+?)\/code\/.*/i)&&"loaded"!=a[b].readyState&&"complete"!=a[b].readyState){setTimeout(window[ensightenOptions.ns].callOnPageSpecificCompletion,50);return}setTimeout(function(){window[ensightenOptions.ns].executionState.conditionalRules=!0;window[ensightenOptions.ns].testAll()},1)};b.callOnGetServerComponent=
function(){window[ensightenOptions.ns].executionState.readyForServerComponent=!0;window[ensightenOptions.ns].testAll()};b.hasDOMParsed=function(){return window[ensightenOptions.ns].executionState.DOMParsed};b.hasDOMLoaded=function(){return window[ensightenOptions.ns].executionState.DOMLoaded};b.hasPageSpecificCompletion=function(){return window[ensightenOptions.ns].executionState.conditionalRules};var r=function(){var a=[],b=!1,d=!1;return{add:function(c){b&&!d?c():"function"==typeof c&&(a[a.length]=
c)},exec:function(){d=!0;do{var c=a;a=[];b=!0;for(var e=0;e<c.length;e++)try{c[e].call(window)}catch(g){window[ensightenOptions.ns].reportException(g)}}while(0<a.length);d=!1},haveRun:function(){return b}}};b.new_fArray=function(){return r()};e.timer=null;(function(){function a(a,b){return function(){a.apply(b,arguments)}}window.console||(window.console={});var b=window.console;if(!b.log)if(window.log4javascript){var d=log4javascript.getDefaultLogger();b.log=a(d.info,d);b.debug=a(d.debug,d);b.info=
a(d.info,d);b.warn=a(d.warn,d);b.error=a(d.error,d)}else b.log=function(){};b.debug||(b.debug=b.log);b.info||(b.info=b.log);b.warn||(b.warn=b.log);b.error||(b.error=b.log)})();document.addEventListener?(-1<navigator.userAgent.indexOf("AppleWebKit/")?e.timer=window.setInterval(function(){/loaded|interactive|complete/.test(document.readyState)&&(clearInterval(e.timer),b.callOnDOMParsed())},50):document.addEventListener("DOMContentLoaded",b.callOnDOMParsed,!1),window.addEventListener("load",b.callOnDOMLoaded,
!1)):(setTimeout(function(){var a=window.document;(function(){try{if(!document.body)throw"continue";a.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,15);return}window[ensightenOptions.ns].callOnDOMParsed()})()},1),window.attachEvent("onload",function(){window[ensightenOptions.ns].callOnDOMLoaded()}));document.readyState&&"complete"===document.readyState&&(b.executionState.DOMParsed=!0,b.executionState.DOMLoaded=!0);"true"===e.options.enableTagAuditBeacon&&b.sampleBeacon()&&
window.setTimeout(function(){if(window[ensightenOptions.ns]&&!window[ensightenOptions.ns].mobilePlatform)try{for(var a=[],c,d,h,l,g=0;g<e.ruleList.length;++g)d=e.ruleList[g],h=d.executionData.hasRun?"1":"0",l=d.deploymentId.toString()+"|"+d.id.toString()+"|"+h,a.push(l);c="["+a.join(";")+"]";var m=window.location.protocol+"//"+e.nexus+"/"+encodeURIComponent(f.client)+"/"+encodeURIComponent(f.publishPath)+"/TagAuditBeacon.rnc?cid="+encodeURIComponent(f.clientId)+"&data="+c+"&idx=0&r="+e.rand;b.imageRequest(m)}catch(q){b.currentRuleId=
-1,b.currentDeploymentId=-1,a=new e.BeaconException(q),window[ensightenOptions.ns].reportException(a)}},3E3);window.setInterval(b.testAll,e.options.interval);return b}(ensightenOptions);
"true"===ensightenOptions.enablePagePerfBeacon&&window[ensightenOptions.ns]&&window[ensightenOptions.ns].sampleBeacon()&&window[ensightenOptions.ns].bindDOMParsed(function(){if(!window[ensightenOptions.ns].mobilePlatform){var f=window.performance;if(f){f=f.timing||{};var l=f.navigationStart||0,m={connectEnd:"ce",connectStart:"cs",domComplete:"dc",domContentLoadedEventEnd:"dclee",domContentLoadedEventStart:"dcles",domInteractive:"di",domLoading:"dl",domainLookupEnd:"dle",domainLookupStart:"dls",fetchStart:"fs",
loadEventEnd:"lee",loadEventStart:"les",redirectEnd:"rede",redirectStart:"reds",requestStart:"reqs",responseStart:"resps",responseEnd:"respe",secureConnectionStart:"scs",unloadEventStart:"ues",unloadEventEnd:"uee"};var n="&ns="+encodeURIComponent(f.navigationStart);for(var e in m)if(void 0!==f[e]){var b=f[e]-l;n+="&"+m[e]+"="+(0<b?encodeURIComponent(b):0)}else n+="&"+m[e]+"=-1";window[ensightenOptions.ns].timing=n;e=ensightenOptions.nexus||"nexus.ensighten.com";f=ensightenOptions.staticJavascriptPath||
"";n=f.indexOf("/",0);l=f.indexOf("/code/");f=f.substring(n,l)+"/perf.rnc";f+="?cid="+encodeURIComponent(ensightenOptions.clientId)+window[ensightenOptions.ns].timing;window[ensightenOptions.ns].imageRequest("//"+e+f)}}});
	
    /*
     MIT License (c) copyright 2013 original author or authors */
    window[ensightenOptions.ns].data||(window[ensightenOptions.ns].when=function(){function f(a,b,d,c){return l(a).then(b,d,c)}function p(a){this.then=a}function l(a){return c(function(b){b(a)})}function c(b){function g(a){k&&(r=e(a),d(k,r),k=u)}function f(a){g(h(a))}function q(b){k&&d(k,a(b))}var r,k=[];try{b(g,f,q)}catch(E){f(E)}return new p(function(a,b,d){return c(function(c,g,e){k?k.push(function(f){f.then(a,b,d).then(c,g,e)}):n(function(){r.then(a,b,d).then(c,g,e)})})})}function e(a){return a instanceof
    p?a:a!==Object(a)?m(a):c(function(b,d,c){n(function(){try{var g=a.then;"function"===typeof g?z(g,a,b,d,c):b(m(a))}catch(y){d(y)}})})}function m(a){var b=new p(function(d){try{return"function"==typeof d?e(d(a)):b}catch(D){return h(D)}});return b}function h(a){var b=new p(function(d,c){try{return"function"==typeof c?e(c(a)):b}catch(F){return h(F)}});return b}function a(b){var d=new p(function(c,g,e){try{return"function"==typeof e?a(e(b)):d}catch(y){return a(y)}});return d}function d(a,b){n(function(){for(var d,
    c=0;d=a[c++];)d(b)})}function b(a,b,d,g,e){q(2,arguments);return f(a,function(a){return c(function(d,c,g){function e(a){h(a)}function q(a){u(a)}var k;var n=a.length>>>0;var t=Math.max(0,Math.min(b,n));var w=[];var x=n-t+1;var m=[];if(t){var h=function(a){m.push(a);--x||(u=h=r,c(m))};var u=function(a){w.push(a);--t||(u=h=r,d(w))};for(k=0;k<n;++k)k in a&&f(a[k],q,e,g)}else d(w)}).then(d,g,e)})}function t(a,b,d,c){q(1,arguments);return k(a,w).then(b,d,c)}function k(a,b){return f(a,function(a){return c(function(d,
    c,g){var e,q;var k=e=a.length>>>0;var r=[];if(k){var n=function(a,e){f(a,b).then(function(a){r[e]=a;--k||d(r)},c,g)};for(q=0;q<e;q++)q in a?n(a[q],q):--k}else d(r)})})}function n(a){1===x.push(a)&&A(g)}function g(){for(var a,b=0;a=x[b++];)a();x=[]}function q(a,b){for(var d,c=b.length;c>a;)if(d=b[--c],null!=d&&"function"!=typeof d)throw Error("arg "+c+" must be a function");}function r(){}function w(a){return a}f.defer=function(){var a,b;var d={promise:u,resolve:u,reject:u,notify:u,resolver:{resolve:u,
    reject:u,notify:u}};d.promise=a=c(function(c,g,e){d.resolve=d.resolver.resolve=function(d){if(b)return l(d);b=!0;c(d);return a};d.reject=d.resolver.reject=function(d){if(b)return l(h(d));b=!0;g(d);return a};d.notify=d.resolver.notify=function(a){e(a);return a}});return d};f.resolve=l;f.reject=function(a){return f(a,h)};f.join=function(){return k(arguments,w)};f.all=t;f.map=k;f.reduce=function(a,b){var d=z(B,arguments,1);return f(a,function(a){var c=a.length;d[0]=function(a,d,g){return f(a,function(a){return f(d,
    function(d){return b(a,d,g,c)})})};return G.apply(a,d)})};f.any=function(a,d,c,g){return b(a,1,function(a){return d?d(a[0]):a[0]},c,g)};f.some=b;f.isPromise=function(a){return a&&"function"===typeof a.then};p.prototype={otherwise:function(a){return this.then(u,a)},ensure:function(a){function b(){return l(a())}return this.then(b,b).yield(this)},yield:function(a){return this.then(function(){return a})},spread:function(a){return this.then(function(b){return t(b,function(b){return a.apply(u,b)})})},always:function(a,
    b){return this.then(a,a,b)}};var u;var x=[];var H=setTimeout;var A="function"===typeof setImmediate?"undefined"===typeof window?setImmediate:setImmediate.bind(window):"object"===typeof process&&process.nextTick?process.nextTick:function(a){H(a,0)};var v=Function.prototype;var C=v.call;var z=v.bind?C.bind(C):function(a,b){return a.apply(b,B.call(arguments,2))};v=[];var B=v.slice;var G=v.reduce||function(a){var b=0;var d=Object(this);var c=d.length>>>0;var g=arguments;if(1>=g.length)for(;;){if(b in
    d){g=d[b++];break}if(++b>=c)throw new TypeError;}else g=g[1];for(;b<c;++b)b in d&&(g=a(g,d[b],b,d));return g};return f}(),function(){function f(c,f){return l.all(f||[],function(e){return c.apply(null,e)})}function p(e){var m=c.call(arguments,1);return function(){return f(e,m.concat(c.call(arguments)))}}var l=window[ensightenOptions.ns].when;var c=[].slice;l.apply=f;l.call=function(e){return f(e,c.call(arguments,1))};l.lift=p;l.bind=p;l.compose=function(e){var m=c.call(arguments,1);return function(){var h=
    c.call(arguments);h=f(e,h);return l.reduce(m,function(a,d){return d(a)},h)}}}(),window[ensightenOptions.ns].data=function(f,p){function l(a,d){this.name="DataDefinitionException";this.message=d||"Data definitions cannot be resolved as there are invalid id(s): "+a}var c={engines:{memory:{get:function(a){if(e.utils.isArray(a)){for(var d=[],b=0;b<a.length;b++)d.push(c.data[a[b]]);return f[ensightenOptions.ns].when.resolve(d)}d=c.dataDefinitions[a]||{storage:{get:function(){}}};d=d.storage.get(d);c.data[a]=
    d;return f[ensightenOptions.ns].when.resolve(c.data[a])},set:function(a,d){if(e.utils.isArray(a))for(var b in a)c.data[a[b]]=d[b];else c.data[a]=d;return f[ensightenOptions.ns].when.resolve(!0)},remove:function(a){if(e.utils.isArray(a))for(var d in a)delete c.data[a[d]];else delete c.data[a];return f[ensightenOptions.ns].when.resolve(!0)},clear:function(a){c.data={};c.definitions={};return f[ensightenOptions.ns].when.resolve(!0)},all:function(){return f[ensightenOptions.ns].when.resolve(c.data)}}},
    normalizeInputArgs:function(a,d){var b={key:[],val:p},c;if(e.utils.isPlainObject(a))for(c in b.val=[],a)b.key.push(c),b.val.push(a[c]);else e.utils.isArray(a),b.key=a,b.val=d;return b},definitions:{},data:{}},e={utils:{isPlainObject:function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},escapeRegEx:function(a){try{return a.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}catch(d){return a}}}},m=function(){return f[ensightenOptions.ns].when.reject("Not Implemented.")};
    l.prototype=Error();l.prototype||(l.prototype={});l.prototype.constructor=l;c.DataDefinitionException=l;c.checkForInvalidDataDefinitions=function(a){e.utils.isArray(a)||(a=[a]);return a&&0<a.length&&(a=a.join(","),-1<a.indexOf("invalid_id"))?(f[ensightenOptions.ns].reportException(new c.DataDefinitionException(a)),!0):!1};c.collectAvailableDataDefinitions=function(a){for(var d=[],b=0;b<a.length;b++){var t=parseInt(a[b],10),k=f[ensightenOptions.ns].dataDefinitions[t];if(null===k||k===p)if(k=e.storage.session.get({id:t}),
    null!==k&&k!==p)e.set(t,k),c.dataDefinitions[t]={id:t,load:"visitor",storage:e.storage.visitor,missingDDFromCache:!0},d.push(f[ensightenOptions.ns].data.get(""+t));else return f[ensightenOptions.ns].reportException(new c.DataDefinitionException(a,"Invalid data definition used: "+t)),{promises:[],isInvalid:!0};else d.push(f[ensightenOptions.ns].data.get(""+a[b]))}return{promises:d,isInvalid:!1}};c.getSync=function(a){function d(a){var d=a.extract||t,c=a.transform||k,g=!1,e=null,f=null;try{e=d()}catch(v){e=
    null,g=!0}try{f=c(e)}catch(v){f=null,g=!0}g&&b.push(a.id);return f}var b=[],t=function(){return document},k=function(a){return null!==a&&a!==p?a.toString():null},n=parseInt(a);a="string"===typeof a?a.split("."):[];var g={},q="";if(!isNaN(n)&&"undefined"===typeof c.dataDefinitions[n])return f[ensightenOptions.ns].reportException(new c.DataDefinitionException(n,"Error resolving data definition: "+n+".  Does not exist on the page.")),"Data definition specified does not exist on the page";if(isNaN(n)&&
    "undefined"===typeof c.dataDefinitionsBySourceCollName[""+a[0]+"."+a[1]+"."+a[2]])return f[ensightenOptions.ns].reportException(new c.DataDefinitionException(a,"Error resolving data definition: "+a[0]+"."+a[1]+"."+a[2]+".  Does not exist on the page.")),"Data definition specified does not exist on the page";isNaN(n)?3==a.length&&(g=e.getDataDefinitionBySourceCollectionName(a[0],a[1],a[2])):g=e.getDataDefinitionById(n);q=g.load&&g.load.match(/(session|visitor)/i)&&g.storage&&g.storage.get?g.storage.get(g):
    d(g);0<b.length&&f[ensightenOptions.ns].reportException(new c.DataDefinitionException(b,"Error resolving data definitions synchronously: "+b));return q};c.dataDefinitions={};c.dataDefinitionsBySourceCollName={};e.defineEngine=function(a,d){var b,e=["get","set","remove","clear","all"];c.engines[a]=d;if(!d.returnsPromise)for(b=0;b<e.length;b++){var k=e[b];d[k]=f[ensightenOptions.ns].when.lift(d[k])}};e.storage={instance:{set:function(a,d){},get:function(a){return c.getSync(a.id)}},page:{set:function(a,
    d){},get:function(a){return c.data[a.id]}},session:{set:function(a,d){var b=e.storage.session.get({id:a}),c=new Date,k=c.getTime();c.setTime(k+18E5);null!=b&&(d=b);f[ensightenOptions.ns].data.cookie.utils.set(a,d,{expires:c.toGMTString()});b={expires:c.getTime(),value:d};f[ensightenOptions.ns].data.local.utils.set(a,b)},get:function(a){var d=f[ensightenOptions.ns].data.cookie.utils.get(a.id),b=f.JSON&&f.JSON.stringify?f.JSON:f[ensightenOptions.ns].JSON;b=b||{};var c=new Date;c=c.getTime();if(null===
    d){try{var e=b.parse(f[ensightenOptions.ns].data.local.utils.get(a.id))}catch(n){e=null}null!=e&&(e.expires=+e.expires,c<=e.expires?d=e.value:""==e.expires&&e.value!=p?d=e.value:f[ensightenOptions.ns].data.local.utils.remove(a.id))}return d}},visitor:{set:function(a,d){var b=e.storage.session.get({id:a});null!=b&&(d=b);f[ensightenOptions.ns].data.cookie.utils.set(a,d);f[ensightenOptions.ns].data.local.utils.set(a,{expires:"",value:d})},get:function(a){return e.storage.session.get(a)}}};e.getEngine=
    e.engine=function(a){return a?c.engines[a]||{get:m,set:m,remove:m,clear:m,all:m}:c.engines};e.all=function(a){return f[ensightenOptions.ns].data.engine(a||"memory").all()};e.get=function(a,d,b){d=d||"memory";b=b||{};-1<a.indexOf(",")?(a=a.split(","),a=c.normalizeInputArgs(a)):a=c.normalizeInputArgs(a);return b.wait?c.getWait(a.key,f[ensightenOptions.ns].data.engine(d),b):c.data&&c.data.hasOwnProperty(a.key)?f[ensightenOptions.ns].data.engine(d).get(a.key):c.getWaitForKey(a.key,f[ensightenOptions.ns].data.engine(d),
    b)};c.getWait=function(a,d,b){var c=+new Date,k=f[ensightenOptions.ns].when.defer(),n=function(){var c=d.get(a);if(-1===b.wait)return c;c.then(function(a){b.setCheck(a)?k.resolve(a):setTimeout(g,b.interval)},function(a){setTimeout(g,b.interval)})},g=function(){var a=+new Date-c;-1!==b.wait&&a<b.wait?n():k.reject("Timeout")};b.interval=b.interval||500;b.wait=b.wait||5E3;e.utils.isArray(a)?b.setCheck=b.setCheck||function(a){for(var b=!0,d=0;d<a.length;d++)b=b&&!!a[d];return b}:b.setCheck=b.setCheck||
    function(a){return!!a};n();return k.promise};c.getWaitForKey=function(a,d,b){var e=f[ensightenOptions.ns].when.defer(),k=function(){if(c.data&&c.data.hasOwnProperty(a)){var g=d.get(a);if(-1===b.wait)return g;g.then(function(a){e.resolve(a)},function(a){e.reject(a)})}else setTimeout(n,b.interval)},n=function(){k()};b.interval=b.interval||100;b.wait=b.wait||1;k();return e.promise};e.set=function(a,d,b){var e=c.normalizeInputArgs(a,d);Array.prototype.slice.call(arguments);return f[ensightenOptions.ns].data.engine(b||
    "memory").set(e.key,e.val)};e.remove=function(a,d){return f[ensightenOptions.ns].data.engine(d||"memory").remove(a)};e.clear=function(a){return f[ensightenOptions.ns].data.engine(a||"memory").clear()};e.define=function(a,d){d&&(a.name=d.id||d.name);if(!a.name)return f[ensightenOptions.ns].when.reject(Error("Invalid parameters: missing 'name'"));a.id=a.name;var b=a.load||"page";a.load=a.load||"javascript";a.load=-1<a.load.indexOf("javascript")?a.load:a.load+",javascript";a.trigger=a.trigger||function(){return f[ensightenOptions.ns].when.resolve()};
    a.priv=a.priv||!1;a.collection=a.collection||"Data Layer";a.persist=f[ensightenOptions.ns].data.engine("memory");a.storage=e.storage[b.toLowerCase()]||e.storage.page;var h=a.extract||function(){return document},k=a.transform||function(a){return a},n=function(b,d){var c=[];c.push(a.persist.set(b,d));a.storage.set(a.id,d);"object"==typeof f[ensightenOptions.ns].data.dataExport&&f[ensightenOptions.ns].data.dataExport(b,d,a.collection);f[ensightenOptions.ns].when.all(c).then(function(a){g.resolve(a)},
    function(a){g.reject(a)})},g=f[ensightenOptions.ns].when.defer();try{var q=a.trigger()}catch(r){f[ensightenOptions.ns].reportException(new c.DataDefinitionException(null,'"'+r+'" error caught in Data Definition trigger: '+a.dataDefName+", ID:"+a.id+". Using bottom of body trigger.")),q=f[ensightenOptions.ns].data.bottomOfBodyTrigger()}q.then(function(){g.resolve(f[ensightenOptions.ns].when.reduce([function(){try{return h()}catch(r){return f[ensightenOptions.ns].reportException(new c.DataDefinitionException(null,
    '"'+r+'" error caught in Data Definition extractor: '+a.dataDefName+", ID:"+a.id+".")),null}}(),function(){try{return k.apply(this,arguments)}catch(r){return f[ensightenOptions.ns].reportException(new c.DataDefinitionException(null,'"'+r+'" error caught in Data Definition transformer: '+a.dataDefName+", ID "+a.id+".")),null}},n],function(b,d,c,e){if(1==c)return d(b);2==c&&d(a.name,b)}))},function(a){g.reject(a)});c.dataDefinitions[a.id]=a;c.dataDefinitionsBySourceCollName[""+a.source+"."+a.collection+
    "."+a.dataDefName]=a;return g.promise};e.checkConditions=function(a){var d,b={lt:function(a,b){var d=+a,e=+b;return isNaN(d)||isNaN(e)?(f[ensightenOptions.ns].reportException(new c.DataDefinitionException(null,"Value(s) cannot be converted to number: compareWith: "+a+", compareTo: "+b)),!1):d<e},gt:function(a,b){var d=+a,e=+b;return isNaN(d)||isNaN(e)?(f[ensightenOptions.ns].reportException(new c.DataDefinitionException(null,"Value(s) cannot be converted to number: compareWith: "+a+", compareTo: "+
    b)),!1):d>e},eql:function(a,b){return a==b},exists:function(a,b){return null==a||a==p||""==a?!1:!0},re:function(a,b,d){b=new RegExp(b,d?"i":"");try{return a.match(b)}catch(q){return!1}},starts:function(a,d,c){d=e.utils.escapeRegEx(d);return b.re(a,"^"+d,c)},ends:function(a,d,c){d=e.utils.escapeRegEx(d);return b.re(a,d+"$",c)},contains:function(a,d,c){d=e.utils.escapeRegEx(d);return b.re(a,".*"+d+".*",c)}};b.is=b.eql;b["starts with"]=b.starts;b["ends with"]=b.ends;b["is greater than"]=b.gt;b["is less than"]=
    b.lt;b.matches=b.re;for(d=0;d<a.values.length;d++){var h=(a.customComparator?a.customComparator[d]?a.customComparator[d]:b[a.comparators[d]]:b[a.comparators[d]])(a.values[d],a.compareTo[d],a.caseInsensitive?a.caseInsensitive[d]||!1:!1);a.not[d]&&(h=!h);if(!h)return!1}return!0};e.triggerPromise=function(a,d,b){b=b||5E3;var c=+new Date,e=f[ensightenOptions.ns].when.defer();(function(){var f=a();f!=d?e.resolve(f):+new Date-c<b?setTimeout(arguments.callee,200):e.reject("timed out")})();return e.promise};
    e.timeoutPromise=function(a,d){var b=f[ensightenOptions.ns].when.defer();d=d||800;a.then(b.resolve,b.reject);setTimeout(function(){b.reject(Error("timed out"))},d);return b.promise};e.delayTrigger=function(a){a=a||10;var d=f[ensightenOptions.ns].when.defer();setTimeout(function(){d.resolve()},a);return d.promise};e.delayUntilTrigger=function(a,d,b,c){b=b||null;c=c||200;var e=+new Date,h=f[ensightenOptions.ns].when.defer();(function(){var g=a();g!=d?h.resolve(g):b?+new Date-e<b?setTimeout(arguments.callee,
    c):h.reject("timed out"):setTimeout(arguments.callee,c)})();return h.promise};c.applyTrigger=function(a){var d=f[ensightenOptions.ns].when.defer();a(function(){d.resolve(!0)});return d.promise};e.immediateTrigger=function(){return c.applyTrigger(f[ensightenOptions.ns].bindImmediate)};e.bottomOfBodyTrigger=function(){return c.applyTrigger(f[ensightenOptions.ns].bindDOMParsed)};e.whenValueExistsTrigger=function(){return f[ensightenOptions.ns].when.resolve(this.extract())};e.afterEnsightenCompleteTrigger=
    function(){return c.applyTrigger(f[ensightenOptions.ns].bindPageSpecificCompletion)};e.afterElementsDownloadedTrigger=function(){return c.applyTrigger(f[ensightenOptions.ns].bindDOMLoaded)};e.getAllDataDefinitionsOnCurrentPage=function(){return c.dataDefinitions};e.getAllDataDefinitionsOnCurrentPage_S_C_N=function(){return c.dataDefinitionsBySourceCollName};e.getDataDefinitionById=function(a){return c.dataDefinitions[a||-1]||{}};e.getDataDefinitionBySourceCollectionName=function(a,d,b){return c.dataDefinitionsBySourceCollName[""+
    a+"."+d+"."+b]||{}};e.getDataDefinitionByPercentSyntax=function(a){a=(""+a).split("_");return 1>a.length?{}:c.dataDefinitions[a[1]]||{}};e.resolve=function(a,d){var b=this,h=null;if(!c.checkForInvalidDataDefinitions(a))if(d)f[ensightenOptions.ns].bindDataDefinitionComplete(function(){var e=c.collectAvailableDataDefinitions(a);e.isInvalid||f[ensightenOptions.ns].when.all(e.promises).then(function(e){try{d.apply(b,e)}catch(r){f[ensightenOptions.ns].reportException(new c.DataDefinitionException(a,"Error resolving data definitions: "+
    a+". Details: "+r))}},function(b){f[ensightenOptions.ns].reportException(new c.DataDefinitionException(a,"Error resolving data definitions: "+a+". Details: "+b))})});else{h=[];var k=a;e.utils.isArray(a)||(k=[a]);for(var m=0;m<k.length;m++)h.push(c.getSync(k[m]));return h=e.utils.isArray(a)?h:h[0]}};e.extract=function(a,d){var b="",c=function(a,b){var d=~b.indexOf("#")?b.split("#")[1]:"",c=d?0:~b.indexOf("[")?parseInt(b.match(/\[(\d+)\]/)[1]):0,e=(d?b.split("#")[0]:c?b.split("[")[0]:b).toLowerCase();
    if(a==document&&"html"==e&&0==c)return document.getElementsByTagName("html")[0];if(~b.indexOf("#"))return document.getElementById(b.split("#")[1]);var g=a.firstChild;if(!g)return null;var f=0;for(c=0!=c?c-1:c;g;){if(1==g.nodeType){if(g.tagName.toLowerCase()==e&&""!=d&&g.id==d||g.tagName.toLowerCase()==e&&f==c&&""==d)return g;g.tagName.toLowerCase()==e&&f++}g=g.nextSibling}},e=function(a,b){a=a.split("/");for(var d=c(b||document,a[1]),e=2;e<a.length;e++){if(null==d)return null;d=c(d,a[e])}return d},
    h=function(){for(var a={},b=f.document.getElementsByTagName("META")||[],d=0,c=b.length;d<c;d++){var e=b[d].name||b[d].getAttribute("property")||"";0!==e.length&&(a[e]=b[d].content)}return a}(),g=function(a){var b=h[a];if(b)return b;b=f.document.getElementsByTagName("META")||[];for(var d=0,c=b.length;d<c;d++){var e=b[d].name||b[d].getAttribute("property")||"";if(a==e)return b[d].content}},q=function(a){return(val=(new RegExp("&"+a+"=([^&]*)")).exec(f.location.search.replace(/^\?/,"&")))?val[0].split("=")[1]:
    ""},r=function(a){return(val=(new RegExp("^"+a+"=.*|;\\s*"+a+"=.*")).exec(f.document.cookie))?val[0].split("=")[1].split(";")[0]:""},m=function(a){(a=l(a))&&a.nodeType&&1==a.nodeType&&(a=a.value||a.innerHTML||"");return a.toString().replace(/\n|\r|\s\s+/g,"")||""},l=function(a){var b="";if(0==a.indexOf("/HTML/BODY"))b=e(a);else try{b=eval(a)}catch(A){b=""}return b};try{return d?"meta"==d?b=g(a):"cookie"==d?b=r(a):"param"==d?b=q(a):"content"==d?b=m(a):"event"==d?b=l(a):"var"==d&&(b=f[a]):b=g(a)||r(a)||
    q(a)||m(a)||l(a)||f[a]||"",b||""}catch(x){return""}};if("undefined"==typeof h)var h={exports:{}};return e}(window),window[ensightenOptions.ns].data.defineEngine("store",function(){function f(a){return function(){var d=Array.prototype.slice.call(arguments,0);d.unshift(b);k.appendChild(b);b.addBehavior("#default#userData");b.load(h);d=a.apply(store,d);k.removeChild(b);return d}}function p(a){return a.replace(l,"___")}var l=RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),c={},e=window,m=e.document,
    h="localStorage",a,d=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.set=function(a,b){};c.get=function(a){};c.remove=function(a){};c.clear=function(){};try{if(h in e&&e[h]){var b=e[h];c.set=function(a,c){var e,g=window.JSON&&window.JSON.stringify?window.JSON:window[ensightenOptions.ns].JSON;if(d(a)){var f=0;for(e=a.length;f<e;f++)b.setItem(a[f],"string"===typeof c[f]?c[f]:g.stringify(c[f]))}else b.setItem(a,"string"===typeof c?c:g.stringify(c))};c.get=function(a){if(d(a)){var c=
    {},e;var f=0;for(e=a.length;f<e;f++)c[a[f]]=b.getItem(a[f]);return c}return b.getItem(a)};c.remove=function(a){if(d(a)){var c;var e=0;for(c=a.length;e<c;e++)b.removeItem(a[e])}else b.removeItem(a)};c.clear=function(){b.clear()};c.all=function(){return b}}else if("globalStorage"in e&&e.globalStorage)b=e.globalStorage[e.location.hostname],c.set=function(a,c){if(d(a)){var e;var f=0;for(e=a.length;f<e;f++)b[a[f]]=c[f]}else b[a]=c},c.get=function(a){if(d(a)){var c={},e;var f=0;for(e=a.length;f<e;f++)c[a[f]]=
    b[a[f]]&&b[a[f]].value;return c}return b[a]&&b[a].value},c.remove=function(a){if(d(a)){var c;var e=0;for(c=a.length;e<c;e++)delete b[a[e]]}else delete b[a]},c.clear=function(){for(var a in b)delete b[a]},c.all=function(){return b};else if(m.documentElement.addBehavior){try{var t=new ActiveXObject("htmlfile");t.open();t.write('<script>document.w=window\x3c/script><iframe src="/favicon.ico"></frame>');t.close();var k=t.w.frames[0].document;b=k.createElement("div")}catch(g){b=m.createElement("div"),
    k=m.body}c.set=f(function(a,b,e){if(d(b)){var f;var g=0;for(f=b.length;g<f;g++){fixedKey=p(b[g]);if(void 0===e[g])return c.remove(fixedKey);a.setAttribute(fixedKey,e[g]);a.save(h)}}else{fixedKey=p(b);if(void 0===e)return c.remove(fixedKey);a.setAttribute(fixedKey,e);a.save(h)}});c.get=f(function(a,b){if(d(b)){var c={},e;var f=0;for(e=b.length;f<e;f++){var g=p(b[f]);c[b[f]]=a.getAttribute(g)}return c}b=p(b);return a.getAttribute(b)});c.remove=f(function(a,b){if(d(b)){var c;var e=0;for(c=b.length;e<
    c;e++)a.removeAttribute(p(b[e])),a.save(h)}else b=p(b),a.removeAttribute(b),a.save(h)});c.clear=f(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(h);for(var d=0,c;c=b[d];d++)a.removeAttribute(c.name);a.save(h)});c.all=f(function(a){for(var b=a.XMLDocument.documentElement.attributes,d={},c=0,e;e=b[c];++c){var f=p(e.name);d[e.name]=a.getAttribute(f)}return d})}}catch(g){}var n={};for(a in c)n[a]=c[a];n.testStorage=function(){try{var a="tk_"+Math.ceil(5E7*Math.random());n.set(a,"test");
    if("test"===n.get(a))return n.remove(a),!0}catch(q){}return!1};c.utils=n;return window[ensightenOptions.ns].data.local=c}()),window[ensightenOptions.ns].data.defineEngine("cookie",function(f,p){var l=function(){return l.get.apply(l,arguments)},c=l.utils={isArray:Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)},isPlainObject:window[ensightenOptions.ns].data.utils.isPlainObject,toArray:function(c){return Array.prototype.slice.call(c)},getKeys:Object.keys||function(c){var e=
    [],f="";for(f in c)c.hasOwnProperty(f)&&e.push(f);return e},escape:function(c){return String(c).replace(/[,;"\\=\s%]/g,function(c){return encodeURIComponent(c)})},retrieve:function(c,f){return null==c?f:c},getAllCookies:function(){if(""===f.cookie)return{};for(var c=f.cookie.split("; "),m={},h=0,a=c.length;h<a;h++){var d=c[h].split("=");m[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return m},set:function(e,m,h){h=h||-1;if(c.isPlainObject(e))for(var a in e)e.hasOwnProperty(a)&&l.set(a,e[a],
    m);else if(c.isArray(e)){var d;a=0;for(d=e.length;a<d;a++)l.set(e[a],m[a],h)}else{a=h.expires!==p?h.expires:l.defaults.expires||"";"number"===typeof a&&(a=new Date(a));a=c.isPlainObject(a)&&"toGMTString"in a?";expires="+a.toGMTString():c.isPlainObject(a)&&a instanceof Date?";expires="+a.toUTCString():";expires="+a;d=(d=h.path||l.defaults.path)?";path="+d:"";var b=h.domain||l.defaults.domain;b=b?";domain="+b:"";h=h.secure||l.defaults.secure?";secure":"";f.cookie=c.escape(e)+"="+c.escape(m)+a+d+b+h}},
    get:function(e,f){f=f||p;var h=c.getAllCookies();if(c.isArray(e)){for(var a={},d=0,b=e.length;d<b;d++)a[e[d]]=c.retrieve(h[e[d]],f),a[e[d]]===p&&(a[e[d]]=null);return a}a=c.retrieve(h[e],f);return a===p?null:a},getGMTString:function(c){var e=new Date;e.setTime(e.getTime()+864E5*c);return e.toGMTString()}};l.defaults={path:"/",expires:c.getGMTString(90)};l.set=function(e,f){c.set(e,f)};l.remove=function(e){e=c.isArray(e)?e:c.toArray(arguments);for(var f=0,h=e.length;f<h;f++)c.set(e[f],"",{expires:-1})};
    l.clear=function(){return l.remove(c.getKeys(c.getAllCookies()))};l.get=function(e,f){return c.get(e,f)};l.all=function(){return c.getAllCookies()};l.utils=c;return window[ensightenOptions.ns].data.cookie=l}(document)));
		
window[ensightenOptions.ns].ensEvent||(window[ensightenOptions.ns].ensEvent=function(p,u){var k={queue:{},pollQueue:{},pushTrigger:function(b,c){if("[object Array]"===Object.prototype.toString.call(b)){for(var g=0;g<b.length;g++)k.pushTrigger(b[g],c);return!0}if("string"!=typeof b)return!1;this.queue[b]=this.queue[b]||{fn:[]};"function"==typeof c&&this.queue[b].fn.push(c);return!0},callTrigger:function(b,c,g){if("string"!=typeof b)return!1;b=k.queue[b];if("object"==typeof b&&b.fn&&b.fn.length&&(0!=
b.fireOnFirstSet&&c==u||c!=u&&0!=b.fireOnUpdate))for(c=0;c<b.fn.length;c++)try{b.fn[c].call(this)}catch(n){p[ensightenOptions.ns].reportException(n)}},setPollOptions:function(b,c,g){this.queue[b]=this.queue[b]||{fn:[]};this.queue[b].fireOnFirstSet=c;this.queue[b].fireOnUpdate=g},callPoll:function(b,c,g,p,r){if("string"==typeof b&&c&&c.length&&!(1>c.length)){for(var n=0;n<c.length;n++)k.setPollOptions(c[n],p,r);k.pushWatch(b,c,g)}},pushWatch:function(b,c,g){this.pollQueue[b]||(this.pollQueue[b]={previousVal:u,
eventArr:[],valueFn:g});this.pollQueue[b].eventArr=this.pollQueue[b].eventArr.concat(c);this.pollQueue[b].valueFn=g},globalWatch:function(){setInterval(function(){for(var b in k.pollQueue){var c=k.pollQueue[b],g=c.valueFn(b);if(c.previousVal!==g&&null!==g&&""!==g){for(var n=0;n<c.eventArr.length;n++)k.callTrigger.call(p,c.eventArr[n],c.previousVal,g);k.pollQueue[b].previousVal=g}}},500)}};k.globalWatch();return{add:function(b,c){return k.pushTrigger(b,c)},get:function(b){return k.queue[b]},trigger:function(b,
c){return k.callTrigger.call(c||p,b)},poll:function(b,c,g,n,r){r=r||p[ensightenOptions.ns].data.resolve;return k.callPoll(b,c,r,g,n)}}}(window),function(p,u,k){u[p]=k()}("qwery",window[ensightenOptions.ns],function(){function p(){this.c={}}function u(a){return H.g(a)||H.s(a,"(^|\\s+)"+a+"(\\s+|$)",1)}function k(a,d){for(var e=0,f=a.length;e<f;e++)d(a[e])}function b(a){for(var d=[],e=0,f=a.length;e<f;++e)l(a[e])?d=d.concat(a[e]):d[d.length]=a[e];return d}function c(a){for(var d=0,e=a.length,f=[];d<
e;d++)f[d]=a[d];return f}function g(a){for(;(a=a.previousSibling)&&1!=a.nodeType;);return a}function n(a,d,e,f,b,h,l,c,g,k,y){var I,B,m;if(1!==this.nodeType||d&&"*"!==d&&this.tagName&&this.tagName.toLowerCase()!==d||e&&(I=e.match(Q))&&I[1]!==this.id)return!1;if(e&&(m=e.match(R)))for(a=m.length;a--;)if(!u(m[a].slice(1)).test(this.className))return!1;if(g&&v.pseudos[g]&&!v.pseudos[g](this,y))return!1;if(f&&!l)for(B in g=this.attributes,g)if(Object.prototype.hasOwnProperty.call(g,B)&&(g[B].name||B)==
b)return this;return f&&!x(h,S(this,b)||"",l)?!1:this}function r(a){return J.g(a)||J.s(a,a.replace(T,"\\$1"))}function x(a,d,e){switch(a){case "=":return d==e;case "^=":return d.match(w.g("^="+e)||w.s("^="+e,"^"+r(e),1));case "$=":return d.match(w.g("$="+e)||w.s("$="+e,r(e)+"$",1));case "*=":return d.match(w.g(e)||w.s(e,r(e),1));case "~=":return d.match(w.g("~="+e)||w.s("~="+e,"(?:^|\\s+)"+r(e)+"(?:\\s+|$)",1));case "|=":return d.match(w.g("|="+e)||w.s("|="+e,"^"+r(e)+"(-|$)",1))}return 0}function q(a,
d){var e=[],f=[],b,h,l=d,c=C.g(a)||C.s(a,a.split(K)),g=a.match(L);if(!c.length)return e;var m=(c=c.slice(0)).pop();c.length&&(b=c[c.length-1].match(M))&&(l=N(d,b[1]));if(!l)return e;var y=m.match(E);var v=l!==d&&9!==l.nodeType&&g&&/^[+~]$/.test(g[g.length-1])?function(a){for(;l=l.nextSibling;)1==l.nodeType&&(y[1]?y[1]==l.tagName.toLowerCase():1)&&(a[a.length]=l);return a}([]):l.getElementsByTagName(y[1]||"*");b=0;for(m=v.length;b<m;b++)if(h=n.apply(v[b],y))e[e.length]=h;if(!c.length)return e;k(e,
function(a){t(a,c,g)&&(f[f.length]=a)});return f}function t(a,d,e,b){function l(a,b,c){for(;c=U[e[b]](c,a);)if(f(c)&&n.apply(c,d[b].match(E)))if(b){if(h=l(c,b-1,c))return h}else return c}var h;return(h=l(a,d.length-1,a))&&(!b||z(h,b))}function f(a,d){return a&&"object"===typeof a&&(d=a.nodeType)&&(1==d||9==d)}function h(a){var d=[],e;var f=0;a:for(;f<a.length;++f){for(e=0;e<d.length;++e)if(d[e]==a[f])continue a;d[d.length]=a[f]}return d}function l(a){return"object"===typeof a&&isFinite(a.length)}
function N(a,d,e){return 9===a.nodeType?a.getElementById(d):a.ownerDocument&&((e=a.ownerDocument.getElementById(d))&&z(e,a)&&e||!z(a,a.ownerDocument)&&F('[id="'+d+'"]',a)[0])}function v(a,d){var e,h;var g=d?"string"==typeof d?v(d)[0]:!d.nodeType&&l(d)?d[0]:d:m;if(!g||!a)return[];if(a===window||f(a))return!d||a!==window&&f(g)&&z(a,g)?[a]:[];if(a&&l(a))return b(a);if(e=a.match(V)){if(e[1])return(h=N(g,e[1]))?[h]:[];if(e[2])return c(g.getElementsByTagName(e[2]));if(W&&e[3])return c(g.getElementsByClassName(e[3]))}return F(a,
g)}function y(a,d){return function(e){var f,b;O.test(e)?9!==a.nodeType&&((b=f=a.getAttribute("id"))||a.setAttribute("id",b="__qwerymeupscotty"),d(a.parentNode||a,'[id="'+b+'"]'+e,!0),f||a.removeAttribute("id")):e.length&&d(a,e,!1)}}var m=document,D=m.documentElement,F,Q=/#([\w\-]+)/,R=/\.[\w\-]+/g,M=/^#([\w\-]+)$/,X=/^([\w]+)?\.([\w\-]+)$/,O=/(^|,)\s*[>~+]/,Y=/^\s+|\s*([,\s\+~>]|$)\s*/g,A=/[\s>\+~]/,P=/(?![\s\w\-\/\?&=:\.\(\)!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,T=/([.*+?\^=!:${}()|\[\]\/\\])/g,
V=new RegExp(M.source+"|"+/^([\w\-]+)$/.source+"|"+/^\.([\w\-]+)$/.source),L=new RegExp("("+A.source+")"+P.source,"g"),K=new RegExp(A.source+P.source),E=new RegExp(/^(\*|[a-z0-9]+)?(?:([\.#]+[\w\-\.#]+)?)/.source+"("+/\[([\w\-]+)(?:([\|\^\$\*~]?=)['"]?([ \w\-\/\?&=:\.\(\)!,@#%<>\{\}\$\*\^]+)["']?)?\]/.source+")?("+/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/.source+")?"),U={" ":function(a){return a&&a!==D&&a.parentNode},">":function(a,d){return a&&a.parentNode==d.parentNode&&a.parentNode},"~":function(a){return a&&
a.previousSibling},"+":function(a,d,e,f){return a?(e=g(a))&&(f=g(d))&&e==f&&e:!1}};p.prototype={g:function(a){return this.c[a]||void 0},s:function(a,d,e){d=e?new RegExp(d):d;return this.c[a]=d}};var H=new p,J=new p,w=new p,C=new p,z="compareDocumentPosition"in D?function(a,d){return 16==(d.compareDocumentPosition(a)&16)}:"contains"in D?function(a,d){d=9===d.nodeType||d==window?D:d;return d!==a&&d.contains(a)}:function(a,d){for(;a=a.parentNode;)if(a===d)return 1;return 0},S=function(){var a=m.createElement("p");
return(a.innerHTML='<a href="#x">x</a>',"#x"!=a.firstChild.getAttribute("href"))?function(a,e){return"class"===e?a.className:"href"===e||"src"===e?a.getAttribute(e,2):a.getAttribute(e)}:function(a,e){return a.getAttribute(e)}}(),W=!!m.getElementsByClassName,Z=m.querySelector&&m.querySelectorAll,aa=function(a,d){var e=[],f,b;try{if(9===d.nodeType||!O.test(a))return c(d.querySelectorAll(a));k(f=a.split(","),y(d,function(a,d){b=a.querySelectorAll(d);1==b.length?e[e.length]=b.item(0):b.length&&(e=e.concat(c(b)))}));
return 1<f.length&&1<e.length?h(e):e}catch(ba){}return G(a,d)},G=function(a,d){var e=[],f,b;a=a.replace(Y,"$1");if(f=a.match(X)){var l=u(f[2]);f=d.getElementsByTagName(f[1]||"*");var c=0;for(b=f.length;c<b;c++)l.test(f[c].className)&&(e[e.length]=f[c]);return e}k(f=a.split(","),y(d,function(a,f,h){l=q(f,a);c=0;for(b=l.length;c<b;c++)if(9===a.nodeType||h||z(l[c],d))e[e.length]=l[c]}));return 1<f.length&&1<e.length?h(e):e};A=function(a){"undefined"!==typeof a.useNativeQSA&&(F=a.useNativeQSA?Z?aa:G:
G)};A({useNativeQSA:!0});v.configure=A;v.uniq=h;v.is=function(a,d,e){if(f(d))return a==d;if(l(d))return!!~b(d).indexOf(a);for(var c=d.split(","),h;d=c.pop();)if(h=C.g(d)||C.s(d,d.split(K)),d=d.match(L),h=h.slice(0),n.apply(a,h.pop().match(E))&&(!h.length||t(a,h,d,e)))return!0;return!1};v.pseudos={};return v}),function(){function p(f,b,c){n||(n=window[ensightenOptions.ns].qwery);var h=n;if((h=h.call(c,b,c))&&0<h.length){if("_root"==b)f=c;else if(f===c)f=void 0;else{b:{for(var l=h.length,g=0;g<l;g++)if(f===
h[g]){h=!0;break b}h=!1}h||(f.parentNode?(r++,f=p(f.parentNode,b,c)):f=void 0)}return f}return!1}function u(f,b,c,g){q[f.id]||(q[f.id]={});q[f.id][b]||(q[f.id][b]={});q[f.id][b][c]||(q[f.id][b][c]=[]);q[f.id][b][c].push(g)}function k(f,b,c,g){if(g||c)if(g)for(var h=0;h<q[f.id][b][c].length;h++){if(q[f.id][b][c][h]===g){q[f.id][b][c].pop(h,1);break}}else delete q[f.id][b][c];else q[f.id][b]={}}function b(b,c,l){if(q[b][l]){var f=c.target||c.srcElement,h,k,m={},n=k=0;r=0;for(h in q[b][l])q[b][l].hasOwnProperty(h)&&
(k=p(f,h,t[b].element))&&g.matchesEvent(l,t[b].element,k,"_root"==h,c)&&(r++,q[b][l][h].match=k,m[r]=q[b][l][h]);c.stopPropagation=function(){c.cancelBubble=!0};for(k=0;k<=r;k++)if(m[k])for(n=0;n<m[k].length;n++){if(!1===m[k][n].call(m[k].match,c)){g.cancel(c);return}if(c.cancelBubble)return}}}function c(c,h,l,n){function f(c){return function(f){b(p,f,c)}}c instanceof Array||(c=[c]);l||"function"!=typeof h||(l=h,h="_root");var p=this.id,m;for(m=0;m<c.length;m++)q[p]&&q[p][c[m]]||g.addEvent(this,c[m],
f(c[m])),n?k(this,c[m],h,l):u(this,c[m],h,l);return this}function g(b,c,l,k){if("string"==typeof b&&"function"==typeof c||"string"==typeof c)g(document).on(b,c,l,k||!1);if(!(this instanceof g)){for(var f in t)if(t[f].element===b)return t[f];x++;t[x]=new g(b,x);t[x]._on=t[x].on;t[x].on=function(b,c,f,g){var h="function"==typeof c?c:f;if("function"==typeof c?f:g)b=[b],"string"==typeof c&&b.push(c),b.push(function(b){return function(c){c.defaultPrevented||window[ensightenOptions.ns].Delegate.load(this);
if(this.nodeName&&"a"!=this.nodeName.toLowerCase())return b.call(this);"undefined"!=typeof c.preventDefault?c.preventDefault():c.returnValue=!1;b.call(this)}}(h)),this._on.apply(this,b);else return this._on.call(this,b,c,f)};return t[x]}this.element=b;this.id=c}var n,r=0,x=0,q={},t={};g.prototype.on=function(b,g,l){return c.call(this,b,g,l)};g.prototype.off=function(b,g,l){return c.call(this,b,g,l,!0)};g.cancel=function(b){b.preventDefault();b.stopPropagation()};g.addEvent=function(b,c,g){b.element.addEventListener(c,
g,"blur"==c||"focus"==c)};g.matchesEvent=function(){return!0};g.load=function(b){setTimeout(function(b,c){return function(){if(b.nodeName&&"a"==b.nodeName.toLowerCase()){if(c&&/^javascript\s*:/.test(c))return(new Function(unescape(c))).call(window);c&&(window.location.href=c)}}}(b,b.href||""),750)};window[ensightenOptions.ns].Delegate=g}(),function(p){var u=p.addEvent;p.addEvent=function(k,b,c){if(k.element.addEventListener)return u(k,b,c);"focus"==b&&(b="focusin");"blur"==b&&(b="focusout");k.element.attachEvent("on"+
b,c)};p.cancel=function(k){k.preventDefault&&k.preventDefault();k.stopPropagation&&k.stopPropagation();k.returnValue=!1;k.cancelBubble=!0}}(window[ensightenOptions.ns].Delegate),window[ensightenOptions.ns].on=window[ensightenOptions.ns].Delegate);
Bootstrapper.dataDefinitionIds = [];/*
 MIT
*/
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;(function(root){var NODE_JS=typeof process=="object"&&process.versions&&process.versions.node;if(NODE_JS)root=global;var COMMON_JS=!root.JS_SHA256_TEST&&typeof module=="object"&&module.exports;var HEX_CHARS="0123456789abcdef".split("");var EXTRA=[-2147483648,8388608,32768,128];var SHIFT=[24,16,8,0];var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,
2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,
1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var blocks=[];var sha224=function(message){return sha256(message,true)};var sha256=function(message,is224){var notString=typeof message!="string";if(notString&&message.constructor==root.ArrayBuffer)message=new Uint8Array(message);var h0,h1,h2,h3,h4,h5,h6,h7,block,code,first=true,end=false,i,j,index=0,start=0,bytes=0,length=message.length,s0,s1,maj,t1,t2,ch,ab,da,cd,bc;if(is224){h0=
3238371032;h1=914150663;h2=812702999;h3=4144912697;h4=4290775857;h5=1750603025;h6=1694076839;h7=3204075428}else{h0=1779033703;h1=3144134277;h2=1013904242;h3=2773480762;h4=1359893119;h5=2600822924;h6=528734635;h7=1541459225}block=0;do{blocks[0]=block;blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0;if(notString)for(i=start;index<length&&i<64;++index)blocks[i>>2]|=message[index]<<
SHIFT[i++&3];else for(i=start;index<length&&i<64;++index){code=message.charCodeAt(index);if(code<128)blocks[i>>2]|=code<<SHIFT[i++&3];else if(code<2048){blocks[i>>2]|=(192|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else if(code<55296||code>=57344){blocks[i>>2]|=(224|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else{code=65536+((code&1023)<<10|message.charCodeAt(++index)&1023);blocks[i>>2]|=(240|code>>18)<<SHIFT[i++&
3];blocks[i>>2]|=(128|code>>12&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}}bytes+=i-start;start=i-64;if(index==length){blocks[i>>2]|=EXTRA[i&3];++index}block=blocks[16];if(index>length&&i<56){blocks[15]=bytes<<3;end=true}var a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7;for(j=16;j<64;++j){t1=blocks[j-15];s0=(t1>>>7|t1<<25)^(t1>>>18|t1<<14)^t1>>>3;t1=blocks[j-2];s1=(t1>>>17|t1<<15)^(t1>>>19|t1<<13)^t1>>>10;blocks[j]=blocks[j-16]+s0+blocks[j-7]+
s1<<0}bc=b&c;for(j=0;j<64;j+=4){if(first){if(is224){ab=300032;t1=blocks[0]-1413257819;h=t1-150054599<<0;d=t1+24177077<<0}else{ab=704751109;t1=blocks[0]-210244248;h=t1-1521486534<<0;d=t1+143694565<<0}first=false}else{s0=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10);s1=(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7);ab=a&b;maj=ab^a&c^bc;ch=e&f^~e&g;t1=h+s1+ch+K[j]+blocks[j];t2=s0+maj;h=d+t1<<0;d=t1+t2<<0}s0=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10);s1=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7);da=d&a;maj=
da^d&b^ab;ch=h&e^~h&f;t1=g+s1+ch+K[j+1]+blocks[j+1];t2=s0+maj;g=c+t1<<0;c=t1+t2<<0;s0=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10);s1=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7);cd=c&d;maj=cd^c&a^da;ch=g&h^~g&e;t1=f+s1+ch+K[j+2]+blocks[j+2];t2=s0+maj;f=b+t1<<0;b=t1+t2<<0;s0=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10);s1=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7);bc=b&c;maj=bc^b&d^cd;ch=f&g^~f&h;t1=e+s1+ch+K[j+3]+blocks[j+3];t2=s0+maj;e=a+t1<<0;a=t1+t2<<0}h0=h0+a<<0;h1=h1+b<<0;h2=h2+c<<0;h3=h3+d<<0;
h4=h4+e<<0;h5=h5+f<<0;h6=h6+g<<0;h7=h7+h<<0}while(!end);var hex=HEX_CHARS[h0>>28&15]+HEX_CHARS[h0>>24&15]+HEX_CHARS[h0>>20&15]+HEX_CHARS[h0>>16&15]+HEX_CHARS[h0>>12&15]+HEX_CHARS[h0>>8&15]+HEX_CHARS[h0>>4&15]+HEX_CHARS[h0&15]+HEX_CHARS[h1>>28&15]+HEX_CHARS[h1>>24&15]+HEX_CHARS[h1>>20&15]+HEX_CHARS[h1>>16&15]+HEX_CHARS[h1>>12&15]+HEX_CHARS[h1>>8&15]+HEX_CHARS[h1>>4&15]+HEX_CHARS[h1&15]+HEX_CHARS[h2>>28&15]+HEX_CHARS[h2>>24&15]+HEX_CHARS[h2>>20&15]+HEX_CHARS[h2>>16&15]+HEX_CHARS[h2>>12&15]+HEX_CHARS[h2>>
8&15]+HEX_CHARS[h2>>4&15]+HEX_CHARS[h2&15]+HEX_CHARS[h3>>28&15]+HEX_CHARS[h3>>24&15]+HEX_CHARS[h3>>20&15]+HEX_CHARS[h3>>16&15]+HEX_CHARS[h3>>12&15]+HEX_CHARS[h3>>8&15]+HEX_CHARS[h3>>4&15]+HEX_CHARS[h3&15]+HEX_CHARS[h4>>28&15]+HEX_CHARS[h4>>24&15]+HEX_CHARS[h4>>20&15]+HEX_CHARS[h4>>16&15]+HEX_CHARS[h4>>12&15]+HEX_CHARS[h4>>8&15]+HEX_CHARS[h4>>4&15]+HEX_CHARS[h4&15]+HEX_CHARS[h5>>28&15]+HEX_CHARS[h5>>24&15]+HEX_CHARS[h5>>20&15]+HEX_CHARS[h5>>16&15]+HEX_CHARS[h5>>12&15]+HEX_CHARS[h5>>8&15]+HEX_CHARS[h5>>
4&15]+HEX_CHARS[h5&15]+HEX_CHARS[h6>>28&15]+HEX_CHARS[h6>>24&15]+HEX_CHARS[h6>>20&15]+HEX_CHARS[h6>>16&15]+HEX_CHARS[h6>>12&15]+HEX_CHARS[h6>>8&15]+HEX_CHARS[h6>>4&15]+HEX_CHARS[h6&15];if(!is224)hex+=HEX_CHARS[h7>>28&15]+HEX_CHARS[h7>>24&15]+HEX_CHARS[h7>>20&15]+HEX_CHARS[h7>>16&15]+HEX_CHARS[h7>>12&15]+HEX_CHARS[h7>>8&15]+HEX_CHARS[h7>>4&15]+HEX_CHARS[h7&15];return hex};if(COMMON_JS){sha256.sha256=sha256;sha256.sha224=sha224;module.exports=sha256}else if(root){root.sha256=sha256;root.sha224=sha224}})(Bootstrapper.NZZ)},
1756284,[2574498],452504,[430195]);Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(typeof window.performance!=="undefined")window.performance.mark("js.bootstrap.init")},2215320,508285);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.Cookies=function(){return{domain:function(){return"."+location.host.split(".").slice(-2).join(".")}()||location.hostname,get:function(a,c){for(var b=document.cookie.split(";"),d=0;d<b.length;d++){var e=b[d].replace(/^\s+/,"").split("\x3d");if(e[0]==a)return c?e[1]:decodeURIComponent(e[1])}return""},set:function(a,c,b){document.cookie=a+"\x3d"+encodeURIComponent(c)+
(b?";expires\x3d"+b:"")+";path\x3d/;domain\x3d"+this.domain;return this.get(a)==c},test:function(a){return this.get(a)?!0:!1}}}()},1770006,281887);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.dataStore=window.dataStore||{};window.dataStore.cb=window.dataStore.cb||{};window.dataStore.cb.enabled=false;window.dataStore.cb.pingerLoaded=false;window.dataStore.cb.pingerDelay=false;window.dataStore.cb.mabtest=false;window.dataStore.cb.uid=8912;window.dataStore.cb.domain="";switch(Bootstrapper.ensightenOptions.publishPath){case "prod-nzz":window.dataStore.cb.enabled=
true;window.dataStore.cb.domain="nzz.ch";if(Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="home"||Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="category")window.dataStore.cb.mabtest=true;break;case "prod-blv":window.dataStore.cb.enabled=true;window.dataStore.cb.domain="bellevue.nzz.ch";if(Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="home"||Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType",
"value")=="category")window.dataStore.cb.mabtest=true;break;case "prod-nzzas":window.dataStore.cb.enabled=true;window.dataStore.cb.domain="nzzas.nzz.ch";if(Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="home"||Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="category")window.dataStore.cb.mabtest=true;break;case "prod-pil":window.dataStore.cb.enabled=true;window.dataStore.cb.domain="radiopilatus.ch";window.dataStore.cb.mabtest=true;
break;case "prod-fm1":window.dataStore.cb.enabled=true;window.dataStore.cb.domain="fm1today.ch";window.dataStore.cb.mabtest=true;break;case "prod-nlz":window.dataStore.cb.enabled=true;window.dataStore.cb.domain="luzernerzeitung.ch";if(Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="home"||Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="category")window.dataStore.cb.mabtest=true;break;case "prod-sgt":window.dataStore.cb.enabled=true;
window.dataStore.cb.domain="tagblatt.ch";if(Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="home"||Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="category")window.dataStore.cb.mabtest=true;break;case "prod-nzznews":window.dataStore.cb.enabled=true;window.dataStore.cb.mabtest=false;break;case "prod-vamp":window.dataStore.cb.enabled=true;window.dataStore.cb.mabtest=false;break;default:window.dataStore.cb.enabled=false}if(window.dataStore.cb.enabled){var _sf_async_config=
window._sf_async_config=window._sf_async_config||{};_sf_async_config.uid=window.dataStore.cb.uid;_sf_async_config.domain=window.dataStore.cb.domain;_sf_async_config.path=window.location.pathname;var _sf_startpt=(new Date).getTime();if(window.dataStore.cb.mabtest){if(typeof window.performance!=="undefined")window.performance.mark("js.chartbeatmab.start");document.write('\x3cscript type\x3d"text/javascript" src\x3d"//static.chartbeat.com/js/chartbeat_mab.js"\x3e\x3c/'+"script\x3e");if(typeof window.performance!==
"undefined")document.write("\x3cscript\x3ewindow.performance.mark('js.chartbeatmab.done');\x3c/"+"script\x3e")}}},2492104,[2574498],333800,[430195]);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.NZZ.eventTrigger=function(){try{if(typeof window.s!=="undefined"&&!window.dataStore.aa.trackCallbackRegistered){window.s.registerPreTrackCallback(function(){window.dataStore.aa.preTrack=true;if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("preTrackRegistered",3)});window.s.registerPostTrackCallback(function(){window.dataStore.aa.postTrack=
true;if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("postTrackRegistered",3)});window.dataStore.aa.trackCallbackRegistered=true}if(typeof window.digitalData!=="undefined"&&typeof window.digitalData.event==="object"&&window.digitalData.event!==null&&window.digitalData.event.length!==window.dataStore.event.processedCount)while(window.dataStore.event.processedCount<window.digitalData.event.length){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Start of event loop with event number "+
window.dataStore.event.processedCount,5);if(Bootstrapper.NZZ.getNested(window,"digitalData.event["+window.dataStore.event.processedCount+"].eventInfo.eventName","value")){if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("Event Number "+window.dataStore.event.processedCount+" called "+window.digitalData.event[window.dataStore.event.processedCount].eventInfo.eventName+" by Interval",3);window.dataStore.event.processedCount=Bootstrapper.NZZ.eventHandler(window.dataStore.event.processedCount);
if(window.dataStore.event.ingressedCount<window.dataStore.event.processedCount)Bootstrapper.NZZ.sendIngressData("event")}else{if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Unable to handle event"+window.dataStore.event.processedCount,2);window.dataStore.event.processedCount++}if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("End of event loop",5)}Bootstrapper.NZZ.adobeAnalyticsTracking()}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR eT: "+err.message,0);if(window.dataStore.event.processedCount<
Bootstrapper.NZZ.getNested(window,"digitalData.event","length"))window.dataStore.event.processedCount++;else if(Bootstrapper.NZZ.getNested(window,"dataStore.aa.event","length")>0)window.dataStore.aa.event[Object.keys(window.dataStore.aa.event)[0]].splice(0,1)}};Bootstrapper.NZZ.eventHandler=function(eventNumber){try{if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Start eventHandler with eventNumber "+eventNumber,5);var sessionID;var keepSessionAlive;while(eventNumber<window.digitalData.event.length){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Loop while eventNumber "+
eventNumber+"\x3c"+window.digitalData.event.length,5);keepSessionAlive=true;var event={};event.aa={};event.aa.data=[];event.aa.data.events=[];event.aa.data.list1=[];event.aa.data.list2=[];event.aa.singleEvent=true;var eventName=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.eventName","value");var eventAction=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.eventAction","value");var eventActionBefore=eventNumber>0?window.digitalData.event[eventNumber-
1].eventInfo.eventAction:"";var eventPosition=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.eventPosition","value");var eventValue=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.eventValue","value");var eventNonInteractive=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.eventNonInteractive","value");var eventType=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.type","value");
var eventTimeStamp=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.timeStamp","value");var eventComponentID=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.componentID","length")>0?window.digitalData.event[eventNumber].eventInfo.componentID:"Unknown Component ID";var eventComponentName=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].eventInfo.componentName","length")>0?window.digitalData.event[eventNumber].eventInfo.componentName:
"Unknown Component Name";var eventPrimaryCategory=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].category.primaryCategory","value");var eventSubCategory1=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].category.subCategory1","value");var eventSubCategory2=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].category.subCategory2","value");eventSubCategory2=eventSubCategory2.lastIndexOf("http")>-1?eventSubCategory2.substring(eventSubCategory2.lastIndexOf("http")):
eventSubCategory2;var eventSubCategory3=Bootstrapper.NZZ.getNested(window,"digitalData.event["+eventNumber+"].category.subCategory3","value");var eventString=((eventName!=null&&eventName!=""?eventName.toString().split(";").join(""):"")+";"+(eventAction!=null&&eventAction!=""?eventAction.toString().split(";").join(""):"")+";"+(eventPosition!=null&&eventPosition!=""?eventPosition.toString().split(";").join(""):"")+";"+(eventValue!=null&&eventValue!=""?eventValue.toString().split(";").join(""):"")+";"+
eventNonInteractive.toString().split(";").join("")+";"+(eventType!=null&&eventType!=""?eventType.toString().split(";").join(""):"")+";"+""+";"+(eventComponentID!=null&&eventComponentID!=""?eventComponentID.toString().split(";").join(""):"")+";"+(eventComponentName!=null&&eventComponentName!=""?eventComponentName.toString().split(";").join("").substr(0,120):"")+";"+(eventPrimaryCategory!=null&&eventPrimaryCategory!=""?eventPrimaryCategory.toString().split(";").join(""):"")+(eventSubCategory1!=null&&
eventSubCategory1!=""?("|"+eventSubCategory1).toString().split(";").join(""):"")+(eventSubCategory2!=null&&eventSubCategory2!=""?("|"+eventSubCategory2).toString().split(";").join(""):"")+(eventSubCategory3!=null&&eventSubCategory3!=""?("|"+eventSubCategory3).toString().split(";").join(""):"")).split(",").join("").replace(/\r?\n|\r/g," ");event.aa.data.list2.push(eventString);event.aa.data.prop17=(eventSubCategory1+"\x3e"+eventSubCategory2+"\x3e"+eventSubCategory3+"\x3e"+eventAction).split(",").join("").replace(/\r?\n|\r/g,
" ");event.aa.data.eVar17="D\x3dc17";var currentComponentIndex=0;var componentFound=false;if(typeof window.digitalData.component==="object")while(!componentFound&&currentComponentIndex<window.digitalData.component.length)if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+currentComponentIndex+"].componentInfo.componentID","value")==eventComponentID)componentFound=true;else currentComponentIndex++;var componentIndex=currentComponentIndex;var componentName;var componentSize=0;var componentString=
"";if(componentFound){if(Bootstrapper.NZZ.checkDebugLevel(4))Bootstrapper.NZZ.loggr("Component ID "+eventComponentID+" found",4);componentName=window.digitalData.component[componentIndex].componentInfo.componentName;componentSize=window.digitalData.component[componentIndex].componentInfo.componentSize;if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+"].componentInfo.componentID","value"))componentString=componentString+window.digitalData.component[componentIndex].componentInfo.componentID.toString().split(";").join("");
componentString=componentString+";";if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+"].componentInfo.componentName","value"))componentString=componentString+window.digitalData.component[componentIndex].componentInfo.componentName.toString().split(";").join("").substr(0,120);componentString=componentString+";";if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+"].componentInfo.componentURL","value"))if(window.dataStore.ingress.publishPath.split("-")[0]!=
"prod")componentString=componentString+window.digitalData.component[componentIndex].componentInfo.componentURL.toString().split(";").join("");componentString=componentString+";";if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+"].componentInfo.componentSize","value"))componentString=componentString+window.digitalData.component[componentIndex].componentInfo.componentSize.toString().split(";").join("");componentString=componentString+";";if(Bootstrapper.NZZ.getNested(window,
"digitalData.component["+componentIndex+"].category","typeof")!=="undefined"){if(window.digitalData.component[componentIndex].category.primaryCategory)componentString=componentString+window.digitalData.component[componentIndex].category.primaryCategory.toString().split(";").join("\u00a6");if(window.digitalData.component[componentIndex].category.subCategory1){componentString=componentString+"|";componentString=componentString+window.digitalData.component[componentIndex].category.subCategory1.toString().split(";").join("\u00a6")}if(window.digitalData.component[componentIndex].category.subCategory2){componentString=
componentString+"|";componentString=componentString+window.digitalData.component[componentIndex].category.subCategory2.toString().split(";").join("\u00a6")}if(window.digitalData.component[componentIndex].category.subCategory3){componentString=componentString+"|";componentString=componentString+window.digitalData.component[componentIndex].category.subCategory3.toString().split(";").join("\u00a6")}}componentString=componentString+";";if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+
"].category","typeof")!=="undefined"){if(window.digitalData.component[componentIndex].category.componentType)componentString=componentString+window.digitalData.component[componentIndex].category.componentType.toString().split(";").join("");if(window.digitalData.component[componentIndex].category.componentSubType1){componentString=componentString+"|";componentString=componentString+window.digitalData.component[componentIndex].category.componentSubType1.toString().split(";").join("")}if(window.digitalData.component[componentIndex].category.componentSubType2){componentString=
componentString+"|";componentString=componentString+window.digitalData.component[componentIndex].category.componentSubType2.toString().split(";").join("")}}componentString=componentString+";";if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+"].attributes","typeof")!=="undefined"){var componentAttributes=[];if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+"].attributes.issueTimestamp","typeof")!=="undefined"){componentAttributes.push("issueTimestamp\x3d"+
window.digitalData.component[componentIndex].attributes.issueTimestamp);if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+"].attributes.updateTimestamp","typeof")!=="undefined"&&window.digitalData.component[componentIndex].attributes.issueTimestamp!==window.digitalData.component[componentIndex].attributes.updateTimestamp)componentAttributes.push("updateTimestamp\x3d"+window.digitalData.component[componentIndex].attributes.updateTimestamp)}componentString=componentString+
componentAttributes.join("|")}event.aa.data.list1.push(componentString.split(",").join("").replace(/\r?\n|\r/g," "))}else{Bootstrapper.NZZ.loggr("TMS ERROR cF: Component ID "+eventComponentID+" not found in digitalData",0);componentName="Unknown Component";componentString=eventComponentID+";"+componentName+";;;;";event.aa.data.list1.push(componentString.split(",").join("").replace(/\r?\n|\r/g," "))}if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("Event on '"+eventName+"' with event number '"+
eventNumber+"' the "+(eventNonInteractive?"non-interactive":"interactive")+" Action '"+eventAction+"' (Value '"+eventValue+"' at Position '"+eventPosition+"' of '"+componentSize+"') for Component ID '"+eventComponentID+"' called '"+eventComponentName+"'",3);var nmxPath;if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("It's a "+eventName,2);if(eventAction=="download"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event151: Download",2);event.aa.data.events.push("event151")}if(eventName==
"Article Interaction"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Action: "+eventAction,2);if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Article View",6);if(eventAction=="display"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event511: Article View",2);event.aa.data.events.push("event511");if(componentFound&&(window.digitalData.component[componentIndex].attributes.isTruncatedView===true||window.digitalData.component[componentIndex].attributes.isTruncatedView===
"true")){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event513: Reduced Article View",2);event.aa.data.events.push("event513")}else{if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event512: Full Article View",2);event.aa.data.events.push("event512")}}if(eventAction=="complete"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event: Article Complete",2);event.aa.data.events.push("event514")}}if(eventName=="Image Gallery Interaction"){nmxPath=
"/image/gallery";if(eventNonInteractive===false&&(eventAction=="display"||eventAction=="zoom")&&!(eventAction=="display"&&Bootstrapper.NZZ.getNested(window,"digitalData.page.category.pageType","value")=="gallery"&&Bootstrapper.NZZ.getNested(window,"digitalStore.imageGallery.currentID","value")!==eventComponentID))Bootstrapper.NZZ.netMetrixAudit(nmxPath,eventAction,eventActionBefore);switch(eventAction){case "display":if(Bootstrapper.NZZ.getNested(window,"digitalStore.imageGallery.currentID","value")==
eventComponentID)event.aa.data.events.push("event422");else{event.aa.data.events.push("event421");event.aa.data.events.push("event422");window.digitalStore={"imageGallery":{"currentID":eventComponentID}};if(Bootstrapper.ensightenOptions.publishPath.split("-")[1]=="nzz"||Bootstrapper.ensightenOptions.publishPath.split("-")[1]=="blv"){var cb_sections=[];if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+componentIndex+"].category","typeof")!=="undefined"){if(window.digitalData.component[componentIndex].category.primaryCategory)cb_sections.push(window.digitalData.component[componentIndex].category.primaryCategory);
if(window.digitalData.component[componentIndex].category.subCategory1)cb_sections.push(window.digitalData.component[componentIndex].category.subCategory1);if(window.digitalData.component[componentIndex].category.subCategory2)cb_sections.push(window.digitalData.component[componentIndex].category.subCategory2)}cbComponentID=eventComponentID.substring(eventComponentID.length-3,eventComponentID.length)=="img"?eventComponentID.substring(eventComponentID.length-3):eventComponentID;Bootstrapper.NZZ.chartBeatVirtualPage("/api/articles/"+
cbComponentID,eventComponentName,cb_sections,undefined,window.digitalData.component[componentIndex].category.componentType)}}break;case "close":Bootstrapper.NZZ.chartBeatVirtualPage(Bootstrapper.data.resolve("12006"),window.document.title,Bootstrapper.data.resolve("10320"),Bootstrapper.data.resolve("10252"),Bootstrapper.data.resolve("8868"));break}}if(eventName=="Social Media Interaction"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Action: "+eventAction,2);if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Social Shares",
6);if(eventAction=="share"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event413: Social Shares",2);event.aa.data.events.push("event413")}}if(eventName=="Storytelling Interaction"){nmxPath="/storytelling/"+componentName;if(eventNonInteractive===false)Bootstrapper.NZZ.netMetrixAudit(nmxPath,eventAction,eventActionBefore)}if(eventName=="Newsletter Interaction"&&eventAction=="subscribe"){window.dataStore.nl={};window.dataStore.nl.name=eventValue;switch(eventValue){case "NZZ am Morgen":window.dataStore.nl.convLabel=
"nt0bCJ23n28Q6dzC8gM";break;case "NZZ am Abend":window.dataStore.nl.convLabel="w8fcCLy1jG8Q6dzC8gM";break;case "NZZ am Sonntag":window.dataStore.nl.convLabel="oW9-CNG1jG8Q6dzC8gM";break;case "Der andere Blick":window.dataStore.nl.convLabel="X5KhCPu-n28Q6dzC8gM";break;case "Wirtschaft":window.dataStore.nl.convLabel="r51FCNi5n28Q6dzC8gM";break;case "International":window.dataStore.nl.convLabel="ujpbCM-5n28Q6dzC8gM";break;case "Z\u00fcrich":window.dataStore.nl.convLabel="Bqx9CKe7n28Q6dzC8gM";break;case "Sport":window.dataStore.nl.convLabel=
"wpa7CPO5jG8Q6dzC8gM";break;case "Digital":window.dataStore.nl.convLabel="YA9LCMe_pW8Q6dzC8gM";break;case "NZZ Bellevue":window.dataStore.nl.convLabel="ELHfCNq-n28Q6dzC8gM";break;case "NZZ Folio":window.dataStore.nl.convLabel="iGgbCOy-n28Q6dzC8gM";break;default:window.dataStore.nl.convLabel=""}Bootstrapper.ensEvent.trigger("digitalData - Newsletter Subscription")}if(eventName=="Form Interaction"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Action: "+eventAction,2);if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Form Start",
6);if(eventAction=="display"&&eventPosition=="1"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event171: Form Start",2);event.aa.data.events.push("event171")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Form Success",6);if((eventAction=="confirm"||eventAction=="success")&&componentFound&&(eventPosition==window.digitalData.component[componentIndex].componentInfo.componentSize||eventSubCategory3.search("confirmation")>-1)){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event175: Form Success",
2);event.aa.data.events.push("event175")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Form Error",6);if(eventAction=="error"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event176: Form Error",2);event.aa.data.events.push("event176")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Form Activation",6);if((eventAction=="confirm"||eventAction=="success")&&eventSubCategory2=="activation"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event178: Form Activation",
2);event.aa.data.events.push("event178")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Login Success",6);if((eventAction=="confirm"||eventAction=="success")&&eventSubCategory2=="login"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event271: Login Success",2);event.aa.data.events.push("event271")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Login Error",
6);if(eventAction=="error"&&eventSubCategory2=="login"&&eventSubCategory3=="any"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event272: Login Error",2);event.aa.data.events.push("event272")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Logout Success",6);if((eventAction=="confirm"||eventAction=="success")&&eventSubCategory2=="logout"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event273: Logout Success",
2);event.aa.data.events.push("event273")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Logout Error",6);if(eventAction=="error"&&eventSubCategory2=="logout"&&eventSubCategory3=="any"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event274: Logout Error",2);event.aa.data.events.push("event274")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Registration Prompt",6);if(eventAction=="display"&&eventSubCategory2=="registration"&&
eventSubCategory3=="prompt"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event281: Registration Prompt",2);event.aa.data.events.push("event281");Bootstrapper.ensEvent.trigger("digitalData - Registration Prompt")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Registration Success",6);if((eventAction=="confirm"||eventAction=="success")&&eventSubCategory2=="registration"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event275: Registration Success",
2);event.aa.data.events.push("event275");Bootstrapper.ensEvent.trigger("digitalData - Registration Success")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Registration Error",6);if(eventAction=="error"&&eventSubCategory2=="registration"&&eventSubCategory3=="any"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event276: Registration Error",2);event.aa.data.events.push("event276")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Activation Success",
6);if((eventAction=="confirm"||eventAction=="success")&&eventSubCategory2=="activation"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event277: Activation Success",2);event.aa.data.events.push("event277")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Activation Error",6);if(eventAction=="error"&&eventSubCategory2=="activation"&&eventSubCategory3=="any"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event278: Activation Error",
2);event.aa.data.events.push("event278")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Order Prompt",6);if(eventAction=="display"&&eventPrimaryCategory=="product"&&eventSubCategory1=="shop"&&eventSubCategory2=="order"&&eventSubCategory3=="prompt"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set event283: Order Prompt",2);event.aa.data.events.push("event283")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Cart Addition",
6);if(eventAction=="add"&&eventPrimaryCategory=="product"&&eventSubCategory1=="shop"&&eventSubCategory2=="order"&&eventSubCategory3=="cart"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set scOpen/scAdd: Cart Addition",2);if(!(window.location.host=="abo.nzz.ch"&&window.location.pathname=="/epaper/")){event.aa.data.events.push("scOpen");event.aa.data.events.push("scAdd");event.aa.data.products=Bootstrapper.data.resolve("11209").split(",")}else if(window.location.host=="abo.nzz.ch"&&
window.location.pathname=="/epaper/"&&Bootstrapper.data.extract("reopen","param")!="form"){event.aa.data.events.push("scOpen");event.aa.data.events.push("scAdd");event.aa.data.events.push("scView");event.aa.data.events.push("scCheckout");if(Bootstrapper.NZZ.getNested(window,"digitalData.cart.price.paymentMethod","typeof")!=="undefined")event.aa.data.eVar88=window.digitalData.cart.price.paymentMethod;event.aa.data.products=Bootstrapper.data.resolve("11209").split(",")}else{eventNumber++;continue}window.dataStore.aa.checkout_event=
true;Bootstrapper.ensEvent.trigger("digitalData - Cart Addition")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Order Payment",6);if(eventAction=="display"&&eventPrimaryCategory=="product"&&eventSubCategory1=="shop"&&eventSubCategory2=="order"&&eventSubCategory3=="payment"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set scView: Order Payment",2);event.aa.data.events.push("scView");event.aa.data.products=Bootstrapper.data.resolve("11209").split(",");
window.dataStore.aa.checkout_event=true;Bootstrapper.ensEvent.trigger("digitalData - Order Payment")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Order Overview",6);if(eventAction=="display"&&eventPrimaryCategory=="product"&&eventSubCategory1=="shop"&&eventSubCategory2=="order"&&eventSubCategory3=="overview"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set scCheckout: Order Overview",2);event.aa.data.events.push("scCheckout");if(Bootstrapper.NZZ.getNested(window,
"digitalData.cart.price.paymentMethod","typeof")!=="undefined")event.aa.data.eVar88=window.digitalData.cart.price.paymentMethod;event.aa.data.products=Bootstrapper.data.resolve("11209").split(",");window.dataStore.aa.checkout_event=true;Bootstrapper.ensEvent.trigger("digitalData - Order Overview")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Order Success",6);if((eventAction=="confirm"||eventAction=="success")&&eventPrimaryCategory=="product"&&eventSubCategory1=="shop"&&
eventSubCategory2=="order"&&(eventSubCategory3=="success"||eventSubCategory3=="confirmation")){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set purchase: Order Success",2);if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("window.digitalData.transaction: "+JSON.stringify(window.digitalData.transaction,null,4),5);event.aa.data.purchaseID=Bootstrapper.NZZ.getNested(window,"digitalData.transaction.transactionID","typeof")!=="undefined"?window.digitalData.transaction.transactionID.slice(-20):
"";if(Bootstrapper.NZZ.getNested(window,"digitalData.transaction.total.paymentMethod","typeof")!=="undefined")event.aa.data.eVar88=window.digitalData.transaction.total.paymentMethod;if(Bootstrapper.NZZ.getNested(window,"digitalData.transaction.profile.profileInfo.profileType","typeof")!=="undefined")event.aa.data.eVar89=window.digitalData.transaction.profile.profileInfo.profileType;if(Bootstrapper.NZZ.getNested(window,"digitalData.transaction.profile.profileInfo.isNewRegistration","value")!==false)event.aa.data.eVar90=
"new registration";event.aa.data.events.push("purchase");event.aa.data.products=Bootstrapper.data.resolve("11209").split(",");window.dataStore.aa.checkout_event=true;Bootstrapper.ensEvent.trigger("digitalData - Order Success")}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Cross-Sell Offer",6);if(eventAction=="display"&&eventPrimaryCategory=="product"&&eventSubCategory1=="shop"&&eventSubCategory2=="order"&&eventSubCategory3=="cross-sell offer"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set events for: Cross-Sell Offer",
2);event.aa.data.events.push("event811");event.aa.data.events.push("event812");var backupTransaction=window.digitalData.transaction;delete window.digitalData.transaction;var splitProducts=Bootstrapper.data.resolve("11209").split(",");window.digitalData.transaction=backupTransaction;var crossSellProduct=window.digitalData.transaction.item[0].productInfo.productID+"\u00b7"+window.digitalData.transaction.item[0].attributes.plan;for(i=0;i<splitProducts.length;i++){for(j=(splitProducts[i].match(/;/g)||
[]).length;j<5;j++)splitProducts[i]=splitProducts[i]+";";splitProducts[i]=splitProducts[i]+"eVar81\x3d"+crossSellProduct}event.aa.data.products=splitProducts.join(",");if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("event.aa.data.products: "+event.aa.data.products,3);event.aa.data.singleEvent=true}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Cross-Sell Cart Addition",6);if(eventAction=="add"&&eventPrimaryCategory=="product"&&eventSubCategory1=="shop"&&
eventSubCategory2=="order"&&eventSubCategory3=="cross-sell cart"){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set cart addition: Cross-Sell Cart Addition",2);event.aa.data.events.push("scOpen");event.aa.data.events.push("scAdd");event.aa.data.events.push("scView");event.aa.data.events.push("scCheckout");event.aa.data.events.push("event813");event.aa.data.products=Bootstrapper.data.resolve("11209").split(",");window.dataStore.aa.checkout_event=true}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("Check event: Cross-Sell Order Success",
5);if((eventAction=="confirm"||eventAction=="success")&&eventPrimaryCategory=="product"&&eventSubCategory1=="shop"&&eventSubCategory2=="order"&&(eventSubCategory3=="cross-sell success"||eventSubCategory3=="cross-sell confirmation")){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Set purchase: Order Success",2);if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("window.digitalData.transaction: "+JSON.stringify(window.digitalData.transaction,null,4),5);event.aa.data.purchaseID=
Bootstrapper.NZZ.getNested(window,"digitalData.transaction.transactionID","typeof")!=="undefined"?window.digitalData.transaction.transactionID.slice(-21,-1):"";if(Bootstrapper.NZZ.getNested(window,"digitalData.transaction.total.paymentMethod","typeof")!=="undefined")event.aa.data.eVar88=window.digitalData.transaction.total.paymentMethod;if(Bootstrapper.NZZ.getNested(window,"digitalData.transaction.profile.profileInfo.profileType","typeof")!=="undefined")event.aa.data.eVar89=window.digitalData.transaction.profile.profileInfo.profileType;
if(Bootstrapper.NZZ.getNested(window,"digitalData.transaction.profile.profileInfo.isNewRegistration","value")!==false)event.aa.data.eVar90="new registration";event.aa.data.events.push("purchase");event.aa.data.events.push("event814");event.aa.data.products=Bootstrapper.data.resolve("11209").split(",");window.dataStore.aa.checkout_event=true;event.aa.singleEvent=true;Bootstrapper.ensEvent.trigger("digitalData - Order Success")}if(Bootstrapper.NZZ.checkDebugLevel(1))Bootstrapper.NZZ.loggr("Event(s) in event.aa.data.events: "+
event.aa.data.events.join(","),1)}if(eventName=="Video Player Interaction"){event.aa.data={};var videoName=componentName+" ("+eventComponentID+")";var playerType=eventSubCategory1;var eventPositionRounded=Math.round(eventPosition);nmxPath=eventSubCategory1=="Playlist Player"?"/video/widget":"/video/news";switch(eventAction){case "mediaReady":s.Media.open(videoName,componentSize,playerType);if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr('mediaReady -\x3e s.Media.open("'+videoName+'", '+
componentSize+', "'+playerType+'")',2);s.Media.play(videoName,eventPositionRounded);if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr('mediaReady -\x3e s.Media.play("'+videoName+'", '+eventPositionRounded+")",2);break;case "changeMedia":s.Media.open(videoName,componentSize,playerType);if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr('changeMedia -\x3e s.Media.open("'+videoName+'", '+componentSize+', "'+playerType+'")',2);s.Media.play(videoName,eventPositionRounded);if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr('changeMedia -\x3e s.Media.play("'+
videoName+'", '+eventPositionRounded+")",2);break;case "doPlay":s.Media.play(videoName,eventPositionRounded);if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr('doPlay -\x3e s.Media.play("'+videoName+'", '+eventPositionRounded+")",2);break;case "doPause":if(eventActionBefore!=="doStop"&&eventActionBefore!=="playerSeekEnd"&&eventPositionRounded>=componentSize&&eventPositionRounded<=0)Bootstrapper.NZZ.netMetrixAudit(nmxPath,eventAction,eventActionBefore);s.Media.stop(videoName,eventPositionRounded);
if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr('doPause -\x3e s.Media.stop("'+videoName+'", '+eventPositionRounded+")",2);break;case "playerSeekEnd":Bootstrapper.NZZ.netMetrixAudit(nmxPath,eventAction,eventActionBefore);break;case "doStop":s.Media.stop(videoName,eventPositionRounded);if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr('doStop -\x3e s.Media.stop("'+videoName+'", '+eventPositionRounded+")",2);break;case "playerPlayEnd":s.Media.close(videoName);if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr('playerPlayEnd -\x3e s.Media.close("'+
videoName+'")',2);break;case "openFullScreen":Bootstrapper.NZZ.netMetrixAudit(nmxPath,eventAction,eventActionBefore);break;case "closeFullScreen":if(!isMobile.any)Bootstrapper.NZZ.netMetrixAudit(nmxPath,eventAction,eventActionBefore);break}}if(eventName=="App Lifecycle")switch(eventAction){case "start":window.dataStore.visibility.appLifecycleIsBackground=false;break;case "active":window.dataStore.visibility.appLifecycleIsBackground=false;break;case "inactive":window.dataStore.visibility.appLifecycleIsBackground=
true;break;case "background":window.dataStore.visibility.appLifecycleIsBackground=true;break}if(eventName=="TMS Event"&&eventAction=="loggr"&&window.digitalData.component[componentIndex].category.subCategory2===0)event.aa.data.events.push("event999");if(Object.keys(event.aa.data).length){window.dataStore.aa.event[eventComponentID]=window.dataStore.aa.event[eventComponentID]||[];window.dataStore.aa.event[eventComponentID].push(event.aa)}if(keepSessionAlive===false&&Bootstrapper.NZZ.getNested(window,
"dataStore.p4m.currentSessionID","typeof")!=="undefined")sessionID=window.dataStore.p4m.currentSessionID;else sessionID=Bootstrapper.NZZ.getSessionID();window.digitalData.event[eventNumber].attributes=window.digitalData.event[eventNumber].attributes||{};window.digitalData.event[eventNumber].attributes.sessionID=sessionID;eventNumber++;if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("End of while loop",5)}if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Call adobeAnalyticsTracking",
5);Bootstrapper.NZZ.adobeAnalyticsTracking();if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("End of eventHandler!",5);return eventNumber}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR eH: "+err.message,0)}}},2571521,[1770006,2574498],281205,[281887,430195]);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.NZZ=Bootstrapper.NZZ||{};window.dataStore=window.dataStore||{};window.dataStore.timestamp=window.dataStore.timestamp||{};window.dataStore.timestamp.initDate=new Date;window.dataStore.timestamp.initNow=typeof window.performance!=="undefined"&&typeof window.performance.now=="function"?performance.now():Date.now();Bootstrapper.NZZ.getCurrentDate=function(){try{return new Date(window.dataStore.timestamp.initDate-
window.dataStore.timestamp.initNow+(typeof window.performance!=="undefined"&&typeof window.performance.now=="function"?performance.now():Date.now()))}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR gCD: "+err.message,0);return new Date}};Bootstrapper.NZZ.initDataStore=function(){window.dataStore.cache={};window.dataStore.visibility={};window.dataStore.visibility.viewport=[];window.dataStore.visibility.currentState=document.visibilityState;window.dataStore.visibility.lastState="";window.dataStore.visibility.changeCount=
0;window.dataStore.visibility.visibleTime=0;window.dataStore.visibility.hiddenTime=0;window.dataStore.visibility.updateTS=Bootstrapper.NZZ.getCurrentDate();window.dataStore.visibility.appLifecycleIsBackground=false;window.dataStore.interval=window.dataStore.interval||{};window.dataStore.trigger={};window.dataStore.trigger.vIDa=false;window.dataStore.trigger.vID=false;window.dataStore.trigger.vIDc=true;window.dataStore.ingress=window.dataStore.ingress||{};window.dataStore.ingress.initTS=Bootstrapper.NZZ.getCurrentDate();
window.dataStore.ingress.stats={};window.dataStore.ingress.stats.trigger={};window.dataStore.ingress.stats.session=window.dataStore.ingress.stats.session||{};window.dataStore.ingress.stats.session.sessionNumberTotal=window.dataStore.ingress.stats.session.sessionNumberTotal||Bootstrapper.NZZ.getSessionNumber();window.dataStore.ingress.stats.instance=window.dataStore.ingress.stats.instance||{};window.dataStore.ingress.stats.instance.instanceNumberSession=window.dataStore.ingress.stats.instance.instanceNumberSession||
0;window.dataStore.ingress.stats.instance.instanceNumberTotal=window.dataStore.ingress.stats.instance.instanceNumberTotal||0;window.dataStore.ingress.session=window.dataStore.ingress.session||{};window.dataStore.ingress.session.sessionCount=window.dataStore.ingress.session.sessionCount||0;window.dataStore.ingress.session.array=window.dataStore.ingress.session.array||[];window.dataStore.ingress.publishPath=window.dataStore.ingress.publishPath||Bootstrapper.ensightenOptions.publishPath;window.dataStore.debug=
window.dataStore.debug||{};window.dataStore.debug.level=window.dataStore.debug.level||0;window.dataStore.debug.jsonParser=window.dataStore.debug.jsonParser||false;window.dataStore.debug.pixel=window.dataStore.debug.pixel||false;window.dataStore.p4m=window.dataStore.p4m||{};window.dataStore.aa=window.dataStore.aa||{};window.dataStore.aa.event={};window.dataStore.aa.trackCallbackRegistered=window.dataStore.aa.trackCallbackRegistered||false;window.dataStore.aa.preTrack=false;window.dataStore.aa.postTrack=
false;window.dataStore.aa.firstRequest=true;window.dataStore.aa.checkout_event=false;window.dataStore.currentCustomLinkLength=0;window.dataStore.event={};window.dataStore.event.ingressedCount=0;window.dataStore.event.processedCount=0};Bootstrapper.NZZ.getNested=function(obj,path,func){try{var result;var available=true;var nested=[];if(path.length>0)nested=path.split("[").join(".").split("]").join("").split(".");for(var i=0;i<nested.length;i++){if(!obj||!obj.hasOwnProperty(nested[i])){available=false;
if(Bootstrapper.NZZ.checkDebugLevel(7))Bootstrapper.NZZ.loggr("getNested for path '"+path+"' is undefined.",7);break}obj=obj[nested[i]]}switch(func){case "value":result=available?obj:"";break;case "typeof":result=available?typeof obj:"undefined";break;case "length":if(available&&obj===null)result=0;else if(typeof obj=="object")result=available?window.Object.keys(obj).length:0;else result=available&&typeof obj!=="undefined"?obj.toString().length:0;break;default:result="undefined"}if(Bootstrapper.NZZ.checkDebugLevel(7))Bootstrapper.NZZ.loggr("getNested result for path '"+
path+"': "+result,7);return result}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR gN: "+err.message,0)}};Bootstrapper.NZZ.getUrlParams=function(url){var query;var pos=url.indexOf("?");if(pos==-1)return[];query=url.substr(pos+1);var result={};query.split("\x26").forEach(function(part){if(!part)return;part=part.split("+").join(" ");var eq=part.indexOf("\x3d");var key=eq>-1?part.substr(0,eq):part;var val=eq>-1?decodeURIComponent(part.substr(eq+1)):"";var from=key.indexOf("[");if(from==-1)result[decodeURIComponent(key)]=
val;else{var to=key.indexOf("]");var index=decodeURIComponent(key.substring(from+1,to));key=decodeURIComponent(key.substring(0,from));if(!result[key])result[key]=[];if(!index)result[key].push(val);else result[key][index]=val}});return result};Bootstrapper.NZZ.hasComponent=function(field,value){if(Bootstrapper.NZZ.getNested(window,"digitalData.component","length")>0)for(var i=0;i<window.digitalData.component.length;i++)if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+i+"]."+field,"value")===
value)return true;return false};Bootstrapper.NZZ.getComponent=function(field,value){if(Bootstrapper.NZZ.getNested(window,"digitalData.component","length")>0)for(var i=0;i<window.digitalData.component.length;i++)if(Bootstrapper.NZZ.getNested(window,"digitalData.component["+i+"]."+field,"value")===value)return i;return false};Bootstrapper.NZZ.hasEvent=function(field,value){if(Bootstrapper.NZZ.getNested(window,"digitalData.event","length")>0)for(var i=0;i<window.digitalData.event.length;i++)if(Bootstrapper.NZZ.getNested(window,
"digitalData.event["+i+"]."+field,"value")===value)return true;return false};Bootstrapper.NZZ.getIngressInstance=function(forceNew){forceNew=typeof forceNew!=="undefined"?forceNew:false;var currentDate=Bootstrapper.NZZ.getCurrentDate();var instance;if(!window.dataStore.ingress.instance){var cryptoString="";var cryptoArray=[];try{if(typeof window.crypto!=="undefined"&&typeof window.crypto.getRandomValues=="function"){cryptoArray=window.crypto.getRandomValues(new Uint32Array(4));if(Bootstrapper.NZZ.getNested(cryptoArray,
"join","typeof")=="function"&&cryptoArray.length>0)cryptoString=cryptoArray.join("-");else if(typeof cryptoArray!=="undefined"&&cryptoArray.length>0)for(i=0;i<cryptoArray.length;i++)cryptoString=cryptoString+cryptoArray[i]+(cryptoArray.length-i==1?"":"-")}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR gIIa (userAgent: "+navigator.userAgent+"): "+err.message,0)}if(cryptoString.length===0)try{cryptoString=Math.floor(Math.random()*1E7)+"-"+Bootstrapper.NZZ.sha224(navigator.userAgent)+"-"+Bootstrapper.NZZ.sha224(window.location.href)}catch(err){var randomItems=
["S","h","o","e","s","t","a","r",1977];var cryptoItem=[];for(i=0;i<4;i++)cryptoItem[i]=randomItems[Math.floor(Math.random()*randomItems.length)];cryptoString=Math.floor(Math.random()*1E7)+"-"+cryptoItem[0]+"-"+cryptoItem[1]+"-"+cryptoItem[2]+"-"+cryptoItem[3];Bootstrapper.NZZ.loggr("TMS ERROR gIIb (userAgent: "+navigator.userAgent+" / cryptoString: "+cryptoString+"): "+err.message,0)}instance=currentDate.getTime()+"_"+cryptoString;Bootstrapper.NZZ.increaseInstanceNumber()}else if(forceNew){instance=
currentDate.getTime()+window.dataStore.ingress.instance.substr(window.dataStore.ingress.instance.search("_"));Bootstrapper.NZZ.increaseInstanceNumber()}else instance=window.dataStore.ingress.instance;return instance};Bootstrapper.NZZ.getPerformance=function(){try{var performance={};if(typeof window.performance!=="undefined"&&typeof window.performance.getEntriesByName=="function"){if(window.performance.getEntriesByType("navigation").length>0)performance.navigation=JSON.parse(JSON.stringify(window.performance.getEntriesByType("navigation")[0]));
var performanceMarkArray=window.performance.getEntriesByType("mark");var performanceMarkPrefix="";if(performanceMarkArray.length>0){performance.mark=JSON.parse(JSON.stringify(performanceMarkArray));for(i=0;i<performanceMarkArray.length;i++)if(performanceMarkArray[i].name.split(".")[2]=="start"){performanceMarkPrefix=performanceMarkArray[i].name.split(".")[0]+"."+performanceMarkArray[i].name.split(".")[1];if(window.performance.getEntriesByName(performanceMarkPrefix+".complete").length<1&&window.performance.getEntriesByName(performanceMarkPrefix+
".start").length>0&&window.performance.getEntriesByName(performanceMarkPrefix+".done").length)window.performance.measure(performanceMarkPrefix+".complete",performanceMarkPrefix+".start",performanceMarkPrefix+".done");if(window.performance.getEntriesByName(performanceMarkPrefix+".load").length<1&&window.performance.getEntriesByName(performanceMarkPrefix+".start").length>0&&window.performance.getEntriesByName(performanceMarkPrefix+".init").length)window.performance.measure(performanceMarkPrefix+".load",
performanceMarkPrefix+".start",performanceMarkPrefix+".init");performanceMarkPrefix=""}}if(window.performance.getEntriesByType("measure").length>0)performance.measure=JSON.parse(JSON.stringify(window.performance.getEntriesByType("measure")))}return performance}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR gP: "+err.message,0)}};Bootstrapper.NZZ.getEnsightenInfo=function(){try{var ensighten={};ensighten.options=JSON.parse(JSON.stringify(Bootstrapper.ensightenOptions));return ensighten}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR gEI: "+
err.message,0)}};Bootstrapper.NZZ.increaseInstanceNumber=function(){var instanceNumberSession=0;var instanceNumberTotal=0;var currentDate=Bootstrapper.NZZ.getCurrentDate();var cookieExpDate=Bootstrapper.NZZ.getCurrentDate();cookieExpDate.setDate(currentDate.getDate()+3650);if(Bootstrapper.Cookies.test("p4m_inos")){instanceNumberSession=Number(Bootstrapper.Cookies.get("p4m_inos"));instanceNumberSession++}else instanceNumberSession=1;Bootstrapper.Cookies.set("p4m_inos",instanceNumberSession,cookieExpDate);
window.dataStore.ingress.stats.instance.instanceNumberSession=instanceNumberSession;if(Bootstrapper.Cookies.test("p4m_inot")){instanceNumberTotal=Number(Bootstrapper.Cookies.get("p4m_inot"));instanceNumberTotal++}else instanceNumberTotal=1;Bootstrapper.Cookies.set("p4m_inot",instanceNumberTotal,cookieExpDate);window.dataStore.ingress.stats.instance.instanceNumberTotal=instanceNumberTotal};Bootstrapper.NZZ.getSessionNumber=function(){var sessionNumberTotal=0;if(Bootstrapper.Cookies.test("p4m_snot"))sessionNumberTotal=
Number(Bootstrapper.Cookies.get("p4m_snot"));else sessionNumberTotal=0;return sessionNumberTotal};Bootstrapper.NZZ.increaseSessionNumber=function(){var sessionNumberTotal=0;var currentDate=Bootstrapper.NZZ.getCurrentDate();var cookieExpDate=Bootstrapper.NZZ.getCurrentDate();cookieExpDate.setDate(currentDate.getDate()+3650);if(Bootstrapper.Cookies.test("p4m_snot")){sessionNumberTotal=Number(Bootstrapper.Cookies.get("p4m_snot"));sessionNumberTotal++}else sessionNumberTotal=1;Bootstrapper.Cookies.set("p4m_snot",
sessionNumberTotal,cookieExpDate);window.dataStore.ingress.stats.session.sessionNumberTotal=sessionNumberTotal};Bootstrapper.NZZ.getSessionID=function(forceNew){forceNew=typeof forceNew!=="undefined"?forceNew:false;var sessionID;var currentDate=Bootstrapper.NZZ.getCurrentDate();var sessionTimeout=30;var cookieExpDate=Bootstrapper.NZZ.getCurrentDate();cookieExpDate.setTime(currentDate.getTime()+sessionTimeout*60*1E3);var sessionArrayLength=Object.keys(window.dataStore.ingress.session.array).length;
if(Bootstrapper.Cookies.test("p4m_sid")&&forceNew===false){var cookieSessionTimeout=new Date(Bootstrapper.Cookies.get("p4m_sid").split(";")[1]);if(cookieSessionTimeout<currentDate){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Session cookie exists but sessionTimeout is achieved: forceNew \x3d true",5);forceNew=true}else{sessionID=Bootstrapper.Cookies.get("p4m_sid").split(";")[0];if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Get sessionID ("+sessionID+" ) from cookie",
5)}}else{if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Session cookie does not exist and forceNew is: "+forceNew,5);forceNew=true}if(forceNew===true){if(typeof window.dataStore.p4m.currentSessionID!=="undefined"){sessionID=window.dataStore.p4m.currentSessionID+"+";if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Session ID ("+sessionID+") generated from window.dataStore.p4m.currentSessionID",5)}else{sessionID=Bootstrapper.NZZ.getIngressInstance();if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("new Session ID ("+
sessionID+") generated from ingress.instance",5)}Bootstrapper.NZZ.increaseSessionNumber();Bootstrapper.Cookies.set("p4m_inos",1,currentDate.getDate()+3650);window.dataStore.ingress.stats.instance.instanceNumberSession=1}Bootstrapper.Cookies.set("p4m_sid",sessionID+";"+cookieExpDate,cookieExpDate);window.dataStore.p4m.currentSessionID=sessionID;if(sessionArrayLength!==0&&window.dataStore.ingress.session.array[sessionArrayLength-1].sessionID==window.dataStore.p4m.currentSessionID)window.dataStore.ingress.session.array[sessionArrayLength-
1].updateTS=currentDate;else{var newSession={};newSession.sessionID=sessionID;newSession.initiTS=currentDate;newSession.updateTS=currentDate;window.dataStore.ingress.session.array.push(newSession);window.dataStore.ingress.session.sessionCount=window.dataStore.ingress.session.array.length}return sessionID};Bootstrapper.NZZ.getUserGroup=function(){try{var currentDate=Bootstrapper.NZZ.getCurrentDate();var subscriptionExpDays=30;var cookieExpDate=Bootstrapper.NZZ.getCurrentDate();cookieExpDate.setDate(currentDate.getDate()+
3650);var cookieName="ens_subscrst";var cookieSubscriptionExpDate=Bootstrapper.NZZ.getCurrentDate();var subscriptionExpDate=Bootstrapper.NZZ.getCurrentDate();var c1Status="anonymous";var cookieStatus="anonymous";var c1SubscriptionStatus=Bootstrapper.NZZ.getNested(window,"digitalData.user[0].profile[0].attributes.c1.subscriptionStatus","value");var c1ProfileID=Bootstrapper.NZZ.getNested(window,"digitalData.user[0].profile[0].profileInfo.profileID","value");if(c1SubscriptionStatus===true||c1SubscriptionStatus===
"true")c1Status="subscriber";else if(c1ProfileID!==null&&c1ProfileID!=="")c1Status="registered";if(Bootstrapper.Cookies.test(cookieName)){cookieStatus=Bootstrapper.Cookies.get(cookieName).split(";")[0];cookieSubscriptionExpDate=new Date(Bootstrapper.Cookies.get(cookieName).split(";")[1]);if(c1Status!="subscriber"&&cookieStatus=="subscriber"&&cookieSubscriptionExpDate<currentDate)cookieStatus="registered";else if(c1Status!=="anonymous")cookieStatus=c1Status}else cookieStatus=c1Status;if(c1Status==
"subscriber")subscriptionExpDate.setDate(currentDate.getDate()+subscriptionExpDays);else subscriptionExpDate=cookieSubscriptionExpDate;Bootstrapper.Cookies.set(cookieName,cookieStatus+";"+subscriptionExpDate,cookieExpDate);return cookieStatus}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR gUG: "+err.message,0);return"tms error"}};Bootstrapper.NZZ.netMetrixAudit=function(path,eventAction,eventActionBefore){try{if(window.nmx_enabled===true){if(Bootstrapper.ensightenOptions.publishPath.split("-")[0]!==
"prod"){window.nmx_domain="wemfbox-test.ch";window.nmx_section="test/"+window.nmx_section}window.nmx_url="//"+window.nmx_offer+(document.location.protocol=="https:"?"-ssl":"")+"."+window.nmx_domain+"/cgi-bin/ivw/CP/";var NETMX=window.nmx_url+window.nmx_section+window.nmx_app+path;(new Image).src=NETMX+"?d\x3d"+Math.random()*1E5+"\x26x\x3d"+screen.width+"x"+screen.height;if(Bootstrapper.NZZ.checkDebugLevel(1))Bootstrapper.NZZ.loggr("fire eventbased netMetrixAudit request (eventAction: "+eventAction+
" / eventActionBefore: "+eventActionBefore+")",1)}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR nMA: "+err.message,0)}};Bootstrapper.NZZ.chartBeatVirtualPage=function(url,title,sections,authors,type){try{if(typeof _sf_async_config!=="undefined"&&typeof pSUPERFLY!=="undefined"){if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("Start of chartBeatVirtualPage event (url: "+url+" / title: "+title+" / sections: "+sections+" / authors: "+authors+" / type: "+type+")",3);if(sections!=="undefined")_sf_async_config.sections=
sections;if(authors!=="undefined")_sf_async_config.authors=authors;if(type!=="undefined")_sf_async_config.type=type;Bootstrapper.NZZ.chartBeatSubscriberEngagement();pSUPERFLY.virtualPage(url,title)}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR cBVP: "+err.message,0)}};Bootstrapper.NZZ.chartBeatSubscriberEngagement=function(){try{var _cbq=window._cbq=window._cbq||[];switch(Bootstrapper.NZZ.getUserGroup()){case "subscriber":window._cbq.push(["_acct","paid"]);break;case "registered":window._cbq.push(["_acct",
"lgdin"]);break;default:window._cbq.push(["_acct","anon"])}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR cBSE: "+err.message,0)}};Bootstrapper.NZZ.adobeAnalyticsPageView=function(){try{if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Run Bootstrapper.NZZ.eventTrigger()",3);Bootstrapper.NZZ.eventTrigger();if(typeof s!=="undefined"&&s.isReadyToTrack()){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Call s.t()",5);Bootstrapper.bindPageSpecificCompletion(function(){setTimeout(function(){Bootstrapper.AF.push(["call",
"s","exec"])},250)})}else{if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Delay s.t() for 50ms",5);window.setTimeout(Bootstrapper.NZZ.adobeAnalyticsPageView,50)}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR aAPV: "+err.message,0)}};Bootstrapper.NZZ.adobeAnalyticsTracking=function(){try{if(typeof s!=="undefined"&&typeof window.dataStore!=="undefined"&&typeof window.dataStore.aa!=="undefined"&&typeof window.dataStore.aa.event==="object"&&Object.keys(window.dataStore.aa.event).length>
0){if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("Start of adobeAnalyticsTracking event (typeof s: "+typeof s+" / event.length: "+Object.keys(window.dataStore.aa.event).length+")",3);var iC;var iE;var firstEvent;if(window.dataStore.aa.checkout_event===true&&typeof s.events!=="undefined"&&s.events.search("event811")>=0){if(Bootstrapper.NZZ.checkDebugLevel(2))Bootstrapper.NZZ.loggr("Remove event811: Product View from s.events",2);s.events.replace(",event811","").replace("event811","")}for(iC in window.dataStore.aa.event){if(Bootstrapper.NZZ.checkDebugLevel(4))Bootstrapper.NZZ.loggr("Start of Component loop (eventComponentID: "+
iC+" / window.dataStore.aa.event["+iC+"].length: "+window.dataStore.aa.event[iC].length+")",4);var componentEvent={};firstEvent=true;for(var i in window.dataStore.aa.event[iC]){if(Bootstrapper.NZZ.checkDebugLevel(4))Bootstrapper.NZZ.loggr("Start of Event loop (window.dataStore.aa.event["+iC+"]["+i+"].singleEvent: "+window.dataStore.aa.event[iC][i].singleEvent+" / firstEvent: "+firstEvent+" / window.dataStore.aa.firstRequest: "+window.dataStore.aa.firstRequest+" / window.dataStore.aa.postTrack: "+
window.dataStore.aa.postTrack+")",4);if(window.dataStore.aa.event[iC][i].singleEvent===true&&firstEvent===true&&(window.dataStore.aa.firstRequest||window.dataStore.aa.postTrack)||window.dataStore.aa.event[iC][i].singleEvent===false){for(iE in window.dataStore.aa.event[iC][i].data){if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("Switch for adobeAnalyticsTracking event (eventKey: "+iE+" / eventValues: "+window.dataStore.aa.event[iC][i].data[iE]+")",3);if(window.dataStore.aa.event[iC][i].data.hasOwnProperty(iE)){componentEvent[iE]=
s.apl(componentEvent[iE],typeof window.dataStore.aa.event[iC][i].data[iE]==="object"?window.dataStore.aa.event[iC][i].data[iE].join(","):window.dataStore.aa.event[iC][i].data[iE].toString(),",",2);delete window.dataStore.aa.event[iC][i].data[iE]}}if(Object.keys(window.dataStore.aa.event[iC][i].data).length===0)delete window.dataStore.aa.event[iC][i]}if(Bootstrapper.NZZ.checkDebugLevel(4))Bootstrapper.NZZ.loggr("firstEvent["+iC+"] \x3d false",4);firstEvent=false}if(Object.keys(window.dataStore.aa.event[iC]).length===
0){if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("Delete component: "+iC,3);delete window.dataStore.aa.event[iC]}else if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("component "+iC+" still has "+Object.keys(window.dataStore.aa.event[iC]).length+" event(s)",3);if(!window.dataStore.aa.preTrack&&window.dataStore.aa.firstRequest){if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("Start adding componentEvent to s Object with "+Object.keys(componentEvent).length+
" value(s)",3);for(iE in componentEvent){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Add '"+iE+"' with value '"+componentEvent[iE]+"' to s Object",5);s[iE]=s.apl(s[iE],componentEvent[iE],",",2)}window.dataStore.aa.firstRequest=false}else if(Object.keys(componentEvent).length>0){if(Bootstrapper.NZZ.checkDebugLevel(3))Bootstrapper.NZZ.loggr("Start for adobeAnalyticsTracking customLink "+(window.dataStore.currentCustomLinkLength+1),3);var variableOverrides={};var sBackup={};sBackup.linkTrackVars=
s.linkTrackVars;sBackup.linkTrackEvents=s.linkTrackEvents;for(iE in componentEvent){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Process componentEvent["+iE+"] (typeof: "+typeof componentEvent[iE]+" / length: "+Object.keys(componentEvent[iE]).length+"): "+componentEvent[iE],5);if(iE=="events"&&componentEvent[iE].length>0){s.linkTrackVars=s.apl(s.linkTrackVars,"events",",",2);if(s.linkTrackEvents=="None"){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Remove None from s.linkTrackEvents",
5);s.linkTrackEvents=""}s.linkTrackEvents=s.apl(s.linkTrackEvents,componentEvent[iE],",",2)}else s.linkTrackVars=s.apl(s.linkTrackVars,iE,",",2);variableOverrides[iE]=s.apl(variableOverrides[iE],componentEvent[iE],",",2)}if(Bootstrapper.NZZ.checkDebugLevel(4))Bootstrapper.NZZ.loggr("s.linkTrackVars: "+s.linkTrackVars+" / s.linkTrackEvents: "+s.linkTrackEvents,4);if(Bootstrapper.NZZ.checkDebugLevel(4))Bootstrapper.NZZ.loggr("variableOverrides: "+JSON.stringify(variableOverrides,null,4),4);s.tl(true,
"o","Post Page Event "+ ++window.dataStore.currentCustomLinkLength,variableOverrides);s.linkTrackVars=sBackup.linkTrackVars;s.linkTrackEvents=sBackup.linkTrackEvents}}}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR aAT: "+err.message,0)}};Bootstrapper.NZZ.sendIngressData=function(trigger){try{if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("called sendIngressData("+trigger+")",5);var currentDate=Bootstrapper.NZZ.getCurrentDate();window.dataStore.ingress.version=window.dataStore.ingress.version||
"201807311620";window.dataStore.ingress.updateTS=currentDate;if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("set trigger ("+trigger+")",5);window.dataStore.ingress.trigger=trigger||"undefined";if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("set trigger stats ("+trigger+")",5);if(typeof window.dataStore.ingress.stats.trigger[window.dataStore.ingress.trigger]!=="undefined"){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("init trigger ("+trigger+")",5);window.dataStore.ingress.stats.trigger[window.dataStore.ingress.trigger].count+=
1}else{if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("add trigger count ("+trigger+")",5);window.dataStore.ingress.stats.trigger[window.dataStore.ingress.trigger]={};window.dataStore.ingress.stats.trigger[window.dataStore.ingress.trigger].count=1}window.dataStore.ingress.timezoneOffset=window.dataStore.ingress.timezoneOffset||currentDate.getTimezoneOffset();if(!window.dataStore.ingress.instance){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("Bootstrapper.NZZ.getIngressInstance()",
5);window.dataStore.ingress.instance=Bootstrapper.NZZ.getIngressInstance()}if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("window.dataStore.ingress.instance: "+window.dataStore.ingress.instance,6);window.dataStore.ingress.session=window.dataStore.ingress.session||{};window.dataStore.ingress.session.initSessionID=window.dataStore.ingress.session.initSessionID||Bootstrapper.NZZ.getSessionID();if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("window.dataStore.ingress.session.initSessionID : "+
window.dataStore.ingress.session.initSessionID,6);window.dataStore.ingress.sequence=typeof window.dataStore.ingress.sequence!=="undefined"?window.dataStore.ingress.sequence+1:1;window.dataStore.ingress.clientIP=window.dataStore.ingress.clientIP||Bootstrapper._clientIP;window.dataStore.ingress.location=window.location;window.dataStore.ingress.referrer=document.referrer;window.dataStore.ingress.navigator=window.dataStore.ingress.navigator||{};window.dataStore.ingress.navigator.userAgent=window.navigator.userAgent;
window.dataStore.ingress.navigator.platform=window.navigator.platform;window.dataStore.ingress.navigator.cookieEnabled=window.navigator.cookieEnabled;window.dataStore.ingress.navigator.doNotTrack=window.navigator.doNotTrack;window.dataStore.ingress.navigator.language=window.navigator.language;window.dataStore.ingress.navigator.languages=window.navigator.languages;if(typeof window.dataStore.ingress.navigator.isMobile!=="object"&&typeof isMobile=="object")window.dataStore.ingress.navigator.isMobile=
isMobile.any?isMobile:{any:false};if(Bootstrapper.NZZ.getNested(window,"Bootstrapper.reportedErrors","length")>0){window.dataStore.ingress.error=window.dataStore.ingress.error||{};window.dataStore.ingress.error.ensighten=[];Bootstrapper.reportedErrors.forEach(function(part){window.dataStore.ingress.error.ensighten.push(Bootstrapper.NZZ.getUrlParams(part.src))})}var ingressData={};ingressData.ingress=JSON.parse(JSON.stringify(window.dataStore.ingress));if(Bootstrapper.NZZ.getNested(window,"dataStore.cache.viewport",
"typeof")!=="undefined"){window.dataStore.visibility.viewport.push(window.dataStore.cache.viewport);window.dataStore.visibility.lastActivityTS=window.dataStore.cache.viewport.timeStamp;if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("pushViewportInfo added by '"+window.dataStore.ingress.trigger+"' from cache",6);delete window.dataStore.cache.viewport}ingressData.ingress.performance=Bootstrapper.NZZ.getPerformance();ingressData.ingress.visibility=Bootstrapper.NZZ.getVisibility();ingressData.ingress.ensighten=
Bootstrapper.NZZ.getEnsightenInfo();if(typeof s!=="undefined"){ingressData.aa={};ingressData.aa.version=s.version;if(s.marketingCloudVisitorID)ingressData.aa.marketingCloudVisitorID=s.marketingCloudVisitorID;if(s.pageName)ingressData.aa.pageName=s.pageName;if(s.campaign)ingressData.aa.campaign=s.campaign;if(s.products)ingressData.aa.products=s.products;for(var iprop=1;iprop<100;iprop++)if(s["prop"+iprop])ingressData.aa["prop"+iprop]=s["prop"+iprop];ingressData.aa.prop5=document.location.href;for(var ieVar=
1;ieVar<100;ieVar++)if(s["eVar"+ieVar]&&s["eVar"+ieVar].search("D\x3d")>0)ingressData.aa["eVar"+ieVar]=s["eVar"+ieVar];if(s.hier1)ingressData.aa.hier1=s.hier1;if(s.list1)ingressData.aa.list1=s.list1;if(s.list2)ingressData.aa.list1=s.list2;if(s.events)ingressData.aa.events=s.events}if(typeof window.digitalData!=="undefined"){var digitalDataCopy=JSON.parse(JSON.stringify(window.digitalData));if(Bootstrapper.NZZ.getNested(digitalDataCopy,"user[0].profile[0].profileInfo.userName","typeof")!=="undefined")delete digitalDataCopy.user[0].profile[0].profileInfo.userName;
window.dataStore.event.ingressedCount=Bootstrapper.NZZ.getNested(digitalDataCopy,"event","length");ingressData.digitalData=digitalDataCopy}Bootstrapper.NZZ.xhrRequest("//gc-ingress-prod.danzz.ch/ws-ingress",ingressData);if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("!ngr3ss3d by "+trigger,5)}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR sID ("+trigger+"): "+err.message,0)}};Bootstrapper.NZZ.checkPingTiming=function(initTS,updateTS,lastActivityTS){var currentTS=Bootstrapper.NZZ.getCurrentDate().getTime();
var minPingInterval=1E4;var timeSinceUpdate=currentTS-updateTS;var doPing=false;if(timeSinceUpdate>=minPingInterval){var timeSinceLastActivity=currentTS-lastActivityTS;if(timeSinceLastActivity<=30*1E3)doPing=true;else if(timeSinceLastActivity<=3*60*1E3&&timeSinceUpdate>=3E4)doPing=true;else if(timeSinceLastActivity<=10*60*1E3&&timeSinceUpdate>=6E4)doPing=true;else if(timeSinceLastActivity<=30*60*1E3&&timeSinceUpdate>=36E4)doPing=true;else if(timeSinceLastActivity<=60*60*1E3&&timeSinceUpdate>=6E5)doPing=
true;else if(timeSinceUpdate>=30*60*1E3)doPing=true;if(doPing&&Bootstrapper.NZZ.checkDebugLevel(6)){var minSinceUpdate=Math.floor(timeSinceUpdate/1E3/60);var minSinceLastActivity=Math.floor(timeSinceLastActivity/1E3/60);Bootstrapper.NZZ.loggr("timeSinceUpdate: "+minSinceUpdate+":"+(Math.floor(timeSinceUpdate/1E3)-minSinceUpdate*60+100).toString().substring(1)+" / timeSinceLastActivity: "+minSinceLastActivity+":"+(Math.floor(timeSinceLastActivity/1E3)-minSinceLastActivity*60+100).toString().substring(1),
6)}}return doPing};Bootstrapper.NZZ.getTimeDifference=function(date1,date2,format){try{var difference=(new Date(date1)).getTime()-(new Date(date2)).getTime();var differenceFormatted="";switch(format){case "h":differenceFormatted=Math.ceil(difference/1E3/60/60);break;default:differenceFormatted="returnType not defined"}return differenceFormatted}catch(e){Bootstrapper.NZZ.loggr("TMS ERROR gTD: "+e.message,0);return"tms error"}};Bootstrapper.NZZ.isNumeric=function(n){try{return!isNaN(parseFloat(n))&&
isFinite(n)}catch(e){Bootstrapper.NZZ.loggr("TMS ERROR iN: "+e.message,0);return"tms error"}};Bootstrapper.NZZ.getXHR=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHttp")}catch(e){}};Bootstrapper.NZZ.xhrRequest=function(uri,data){var xhr=Bootstrapper.NZZ.getXHR();if("withCredentials"in xhr)xhr.open("POST",uri,true);xhr.onreadystatechange=
function(){if(xhr.readyState===4){if(xhr.status===200||xhr.status===304){var response=JSON.parse(xhr.responseText);if(response.status==="ok");else if(response.status==="error");else;}}else;};xhr.setRequestHeader("Content-Type","application/json; charset\x3dUTF-8");xhr.send(JSON.stringify(data))};Bootstrapper.NZZ.checkDebugLevel=function(debugLevel){if(typeof window.dataStore.debug.level!=="undefined"&&debugLevel<=window.dataStore.debug.level)return true;else return false};Bootstrapper.NZZ.loggr=function(msg,
lvl){window.dataStore.count=window.dataStore.count||{};window.dataStore.count.loggr=window.dataStore.count.loggr+1||1;var consCss;var ingressLog=false;var digitalDataLog=false;switch(lvl){case 0:consCss="background: #ff0000; color: #ffffbb";ingressLog=true;digitalDataLog=true;break;case 1:consCss="background: #337777; color: #ffffff";break;case 2:consCss="background: #559999; color: #ffffff";break;case 3:consCss="background: #77bbbb; color: #ffffff";break;case 4:consCss="background: #99dddd; color: #000000";
break;case 5:consCss="background: #bbffff; color: #000000";break;case 6:consCss="background: #dddddd; color: #222222";break;case 7:consCss="background: #eeeeee; color: #444444";break;default:consCss="background: #ddffff; color: #000000"}if(ingressLog){window.dataStore.ingress.error=window.dataStore.ingress.error||{};window.dataStore.ingress.error.nzz=window.dataStore.ingress.error.nzz||[];window.dataStore.ingress.error.nzz.push({"msg":msg,"lvl":lvl})}if(digitalDataLog){window.digitalData=window.digitalData||
{};window.digitalData.component=window.digitalData.component||[];window.digitalData.event=window.digitalData.event||[];var errorComponentID=Bootstrapper.NZZ.getComponent("componentInfo.componentID","tms_loggr");var msgCategory=msg.substring(0,msg.search(":"));var msgDetail=msg.substring(msg.search(":")+1).trim();if(errorComponentID===false)window.digitalData.component.push({"componentInfo":{"componentID":"tms_loggr","componentName":"TMS Debug Log"},"category":{"primaryCategory":"TMS","subCategory1":"Log",
"subCategory2":lvl,"componentType":"tms"}});window.digitalData.event.push({"eventInfo":{"eventName":"TMS Event","eventAction":"loggr","eventValue":msgDetail,"eventNonInteractive":true,"type":"tms","timeStamp":Bootstrapper.NZZ.getCurrentDate(),"componentID":"tms_loggr","componentName":"TMS Debug Log"},"category":{"primaryCategory":"tms","subCategory1":"log","subCategory2":msgCategory}})}if(window.dataStore.debug.pixel===true)(new Image).src="//tms.nzz.ch/pixel.gif?seq\x3d"+window.dataStore.count.loggr+
"\x26lvl\x3d"+encodeURI(lvl)+"\x26msg\x3d"+encodeURI(msg);else console.log("%c "+msg+" ",consCss)};Bootstrapper.NZZ.getVisibility=function(){Bootstrapper.NZZ.updateVisibility();return window.dataStore.visibility};Bootstrapper.NZZ.updateVisibility=function(){var updateState;var currentDate=Bootstrapper.NZZ.getCurrentDate();if(currentDate<window.dataStore.visibility.updateTS){var timeStampDifference=Math.round((currentDate.getTime()-window.dataStore.visibility.updateTS.getTime())/1E3);if(timeStampDifference<
0)Bootstrapper.NZZ.loggr("TMS ERROR uV: "+timeStampDifference+" (currentDate ("+currentDate+") \x3c window.dataStore.visibility.updateTS("+window.dataStore.visibility.updateTS+"))",0);window.dataStore.visibility.updateTS=currentDate}if(document.visibilityState!==window.dataStore.visibility.currentState){window.dataStore.visibility.lastState=window.dataStore.visibility.currentState;window.dataStore.visibility.currentState=document.visibilityState;window.dataStore.visibility.changeCount=window.dataStore.visibility.changeCount+
1;updateState=window.dataStore.visibility.lastState;if(window.dataStore.visibility.currentState=="visible")window.dataStore.visibility.lastActivityTS=currentDate}else{updateState=window.dataStore.visibility.currentState;if(window.dataStore.visibility.currentState=="visible"&&!window.dataStore.visibility.lastActivityTS)window.dataStore.visibility.lastActivityTS=currentDate}switch(updateState){case "hidden":window.dataStore.visibility.hiddenTime=window.dataStore.visibility.hiddenTime+Math.round((currentDate.getTime()-
window.dataStore.visibility.updateTS.getTime())/1E3);break;case "visible":window.dataStore.visibility.visibleTime=window.dataStore.visibility.visibleTime+Math.round((currentDate.getTime()-window.dataStore.visibility.updateTS.getTime())/1E3);break}window.dataStore.visibility.updateTS=currentDate};Bootstrapper.NZZ.pushViewportInfo=function(trigger){try{var currentDate=Bootstrapper.NZZ.getCurrentDate();var viewportInfo={};viewportInfo.timeStamp=currentDate;viewportInfo.trigger=trigger;viewportInfo.state=
document.visibilityState;viewportInfo.screenWidth=window.screen.width;viewportInfo.screenHeight=window.screen.height;viewportInfo.browserWidth=0;viewportInfo.browserHeight=0;if(typeof window.innerWidth=="number"){viewportInfo.browserWidth=window.innerWidth;viewportInfo.browserHeight=window.innerHeight}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){viewportInfo.browserWidth=document.documentElement.clientWidth;viewportInfo.browserHeight=
document.documentElement.clientHeight}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){viewportInfo.browserWidth=document.body.clientWidth;viewportInfo.browserHeight=document.body.clientHeight}if(window.screen&&window.screen.orientation&&(window.screen.orientation.angle||window.screen.orientation.type)){viewportInfo.orientationAngle=window.screen.orientation.angle;viewportInfo.orientationType=window.screen.orientation.type}viewportInfo.scrollTop=Math.round(document.documentElement.scrollTop||
document.body.scrollTop||window.pageYOffset);viewportInfo.scrollHeight=document.documentElement.scrollHeight||document.body.scrollHeight;viewportInfo.scrollPercentageVertical=Math.round(viewportInfo.scrollTop/(viewportInfo.scrollHeight-viewportInfo.browserHeight)*100);viewportInfo.scrollLeft=Math.round(document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset);viewportInfo.scrollWidth=document.documentElement.scrollWidth||document.body.scrollWidth;viewportInfo.scrollPercentageHorizontal=
Math.round(viewportInfo.scrollLeft/(viewportInfo.scrollWidth-viewportInfo.browserWidth)*100);Bootstrapper.NZZ.updateVisibility();viewportInfo.visibleTimeline=window.dataStore.visibility.visibleTime;viewportInfo.totalTimeline=window.dataStore.visibility.visibleTime+window.dataStore.visibility.hiddenTime;if(currentDate-dataStore.visibility.lastActivityTS>3E3||viewportInfo.trigger=="orientationchange"||viewportInfo.trigger=="visibilitychange"){if(Bootstrapper.NZZ.getNested(window,"dataStore.cache.viewport.trigger",
"typeof")!="undefined"){if(window.dataStore.cache.viewport.trigger!=viewportInfo.trigger){window.dataStore.visibility.viewport.push(window.dataStore.cache.viewport);if(Bootstrapper.NZZ.checkDebugLevel(6))Bootstrapper.NZZ.loggr("pushViewportInfo added by '"+window.dataStore.cache.viewport.trigger+"' from cache",6)}delete window.dataStore.cache.viewport}window.dataStore.visibility.viewport.push(viewportInfo);window.dataStore.visibility.lastActivityTS=currentDate;Bootstrapper.NZZ.sendIngressData(viewportInfo.trigger)}else{window.dataStore.cache.viewport=
viewportInfo;if(Bootstrapper.NZZ.checkDebugLevel(7))Bootstrapper.NZZ.loggr("pushViewportInfo added by '"+viewportInfo.trigger+"' to cache",7)}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR pVI ("+trigger+"): "+err.message,0)}};Bootstrapper.NZZ.initVID=function(){try{if(!Bootstrapper.NZZ.getNested(window,"dataStore.ingress.vID","value")&&typeof Bootstrapper.NZZ.vID=="function"){if(window.dataStore.trigger.vID===true){window.dataStore.trigger.vID="init";try{var vIDOptions={excludeColorDepth:true,excludeScreenResolution:true,
excludeAvailableScreenResolution:true,excludePixelRatio:true,excludeTouchSupport:true,excludeHasLiedResolution:true,excludeAdBlock:true};(new Bootstrapper.NZZ.vID(vIDOptions)).get(function(result,components){window.dataStore.ingress.navigator=window.dataStore.ingress.navigator||{};window.dataStore.ingress.navigator.components=window.dataStore.ingress.navigator.components||{};window.dataStore.ingress.vID=result;components.forEach(pusH);function pusH(item,index,arr){var ivalue=typeof item.value==="object"?
item.value.join(","):item.value;window.dataStore.ingress.navigator.components[item.key]=ivalue.length>64?Bootstrapper.NZZ.sha256(ivalue):ivalue}})}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR vID: "+err.message,0)}}if(window.dataStore.trigger.vIDa===true){window.dataStore.trigger.vIDa="init";try{var vIDaOptions={excludeUserAgent:true,excludeColorDepth:true,excludeScreenResolution:true,excludeAvailableScreenResolution:true,excludePixelRatio:true,excludeTouchSupport:true,excludeHasLiedResolution:true,
excludeHasLiedLanguages:true,excludeHasLiedOs:true,excludeHasLiedBrowser:true,excludePlugins:true,excludeIEPlugins:true,excludeDoNotTrack:true,excludeAdBlock:true};(new Bootstrapper.NZZ.vID(vIDaOptions)).get(function(result){window.dataStore.ingress.vIDa=result})}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR vIDa: "+err.message,0)}}}if(window.dataStore.trigger.vIDc===true){window.dataStore.trigger.vIDc="init";try{if(Bootstrapper.Cookies.test("p4m_vid")){window.dataStore.p4m=window.dataStore.p4m||{};
window.dataStore.p4m.vid=Bootstrapper.Cookies.get("p4m_vid")}else Bootstrapper.loadScriptCallback("//tms.nzz.ch/p4m/v.js",function(){Bootstrapper.Cookies.set("p4m_vid",Bootstrapper.NZZ.getNested(window,"dataStore.p4m.vid","value"))})}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR vIDc: "+err.message,0)}}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR iV: "+err.message,0)}};Bootstrapper.NZZ.checkVID=function(){try{if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("checkVID (Interval ID: "+
window.dataStore.interval.checkVID+")",5);if(window.dataStore.trigger.vID=="init"&&Bootstrapper.NZZ.getNested(window,"dataStore.ingress.vID","value"))window.dataStore.trigger.vID="done";if(window.dataStore.trigger.vIDa=="init"&&Bootstrapper.NZZ.getNested(window,"dataStore.ingress.vIDa","value"))window.dataStore.trigger.vIDa="done";if(window.dataStore.trigger.vIDc=="init"&&Bootstrapper.NZZ.getNested(window,"dataStore.p4m.vid","value")){window.dataStore.ingress=window.dataStore.ingress||{};window.dataStore.ingress.vIDc=
Bootstrapper.NZZ.getNested(window,"dataStore.p4m.vid","value");window.dataStore.trigger.vIDc="done"}if(window.dataStore.trigger.vID=="done"){window.dataStore.trigger.vID="ingressed";if(window.dataStore.trigger.vIDa=="done")window.dataStore.trigger.vIDa="ingressed";if(window.dataStore.trigger.vIDc=="done")window.dataStore.trigger.vIDc="ingressed";Bootstrapper.NZZ.sendIngressData("vID")}if(window.dataStore.trigger.vIDa=="done"){window.dataStore.trigger.vIDa="ingressed";if(window.dataStore.trigger.vIDc==
"done")window.dataStore.trigger.vIDc="ingressed";Bootstrapper.NZZ.sendIngressData("vIDa")}if(window.dataStore.trigger.vIDc=="done"){window.dataStore.trigger.vIDc="ingressed";Bootstrapper.NZZ.sendIngressData("vIDc")}if((window.dataStore.trigger.vID=="ingressed"||window.dataStore.trigger.vID===false)&&(window.dataStore.trigger.vIDa=="ingressed"||window.dataStore.trigger.vIDa===false)&&(window.dataStore.trigger.vIDc=="ingressed"||window.dataStore.trigger.vIDc===false))clearInterval(window.dataStore.interval.checkVID)}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR cV: "+
err.message,0)}};Bootstrapper.NZZ.getVID=function(){try{Bootstrapper.NZZ.initVID();window.dataStore.interval.checkVID=setInterval(Bootstrapper.NZZ.checkVID,25)}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR gV: "+err.message,0)}};Bootstrapper.NZZ.addEvent=function(evnt,elem,func){if(elem.addEventListener)elem.addEventListener(evnt,func,false);else if(elem.attachEvent)elem.attachEvent("on"+evnt,func);else elem[evnt]=func};Bootstrapper.NZZ.initDataStore();try{var currentDate=Bootstrapper.NZZ.getCurrentDate();
var cookieExpDate=currentDate;cookieExpDate.setDate(currentDate.getDate()+1);if(Bootstrapper.data.extract("ens_dbglvl","param")!==""){Bootstrapper.Cookies.set("ens_dbglvl",Bootstrapper.data.extract("ens_dbglvl","param"),cookieExpDate);window.dataStore.debug.level=Bootstrapper.data.extract("ens_dbglvl","param")}else if(Bootstrapper.Cookies.test("ens_dbglvl"))window.dataStore.debug.level=Bootstrapper.Cookies.get("ens_dbglvl");else window.dataStore.debug.level=window.dataStore.debug.level||-1;if(Bootstrapper.data.extract("ens_dbgcns",
"param")=="off")Bootstrapper.Cookies.set("ens_dbgcns","",currentDate);else if(Bootstrapper.data.extract("ens_dbgcns","param")!==""||Bootstrapper.Cookies.test("ens_dbgcns")){dbgcns=[];dbgcns=dbgcns.concat(Bootstrapper.data.extract("ens_dbgcns","param").split(","));dbgcns=dbgcns.concat(Bootstrapper.Cookies.get("ens_dbgcns").split(","));dbgcns=dbgcns.filter(function(item,pos,self){return self.indexOf(item)==pos});Bootstrapper.Cookies.set("ens_dbgcns",dbgcns.join(","),cookieExpDate);for(var i=0;i<dbgcns.length;i++)switch(dbgcns[i]){case "fblite":Bootstrapper.insertScript("https://getfirebug.com/firebug-lite.js#startOpened,enableTrace");
break}}}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR dBG: "+err.message,0)}try{Bootstrapper.NZZ.addEvent("visibilitychange",document,function(){if(Bootstrapper.NZZ.checkDebugLevel(5))Bootstrapper.NZZ.loggr("document.visibilityState: "+document.visibilityState,5);if(document.visibilityState!==window.dataStore.visibility.currentState)Bootstrapper.NZZ.pushViewportInfo("visibilitychange")});Bootstrapper.NZZ.addEvent("scroll",window,function(){Bootstrapper.NZZ.pushViewportInfo("scroll")});Bootstrapper.NZZ.addEvent("resize",
window,function(){Bootstrapper.NZZ.pushViewportInfo("resize")});Bootstrapper.NZZ.addEvent("orientationchange",window,function(){Bootstrapper.NZZ.pushViewportInfo("orientationchange")});Bootstrapper.NZZ.addEvent("beforeunload",window,function(){Bootstrapper.NZZ.pushViewportInfo("beforeunload")})}catch(err){Bootstrapper.NZZ.loggr("TMS ERROR aE: "+err.message,0)}},2574498,[1770006],430195,[281887]);Bootstrapper.getServerComponent(Bootstrapper.getExtraParams ? Bootstrapper.getExtraParams() : undefined);}})();